{"version":3,"sources":["components/Footer.jsx","components/Navbar.jsx","pages/Home/Home.jsx","_services/emitter.js","_api/index.js","_actions/post.js","components/Filters.jsx","util/util.js","components/RecipeCard/Item.jsx","pages/Discover/Pages.jsx","components/Tags.jsx","components/Spinner.jsx","pages/Discover/Discover.jsx","pages/Auth/ThirdPartyAuth.jsx","_actions/auth.js","pages/Auth/Login.jsx","pages/Auth/Signup.jsx","components/TopMostLogger.jsx","pages/Auth/Auth.jsx","_actions/user.js","pages/Profile/Modal.jsx","pages/Profile/ProfilePosts.jsx","pages/Profile/Profile.jsx","components/Markdown.jsx","components/Button.jsx","components/Comments/Comment.jsx","components/Comments/Comments.jsx","pages/Recipe/Recipe.jsx","pages/Create/FilePreview.jsx","pages/Create/Preview.jsx","pages/Create/ListIngredients.jsx","pages/Create/ListTags.jsx","components/ConfirmationModal.jsx","pages/Create/Create.jsx","pages/Create/Edit.jsx","pages/Settings/Settings.jsx","App.js","_reducers/index.js","_reducers/auth.js","_reducers/user.js","_reducers/postForm.js","_reducers/post.js","_reducers/editForm.js","index.js"],"names":["Footer","className","to","href","target","Navbar","useState","open","setOpen","user","useSelector","state","auth","location","useLocation","history","useHistory","useEffect","onClick","_id","push","src","imageUrl","alt","Home","motion","section","transition","duration","initial","opacity","animate","exit","eventEmitter","ee","Emitter","on","e","fn","once","off","emit","Object","freeze","API","axios","create","baseURL","process","interceptors","request","use","req","emitter","profile","localStorage","getItem","headers","Authorization","JSON","parse","token","response","res","data","err","apiSignIn","body","post","apiSignUp","apiGoogleSignIn","apiGetUser","userId","get","apiFollowUser","targetId","patch","apiUnfollowUser","apiGetFollowers","apiGetFollowing","apiBlockUser","apiUnblockUser","apiEditUser","apiDeactivateUser","apiReactivateUser","apiGetPostsFromUser","apiGetDiscover","filters","apiCreatePost","apiEditPost","id","apiGetPost","apiDeletePost","delete","apiLikePost","apiAddComment","commentString","apiRemoveComment","commentId","apiGetPostsWithTags","getPostsWithTags","a","error","message","getDiscover","getPostByFriendlyId","createPost","console","log","deletePost","editPost","likePost","commentOnPost","comment","removeComment","Range","createSliderWithTooltip","_range","Filters","setFilters","setFilterState","onSubmit","preventDefault","htmlFor","name","onChange","sort","value","period","style","marginTop","margin","serves","onAfterChange","v","max","min","defaultValue","tipFormatter","isMobile","cookTime","placeholder","type","prepTime","query","bufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","i","String","fromCharCode","window","btoa","formatFilters","tags","length","join","page","perPage","imagePattern","placeImageInContent","content","images","result","matchAll","contentString","imgNames","map","img","imgName","substring","includes","replace","find","image","idx","base64","next","done","DOMPurify","sanitize","formatLargeNumber","num","parseFloat","Number","toFixed","Item","recipe","object","delay","isOnProfile","backgroundImage","userFriendlyId","title","likes","username","Pages","page_arr","pageCount","cursor","Tags","onClickTag","tag","setTag","Spinner","showing","xmlns","xmlnsXlink","background","display","shapeRendering","width","height","viewBox","preserveAspectRatio","transform","attributeName","repeatCount","values","keyTimes","dur","fillOpacity","fill","d","Discover","dispatch","useDispatch","loading","posts","all","isMounted","search","split","then","pages","payload","catch","handleSetFilters","newVal","val","_tag","filter","ThirdPartyAuth","onSuccessFacebook","onSuccessGoogle","clientId","onSuccess","signIn","signUp","googleSignin","Login","handleSignIn","showPass","setShowPass","email","password","formData","setFormData","action","tokenId","profileObj","googleId","Signup","handleSignUp","repeatPassword","TopMostLogger","show","toLowerCase","Auth","setTitle","setMessage","setShowing","showDialog","setTimeout","verificationSent","pathname","getUser","editUser","followUser","unfollowUser","blockUser","unblockUser","getFollowers","getFollowing","getUserPosts","deactivateUser","reactivateUser","Modal","modal","closeModal","children","child","ProfilePosts","setPosts","Profile","setModal","single","me","_followUser","_unfollowUser","_blockUser","blockList","score","followers","_followers","showFollowers","_following","showFollowing","following","bio","Markdown","text","marked","regex","RegExp","dangerouslySetInnerHTML","__html","Button","Error","cName","ariaLabel","Comment","_removeComment","Comments","comments","postId","setComment","submitComment","index","Recipe","showLog","setShowLog","logTitle","setLogTitle","logMessage","setLogMessage","goBack","files","ingredients","ing","method","FilePreview","onFilesChange","inputRef","useRef","file","current","focus","select","ref","onKeyPress","key","_files","f","onContextMenu","handleClick","Preview","ListIngredients","onClickIngredient","item","ListTags","ConfirmationModal","buttons","Create","posted","modalShowing","logger","ingredientsRef","createRef","tagsRef","handleFiles","filesToAdd","count","size","arrayBuffer","bfr","lastModified","originalFile","setState","this","addIngredient","addTag","removeEventListener","setStorage","removeItem","props","setStore","setItem","stringify","addEventListener","onKeyDownCapture","stroke","strokeWidth","newIngredients","_item","newTags","cols","rows","role","multiple","encType","Component","withRouter","connect","_state","postForm","newState","submit","editForm","Settings","fileRef","showConfirmation","setShowConfirmation","showResetPassword","setShowResetPassword","verified","deactivated","details","setDetails","submitEdit","deactivateProfile","reactivateProfile","b64","App","setLoading","AnimatePresence","exitBeforeEnter","path","exact","Edit","render","p","match","params","combineReducers","store","createStore","reducers","composeWithDevTools","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.90773725.chunk.js","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst Footer = () => {\r\n\treturn (\r\n\t\t<footer className=\"footer\">\r\n\t\t\t<div className=\"footer__logo\">\r\n\t\t\t\t<h3>Recipes</h3>\r\n\t\t\t</div>\r\n\t\t\t<nav className=\"footer__navigation\">\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<Link to=\"/\">Home</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<Link to=\"/discover\">Discover</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<Link to=\"/post\">Post</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</nav>\r\n\t\t\t<div className=\"footer__info\">\r\n\t\t\t\t<div className=\"footer__info__legal\">\r\n\t\t\t\t\t<Link to=\"/\">Privacy Policy</Link>\r\n\t\t\t\t\t<Link to=\"/\">Terms &amp; Conditions</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"footer__info__copyright\">\r\n\t\t\t\t\t<a href=\"https://github.com/sean-b765\" target=\"_blank\">\r\n\t\t\t\t\t\tCopyright &copy; 2021 | Sean Boaden\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</footer>\r\n\t)\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Link, useHistory, useLocation } from 'react-router-dom'\r\n\r\nconst Navbar = () => {\r\n\tconst [open, setOpen] = useState(false)\r\n\r\n\tconst user = useSelector((state) => state.auth.user)\r\n\r\n\tconst location = useLocation()\r\n\tconst history = useHistory()\r\n\r\n\tuseEffect(() => {\r\n\t\tsetOpen(false)\r\n\t}, [location])\r\n\r\n\treturn (\r\n\t\t<header className=\"navbar\">\r\n\t\t\t<nav className=\"navbar__navigation\">\r\n\t\t\t\t<div\r\n\t\t\t\t\taria-label=\"Open the menu\"\r\n\t\t\t\t\tclassName={\r\n\t\t\t\t\t\topen\r\n\t\t\t\t\t\t\t? 'navbar__navigation__mobile close'\r\n\t\t\t\t\t\t\t: 'navbar__navigation__mobile'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonClick={() => setOpen(!open)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={open ? 'menu mobile-variant' : 'menu'}>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<Link to=\"/\">Home</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<Link to=\"/discover\">Discover</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<Link to=\"/post\">Post</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t{!user?._id && (\r\n\t\t\t\t\t\t<div className=\"menu__mobile__actions\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\tonClick={() => history.push('/login')}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn--pill btn--pill-inverse btn--solid-blue\"\r\n\t\t\t\t\t\t\t\tonClick={() => history.push('/signup')}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tSign up\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</nav>\r\n\r\n\t\t\t<div className=\"navbar__brand\">\r\n\t\t\t\t<Link to=\"/\" className=\"navbar__brand__logo\" aria-label=\"Recipes Logo\">\r\n\t\t\t\t\tR\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Login/signup should show when not logged in */}\r\n\t\t\t{!user && (\r\n\t\t\t\t<div className=\"navbar__actions\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\tonClick={() => history.push('/login')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tLogin\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn btn--pill btn--pill-inverse btn--solid-blue\"\r\n\t\t\t\t\t\tonClick={() => history.push('/signup')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tSign up\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{/* See notification bell / user avatar when logged in */}\r\n\t\t\t{user && (\r\n\t\t\t\t<div className=\"navbar__notif\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"navbar__notif__profile\"\r\n\t\t\t\t\t\taria-label=\"Visit your profile\"\r\n\t\t\t\t\t\tonClick={() => history.push(`/profiles/${user._id}`)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={user.imageUrl ? user.imageUrl : '/images/default-avatar.png'}\r\n\t\t\t\t\t\t\talt=\"Your profile\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nexport default Navbar\r\n","import React from 'react'\r\nimport { AiOutlineSearch, AiOutlineShareAlt } from 'react-icons/ai'\r\nimport { RiCompassDiscoverFill } from 'react-icons/ri'\r\nimport { BiUserPlus } from 'react-icons/bi'\r\nimport { motion } from 'framer-motion'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst Home = () => {\r\n\tconst history = useHistory()\r\n\tconst user = useSelector((state) => state.auth.user)\r\n\r\n\treturn (\r\n\t\t<motion.section\r\n\t\t\tclassName=\"home\"\r\n\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\texit={{ opacity: 0 }}\r\n\t\t>\r\n\t\t\t<div className=\"home__wrapper\">\r\n\t\t\t\t<div className=\"home__wrapper__landing\">\r\n\t\t\t\t\t<header className=\"home__wrapper__landing__split\">\r\n\t\t\t\t\t\t<h1\r\n\t\t\t\t\t\t\tdata-aos=\"fade\"\r\n\t\t\t\t\t\t\tdata-aos-duration=\"750\"\r\n\t\t\t\t\t\t\tdata-aos-delay=\"500\"\r\n\t\t\t\t\t\t\tdata-aos-timing=\"\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tYour favourite recipes,\r\n\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\tdata-aos=\"fade-right\"\r\n\t\t\t\t\t\t\tdata-aos-delay=\"800\"\r\n\t\t\t\t\t\t\tdata-aos-duration=\"850\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tall in one place.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t{!user?._id && (\r\n\t\t\t\t\t\t<div className=\"home__wrapper__landing__split home__wrapper__landing__split--center\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn--large\"\r\n\t\t\t\t\t\t\t\tonClick={() => history.push('/signup')}\r\n\t\t\t\t\t\t\t\tdata-aos-delay=\"1200\"\r\n\t\t\t\t\t\t\t\tdata-aos-duration=\"500\"\r\n\t\t\t\t\t\t\t\tdata-aos=\"zoom-in-up\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tGet Started\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<section className=\"home__wrapper__showcase\">\r\n\t\t\t\t\t<div className=\"home__wrapper__showcase__item home__wrapper__showcase__item--discover\">\r\n\t\t\t\t\t\t<header data-aos=\"fade\" data-aos-duration=\"750\">\r\n\t\t\t\t\t\t\t<RiCompassDiscoverFill />\r\n\t\t\t\t\t\t\t<h2>Discover new tastes</h2>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t<article data-aos=\"zoom-in-up\" data-aos-duration=\"750\">\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\tLorem ipsum dolor, sit amet consectetur adipisicing elit.\r\n\t\t\t\t\t\t\t\tVoluptatibus ratione facilis dolorum cupiditate rem enim non?\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</article>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"home__wrapper__showcase__item home__wrapper__showcase__item--reverse home__wrapper__showcase__item--search\">\r\n\t\t\t\t\t\t<article data-aos=\"zoom-in-up\" data-aos-duration=\"750\">\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\tLorem ipsum dolor sit amet consectetur adipisicing elit. Natus\r\n\t\t\t\t\t\t\t\tdolorum voluptate sapiente.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t<header data-aos=\"fade\" data-aos-duration=\"750\">\r\n\t\t\t\t\t\t\t<AiOutlineSearch />\r\n\t\t\t\t\t\t\t<h2>Search for a dish</h2>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"home__wrapper__showcase__item home__wrapper__showcase__item--features\">\r\n\t\t\t\t\t\t<div className=\"split\">\r\n\t\t\t\t\t\t\t<header data-aos=\"fade\" data-aos-duration=\"750\">\r\n\t\t\t\t\t\t\t\t<BiUserPlus />\r\n\t\t\t\t\t\t\t\t<h2>Follow your friends</h2>\r\n\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t<article data-aos=\"zoom-in-up\" data-aos-duration=\"750\">\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tLorem, ipsum dolor sit amet consectetur adipisicing elit.\r\n\t\t\t\t\t\t\t\t\tAtque placeat rerum error consectetur minus nulla ad.\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"split\">\r\n\t\t\t\t\t\t\t<header data-aos=\"fade\" data-aos-duration=\"750\">\r\n\t\t\t\t\t\t\t\t<AiOutlineShareAlt />\r\n\t\t\t\t\t\t\t\t<h2>Share your own creations</h2>\r\n\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t<article data-aos=\"zoom-in-up\" data-aos-duration=\"750\">\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tLorem ipsum dolor, sit amet consectetur adipisicing elit.\r\n\t\t\t\t\t\t\t\t\tIllum, nam?\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t</motion.section>\r\n\t)\r\n}\r\n\r\nexport default Home\r\n","import ee from 'eventemitter3'\r\n\r\n// this emitter is used to show a loading animation for axios requests.\r\n// events are emitted in _api/index.js via axios intercepters,\r\n//  and can be listened to in any component\r\n\r\nconst eventEmitter = new ee()\r\n\r\nconst Emitter = {\r\n\ton: (e, fn) => eventEmitter.on(e, fn),\r\n\tonce: (e, fn) => eventEmitter.once(e, fn),\r\n\toff: (e, fn) => eventEmitter.off(e, fn),\r\n\temit: (e, fn) => eventEmitter.emit(e, fn),\r\n}\r\n\r\n// prevent new properties being added\r\nObject.freeze(Emitter)\r\n\r\nexport default Emitter\r\n","import axios from 'axios'\r\n\r\nimport emitter from '../_services/emitter'\r\n\r\nconst API = axios.create({ baseURL: process.env.REACT_APP_BACKEND })\r\n\r\nAPI.interceptors.request.use((req) => {\r\n\temitter.emit('REQUEST_START', true)\r\n\r\n\tconst profile = localStorage.getItem('profile')\r\n\r\n\tif (profile) {\r\n\t\treq.headers.Authorization = `Bearer ${JSON.parse(profile).token}`\r\n\t}\r\n\r\n\treturn req\r\n})\r\n\r\nAPI.interceptors.response.use(\r\n\t(res) => {\r\n\t\temitter.emit('RESPONSE_FINISH', res.data)\r\n\r\n\t\treturn res\r\n\t},\r\n\t(err) => {\r\n\t\temitter.emit('RESPONSE_ERROR', err)\r\n\t\tthrow err\r\n\t}\r\n)\r\n\r\n// Auth\r\nexport const apiSignIn = (body) => API.post('/auth/signin', body)\r\nexport const apiSignUp = (body) => API.post('/auth/signup', body)\r\nexport const apiGoogleSignIn = (body) => API.post('/auth/signin-google', body)\r\n\r\n// Users\r\nexport const apiGetUser = (userId) => API.get(`/user/${userId}`)\r\nexport const apiFollowUser = (targetId) => API.patch(`/user/follow/${targetId}`)\r\nexport const apiUnfollowUser = (targetId) =>\r\n\tAPI.patch(`/user/unfollow/${targetId}`)\r\nexport const apiGetFollowers = (userId) => API.get(`/user/${userId}/followers`)\r\nexport const apiGetFollowing = (userId) => API.get(`/user/${userId}/following`)\r\nexport const apiBlockUser = (targetId) => API.patch(`/user/block/${targetId}`)\r\nexport const apiUnblockUser = (targetId) =>\r\n\tAPI.patch(`/user/unblock/${targetId}`)\r\nexport const apiEditUser = (body, userId) => API.patch(`/user/${userId}`, body)\r\n\r\nexport const apiDeleteUser = (userId) => API.delete(`/user/${userId}`)\r\nexport const apiDeactivateUser = (userId) =>\r\n\tAPI.patch(`/user/${userId}/deactivate`)\r\n// Make Public\r\nexport const apiReactivateUser = (userId) =>\r\n\tAPI.patch(`/user/${userId}/reactivate`)\r\n\r\n// user posts\r\nexport const apiGetPostsFromUser = (userId) => API.get(`/user/${userId}/posts`)\r\n\r\n// Password Reset\r\nexport const apiResetPasswordRequest = (userId) =>\r\n\tAPI.get(`/user/${userId}/reset-password-request`)\r\nexport const apiResetPassword = (userId, hash, body) =>\r\n\tAPI.post(`/user/${userId}/${hash}/reset-password`, body)\r\nexport const apiChangePassword = (userId) =>\r\n\tAPI.patch(`/user/${userId}/change-password`)\r\n\r\n// Verification\r\nexport const apiVerifyUser = (hash) => API.get(`/verify/${hash}`)\r\nexport const apiRequestVerification = (email) =>\r\n\tAPI.get(`/verify/request/${email}`)\r\n\r\n// Posts\r\nexport const apiGetDiscover = (filters = '?sort=rating&period=alltime') =>\r\n\tAPI.get(`/posts/discover${filters}`)\r\nexport const apiCreatePost = (body) => API.post(`/posts/create`, body)\r\nexport const apiEditPost = (body, id) => API.patch(`/posts/edit/${id}`, body)\r\nexport const apiGetPost = (id) => API.get(`/posts/post/${id}`)\r\nexport const apiSearch = (filters = '?sort=rating&period=alltime') =>\r\n\tAPI.get(`/posts/search${filters}`)\r\n\r\n// interact with posts\r\nexport const apiDeletePost = (id) => API.delete(`/posts/delete/${id}`)\r\nexport const apiLikePost = (id) => API.patch(`/posts/like/${id}`)\r\nexport const apiAddComment = (id, commentString) =>\r\n\tAPI.post(`/posts/comment/${id}`, commentString)\r\nexport const apiRemoveComment = (commentId) =>\r\n\tAPI.delete(`/posts/remove-comment/${commentId}`)\r\nexport const apiReportPost = (id) => API.patch(`/posts/report/${id}`)\r\n\r\n// get posts from tags\r\nexport const apiGetPostsWithTags = (filters) =>\r\n\tAPI.get(`/posts/tags/${filters}`)\r\n","import {\r\n\tapiAddComment,\r\n\tapiCreatePost,\r\n\tapiDeletePost,\r\n\tapiEditPost,\r\n\tapiGetDiscover,\r\n\tapiGetPost,\r\n\tapiGetPostsWithTags,\r\n\tapiLikePost,\r\n\tapiRemoveComment,\r\n\tapiReportPost,\r\n\tapiSearch,\r\n} from '../_api'\r\n\r\nexport const getPostsWithTags = async (filters) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetPostsWithTags(filters)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getDiscover = async (filters) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetDiscover(filters)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getSearch = async (filters) => {\r\n\ttry {\r\n\t\tconst { data } = await apiSearch(filters)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getPostByFriendlyId = async (id) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetPost(id)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const createPost = async (body) => {\r\n\ttry {\r\n\t\tconsole.log(body)\r\n\t\tconst { data } = await apiCreatePost(body)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const deletePost = async (id) => {\r\n\ttry {\r\n\t\tconst { data } = await apiDeletePost(id)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const editPost = async (body, id) => {\r\n\ttry {\r\n\t\tconst { data } = await apiEditPost(body, id)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const likePost = async (id) => {\r\n\ttry {\r\n\t\tconst { data } = await apiLikePost(id)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const reportPost = async (id) => {\r\n\ttry {\r\n\t\tconst { data } = await apiReportPost(id)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const commentOnPost = async (id, comment) => {\r\n\ttry {\r\n\t\tconst { data } = await apiAddComment(id, { comment })\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const removeComment = async (commentId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiRemoveComment(commentId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { AiOutlineSearch } from 'react-icons/ai'\r\nimport { Range as _range, createSliderWithTooltip } from 'rc-slider'\r\nimport 'rc-slider/assets/index.css'\r\nimport { isMobile } from 'react-device-detect'\r\n\r\nconst Range = createSliderWithTooltip(_range)\r\n\r\nconst Filters = ({ filters, setFilters, setFilterState }) => {\r\n\treturn (\r\n\t\t<section className=\"filters\">\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={(e) => {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\tsetFilters(filters)\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label className=\"filters__sort\" htmlFor=\"by\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tname=\"by\"\r\n\t\t\t\t\t\t\taria-label=\"Sort by\"\r\n\t\t\t\t\t\t\tonChange={(e) => setFilters({ ...filters, sort: e.target.value })}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"rating\">rating</option>\r\n\t\t\t\t\t\t\t<option value=\"new\">new</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label className=\"filters__period\" htmlFor=\"sort\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tname=\"sort\"\r\n\t\t\t\t\t\t\taria-label=\"Sort with date filters\"\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tsetFilters({ ...filters, period: e.target.value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"alltime\">all time</option>\r\n\t\t\t\t\t\t\t<option value=\"year\">1 year</option>\r\n\t\t\t\t\t\t\t<option value=\"halfyear\">6 months</option>\r\n\t\t\t\t\t\t\t<option value=\"month\">1 month</option>\r\n\t\t\t\t\t\t\t<option value=\"week\">1 week</option>\r\n\t\t\t\t\t\t\t<option value=\"day\">today</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<p style={{ marginTop: '0.5rem' }}>Serves</p>\r\n\t\t\t\t\t<Range\r\n\t\t\t\t\t\tstyle={{ margin: '0.4rem 0 1rem 0' }}\r\n\t\t\t\t\t\tvalue={filters.serves}\r\n\t\t\t\t\t\tonChange={(value) => setFilterState({ ...filters, serves: value })}\r\n\t\t\t\t\t\tonAfterChange={(v) => setFilters({ ...filters, serves: v })}\r\n\t\t\t\t\t\tmax={12}\r\n\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\tdefaultValue={[1, 12]}\r\n\t\t\t\t\t\ttipFormatter={(value) => `${value}`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<p style={{ marginTop: '0.5rem' }}>\r\n\t\t\t\t\t\tCook Time<span>(mins)</span>\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t{!isMobile && (\r\n\t\t\t\t\t\t<Range\r\n\t\t\t\t\t\t\tstyle={{ margin: '0.4rem 0 1rem 0' }}\r\n\t\t\t\t\t\t\tvalue={filters.cookTime}\r\n\t\t\t\t\t\t\tonChange={(value) =>\r\n\t\t\t\t\t\t\t\tsetFilterState({ ...filters, cookTime: value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonAfterChange={(value) =>\r\n\t\t\t\t\t\t\t\tsetFilters({ ...filters, cookTime: value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmax={240}\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tdefaultValue={[0, 240]}\r\n\t\t\t\t\t\t\ttipFormatter={(value) => `${value}min`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{isMobile && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tplaceholder=\"Min.\"\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tname=\"cookTimeLow\"\r\n\t\t\t\t\t\t\t\tid=\"cookTimeLow\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--num\"\r\n\t\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\t\tmax={240}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetFilterState({\r\n\t\t\t\t\t\t\t\t\t\t...filters,\r\n\t\t\t\t\t\t\t\t\t\tcookTime: [e.target.value, filters.cookTime[1]],\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Max.\"\r\n\t\t\t\t\t\t\t\tname=\"cookTimeHigh\"\r\n\t\t\t\t\t\t\t\tid=\"cookTimeHigh\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--num\"\r\n\t\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\t\tmax={240}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetFilterState({\r\n\t\t\t\t\t\t\t\t\t\t...filters,\r\n\t\t\t\t\t\t\t\t\t\tcookTime: [filters.cookTime[0], e.target.value],\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<p style={{ marginTop: '0.5rem' }}>\r\n\t\t\t\t\t\tPrep. Time <span>(mins)</span>\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t{!isMobile && (\r\n\t\t\t\t\t\t<Range\r\n\t\t\t\t\t\t\tstyle={{ margin: '0.4rem 0 1rem 0' }}\r\n\t\t\t\t\t\t\tvalue={filters.prepTime}\r\n\t\t\t\t\t\t\tonChange={(value) =>\r\n\t\t\t\t\t\t\t\tsetFilterState({ ...filters, prepTime: value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonAfterChange={(value) =>\r\n\t\t\t\t\t\t\t\tsetFilters({ ...filters, prepTime: value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmax={120}\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tdefaultValue={[0, 120]}\r\n\t\t\t\t\t\t\ttipFormatter={(value) => `${value}min`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{isMobile && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tplaceholder=\"Min.\"\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tname=\"prepTimeLow\"\r\n\t\t\t\t\t\t\t\tid=\"prepTimeLow\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--num\"\r\n\t\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\t\tmax={240}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetFilterState({\r\n\t\t\t\t\t\t\t\t\t\t...filters,\r\n\t\t\t\t\t\t\t\t\t\tprepTime: [e.target.value, filters.prepTime[1]],\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Max.\"\r\n\t\t\t\t\t\t\t\tname=\"prepTimeHigh\"\r\n\t\t\t\t\t\t\t\tid=\"prepTimeHigh\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--num\"\r\n\t\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\t\tmax={240}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetFilterState({\r\n\t\t\t\t\t\t\t\t\t\t...filters,\r\n\t\t\t\t\t\t\t\t\t\tprepTime: [filters.prepTime[0], e.target.value],\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label htmlFor=\"search\" className=\"discover__header__search\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"search\"\r\n\t\t\t\t\t\tid=\"search\"\r\n\t\t\t\t\t\tplaceholder=\"Search...\"\r\n\t\t\t\t\t\taria-label=\"Search query\"\r\n\t\t\t\t\t\tvalue={filters.query}\r\n\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\tsetFilterState({ ...filters, query: e.target.value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label htmlFor=\"search\" aria-label=\"Search...\">\r\n\t\t\t\t\t\t<AiOutlineSearch />\r\n\t\t\t\t\t\t<input type=\"submit\" aria-label=\"Search...\" value=\"\" />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</label>\r\n\t\t\t</form>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default Filters\r\n","import DOMPurify from 'dompurify'\r\n\r\nexport const bufferToBase64 = (buffer) => {\r\n\tvar binary = ''\r\n\tvar bytes = new Uint8Array(buffer)\r\n\tvar len = bytes.byteLength\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tbinary += String.fromCharCode(bytes[i])\r\n\t}\r\n\treturn window.btoa(binary)\r\n}\r\n\r\n/**\r\n *\r\n * @param {Object} filters\r\n * @returns {String}\r\n */\r\nexport const formatFilters = (filters) =>\r\n\tfilters.tags?.length >= 1\r\n\t\t? `?include=${filters.tags?.join(',')}&sort=${filters.sort}&period=${\r\n\t\t\t\tfilters.period\r\n\t\t  }&serves=${filters.serves[0]}-${filters.serves[1]}&prepTime=${\r\n\t\t\t\tfilters.prepTime[0] || 0\r\n\t\t  }-${filters.prepTime[1] || 120}&cookTime=${filters.cookTime[0] || 0}-${\r\n\t\t\t\tfilters.cookTime[1] || 240\r\n\t\t  }&page=${filters.page}&perPage=${filters.perPage}${\r\n\t\t\t\tfilters?.query !== '' ? `&terms=${filters?.query}` : ''\r\n\t\t  }`\r\n\t\t: `?sort=${filters.sort}&period=${filters.period}&serves=${\r\n\t\t\t\tfilters.serves[0]\r\n\t\t  }-${filters.serves[1]}&prepTime=${filters.prepTime[0] || 0}-${\r\n\t\t\t\tfilters.prepTime[1] || 120\r\n\t\t  }&cookTime=${filters.cookTime[0] || 0}-${\r\n\t\t\t\tfilters.cookTime[1] || 240\r\n\t\t  }&page=${filters.page}&perPage=${filters.perPage}${\r\n\t\t\t\tfilters?.query !== '' ? `&terms=${filters?.query}` : ''\r\n\t\t  }`\r\n\r\nconst imagePattern = /(![\\[][\\w\\d-_]{0,})[\\]]/g\r\n\r\n/**\r\n * Loop through ![img]'s and get corresponding base64,\r\n * \tinjecting this into brackets to render in markdown\r\n * @param {String} content\r\n */\r\nexport const placeImageInContent = (content, images) => {\r\n\tconst result = content.matchAll(imagePattern)\r\n\tlet contentString = content\r\n\r\n\tconst imgNames = images.map((img) => img.name)\r\n\r\n\tlet value\r\n\t// loop through all ![...] occurences\r\n\twhile (!(value = result.next()).done) {\r\n\t\tconst imgName = value.value[0].substring(2, value.value[0].length - 1)\r\n\t\tif (!imgNames.includes(imgName)) {\r\n\t\t\tcontentString = contentString.replace(value.value[0], '')\r\n\t\t\tcontinue\r\n\t\t}\r\n\r\n\t\t// find the image\r\n\t\tconst img = images.find((image, idx) => image.name === imgName)\r\n\r\n\t\t// replace the string occurence with ![...](image base64 string)\r\n\t\tcontentString = contentString.replace(\r\n\t\t\tvalue.value[0],\r\n\t\t\t`\\n![${imgName}](${img.base64})`\r\n\t\t)\r\n\t}\r\n\r\n\t// sanitize the content string to avoid any malicious tags e.g. <script>\r\n\tcontentString = DOMPurify.sanitize(contentString)\r\n\r\n\treturn contentString\r\n}\r\n\r\nexport const formatLargeNumber = (num) => {\r\n\tif (num > 1_000_000) return `${parseFloat(Number(num / 1000000).toFixed(1))}M`\r\n\telse if (num > 100_000) return `${parseFloat(Number(num / 1000).toFixed(1))}K`\r\n\telse if (num > 10_000) return `${parseFloat(Number(num / 1000).toFixed(1))}K`\r\n\telse if (num > 1_000) return `${parseFloat(Number(num / 1000).toFixed(1))}K`\r\n\telse return `${num}`\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { CgBowl } from 'react-icons/cg'\r\nimport { BsHeartFill } from 'react-icons/bs'\r\nimport { BiTimeFive } from 'react-icons/bi'\r\nimport { GiForkKnifeSpoon } from 'react-icons/gi'\r\nimport { formatLargeNumber } from '../../util/util'\r\n\r\nconst Item = ({ object: recipe, delay, isOnProfile = false }) => {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"recipe\"\r\n\t\t\tdata-aos=\"zoom-in\"\r\n\t\t\tdata-aos-delay={delay * 100}\r\n\t\t\tdata-aos-once=\"true\"\r\n\t\t\tdata-aos-anchor-placement=\"top-bottom\"\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={\r\n\t\t\t\t\trecipe?.images[0]?.base64\r\n\t\t\t\t\t\t? 'recipe__bg'\r\n\t\t\t\t\t\t: 'recipe__bg recipe__bg--nobg'\r\n\t\t\t\t}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tbackgroundImage: `url(\"${\r\n\t\t\t\t\t\trecipe?.images[0]?.base64\r\n\t\t\t\t\t\t\t? recipe?.images[0]?.base64\r\n\t\t\t\t\t\t\t: './images/default-recipe.png'\r\n\t\t\t\t\t}\")`,\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"recipe__bg__overlay\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<CgBowl />\r\n\t\t\t\t\t\t\t{recipe?.serves}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<BiTimeFive />\r\n\t\t\t\t\t\t\t{`${recipe?.cookTime}m`}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<GiForkKnifeSpoon />\r\n\t\t\t\t\t\t\t{`${recipe?.prepTime}m`}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{recipe.user && (\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\t<Link to={`/recipe/${recipe.userFriendlyId}`}>\r\n\t\t\t\t\t\t\t\t{recipe.title}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<BsHeartFill /> {formatLargeNumber(recipe?.likes?.length)}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{!isOnProfile && (\r\n\t\t\t\t\t\t<div className=\"avatar\">\r\n\t\t\t\t\t\t\t<Link to={`profiles/${recipe?.user?._id}`}>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\t\trecipe.user.imageUrl\r\n\t\t\t\t\t\t\t\t\t\t\t? recipe.user.imageUrl\r\n\t\t\t\t\t\t\t\t\t\t\t: '/images/default-avatar.png'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\talt={`${recipe.user.username}'s avatar'`}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</header>\r\n\t\t\t)}\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={\r\n\t\t\t\t\trecipe?.images[0]?.base64\r\n\t\t\t\t\t\t? 'recipe__preview'\r\n\t\t\t\t\t\t: 'recipe__preview recipe__preview--nobg'\r\n\t\t\t\t}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tbackgroundImage: `url(${\r\n\t\t\t\t\t\trecipe?.images[0]?.base64\r\n\t\t\t\t\t\t\t? recipe?.images[0]?.base64\r\n\t\t\t\t\t\t\t: './images/default-recipe.png'\r\n\t\t\t\t\t})`,\r\n\t\t\t\t}}\r\n\t\t\t></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Item\r\n","import React from 'react'\r\nimport { useHistory } from 'react-router'\r\n\r\nconst Pages = ({ setFilters, filters }) => {\r\n\tconst history = useHistory()\r\n\r\n\tlet page_arr = []\r\n\tfor (\r\n\t\tlet i = filters.page - 2 < 1 ? 1 : filters.page - 2;\r\n\t\ti < filters.page + 3 && i <= filters.pageCount;\r\n\t\ti++\r\n\t) {\r\n\t\tpage_arr.push(i)\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{page_arr.map((page, idx) =>\r\n\t\t\t\tpage === filters.page ? (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{ cursor: 'default' }}\r\n\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\taria-label={`Showing results for current page`}\r\n\t\t\t\t\t\tclassName=\"btn btn--no-bg btn--page btn--page-selected\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{page}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\taria-label={`Show results for page ${page}`}\r\n\t\t\t\t\t\tclassName=\"btn btn--no-bg btn--page\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetFilters({ ...filters, page: page })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{page}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Pages\r\n","import React, { useState } from 'react'\r\n\r\nconst Tags = ({ filters, setFilters, onClickTag }) => {\r\n\tconst [tag, setTag] = useState('')\r\n\r\n\treturn (\r\n\t\t<div className=\"discover__header__tags\">\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={(e) => {\r\n\t\t\t\t\te.preventDefault()\r\n\r\n\t\t\t\t\tif (tag && !filters?.tags?.includes(tag)) {\r\n\t\t\t\t\t\tsetFilters({ ...filters, tags: [...filters?.tags, tag] })\r\n\t\t\t\t\t\tsetTag('')\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<input\r\n\t\t\t\t\tvalue={tag}\r\n\t\t\t\t\tonChange={(e) => setTag(e.target.value)}\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tclassName=\"custom_input custom_input--border\"\r\n\t\t\t\t\tplaceholder=\"Add tags...\"\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tvalue=\"+\"\r\n\t\t\t\t\tclassName=\"btn btn--solid btn--solid-blue\"\r\n\t\t\t\t/>\r\n\t\t\t</form>\r\n\t\t\t<div>\r\n\t\t\t\t{filters?.tags?.map((tag, idx) => (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn btn--no-bg btn--tag\"\r\n\t\t\t\t\t\tonClick={() => onClickTag(tag)}\r\n\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{tag}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Tags\r\n","import React from 'react'\r\n\r\nconst Spinner = ({ showing }) => {\r\n\treturn showing ? (\r\n\t\t<div className=\"spinner\">\r\n\t\t\t<svg\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\txmlnsXlink=\"http://www.w3.org/1999/xlink\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tmargin: 'auto',\r\n\t\t\t\t\tbackground: 'none',\r\n\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\tshapeRendering: 'auto',\r\n\t\t\t\t\twidth: '5rem',\r\n\t\t\t\t\theight: '5rem',\r\n\t\t\t\t}}\r\n\t\t\t\tviewBox=\"0 0 100 100\"\r\n\t\t\t\tpreserveAspectRatio=\"xMidYMid\"\r\n\t\t\t>\r\n\t\t\t\t<g transform=\"translate(50 50)\">\r\n\t\t\t\t\t<g transform=\"scale(0.7)\">\r\n\t\t\t\t\t\t<g transform=\"translate(-50 -50)\">\r\n\t\t\t\t\t\t\t<g>\r\n\t\t\t\t\t\t\t\t<animateTransform\r\n\t\t\t\t\t\t\t\t\tattributeName=\"transform\"\r\n\t\t\t\t\t\t\t\t\ttype=\"rotate\"\r\n\t\t\t\t\t\t\t\t\trepeatCount=\"indefinite\"\r\n\t\t\t\t\t\t\t\t\tvalues=\"0 50 50;360 50 50\"\r\n\t\t\t\t\t\t\t\t\tkeyTimes=\"0;1\"\r\n\t\t\t\t\t\t\t\t\tdur=\"0.7575757575757576s\"\r\n\t\t\t\t\t\t\t\t></animateTransform>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfillOpacity=\"0.8\"\r\n\t\t\t\t\t\t\t\t\tfill=\"#ea3f34\"\r\n\t\t\t\t\t\t\t\t\td=\"M50 50L50 0A50 50 0 0 1 100 50Z\"\r\n\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t<g>\r\n\t\t\t\t\t\t\t\t<animateTransform\r\n\t\t\t\t\t\t\t\t\tattributeName=\"transform\"\r\n\t\t\t\t\t\t\t\t\ttype=\"rotate\"\r\n\t\t\t\t\t\t\t\t\trepeatCount=\"indefinite\"\r\n\t\t\t\t\t\t\t\t\tvalues=\"0 50 50;360 50 50\"\r\n\t\t\t\t\t\t\t\t\tkeyTimes=\"0;1\"\r\n\t\t\t\t\t\t\t\t\tdur=\"1.0101010101010102s\"\r\n\t\t\t\t\t\t\t\t></animateTransform>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfillOpacity=\"0.8\"\r\n\t\t\t\t\t\t\t\t\tfill=\"#f2982c\"\r\n\t\t\t\t\t\t\t\t\td=\"M50 50L50 0A50 50 0 0 1 100 50Z\"\r\n\t\t\t\t\t\t\t\t\ttransform=\"rotate(90 50 50)\"\r\n\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t<g>\r\n\t\t\t\t\t\t\t\t<animateTransform\r\n\t\t\t\t\t\t\t\t\tattributeName=\"transform\"\r\n\t\t\t\t\t\t\t\t\ttype=\"rotate\"\r\n\t\t\t\t\t\t\t\t\trepeatCount=\"indefinite\"\r\n\t\t\t\t\t\t\t\t\tvalues=\"0 50 50;360 50 50\"\r\n\t\t\t\t\t\t\t\t\tkeyTimes=\"0;1\"\r\n\t\t\t\t\t\t\t\t\tdur=\"1.5151515151515151s\"\r\n\t\t\t\t\t\t\t\t></animateTransform>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfillOpacity=\"0.8\"\r\n\t\t\t\t\t\t\t\t\tfill=\"#52a360\"\r\n\t\t\t\t\t\t\t\t\td=\"M50 50L50 0A50 50 0 0 1 100 50Z\"\r\n\t\t\t\t\t\t\t\t\ttransform=\"rotate(180 50 50)\"\r\n\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t<g>\r\n\t\t\t\t\t\t\t\t<animateTransform\r\n\t\t\t\t\t\t\t\t\tattributeName=\"transform\"\r\n\t\t\t\t\t\t\t\t\ttype=\"rotate\"\r\n\t\t\t\t\t\t\t\t\trepeatCount=\"indefinite\"\r\n\t\t\t\t\t\t\t\t\tvalues=\"0 50 50;360 50 50\"\r\n\t\t\t\t\t\t\t\t\tkeyTimes=\"0;1\"\r\n\t\t\t\t\t\t\t\t\tdur=\"3.0303030303030303s\"\r\n\t\t\t\t\t\t\t\t></animateTransform>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfillOpacity=\"0.8\"\r\n\t\t\t\t\t\t\t\t\tfill=\"#674794\"\r\n\t\t\t\t\t\t\t\t\td=\"M50 50L50 0A50 50 0 0 1 100 50Z\"\r\n\t\t\t\t\t\t\t\t\ttransform=\"rotate(270 50 50)\"\r\n\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t</g>\r\n\t\t\t\t\t</g>\r\n\t\t\t\t</g>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t) : (\r\n\t\t<></>\r\n\t)\r\n}\r\n\r\nexport default Spinner\r\n","import { motion } from 'framer-motion'\r\nimport React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useLocation } from 'react-router'\r\nimport { getDiscover, getPostsWithTags } from '../../_actions/post'\r\nimport Filters from '../../components/Filters'\r\nimport { formatFilters } from '../../util/util'\r\nimport Item from '../../components/RecipeCard/Item'\r\nimport Pages from './Pages'\r\nimport Tags from '../../components/Tags'\r\n\r\nimport Spinner from '../../components/Spinner'\r\n\r\nconst Discover = () => {\r\n\tconst dispatch = useDispatch()\r\n\tconst location = useLocation()\r\n\tconst history = useHistory()\r\n\r\n\tconst [filters, setFilters] = useState({\r\n\t\tsort: 'rating',\r\n\t\tperiod: 'alltime',\r\n\t\tserves: [1, 12],\r\n\t\tprepTime: [0, 120],\r\n\t\tcookTime: [0, 240],\r\n\t\ttags: [],\r\n\t\tpage: 1,\r\n\t\tperPage: 25,\r\n\t\tpageCount: 1,\r\n\t\tquery: '',\r\n\t})\r\n\r\n\tconst [loading, setLoading] = useState(false)\r\n\r\n\tconst posts = useSelector((state) => state.post.all)\r\n\r\n\t// on location change\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\r\n\t\t// get tags from URL\r\n\t\tlet tags = []\r\n\r\n\t\ttry {\r\n\t\t\ttags = location.search.replace('?tags=', '')\r\n\r\n\t\t\tif (tags?.length !== 0) {\r\n\t\t\t\ttags = tags.split(',')\r\n\t\t\t\tfilters.tags = tags\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\t// error - url params are not correct\r\n\t\t}\r\n\r\n\t\t// get with tags\r\n\t\tif (filters?.tags?.length >= 1) {\r\n\t\t\tgetPostsWithTags(formatFilters(filters))\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (isMounted)\r\n\t\t\t\t\t\tsetFilters({ ...filters, pageCount: Number(res?.pages || 1) })\r\n\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: 'POST/SET_ALL',\r\n\t\t\t\t\t\tpayload: res.result,\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {})\r\n\t\t\t// get discover page\r\n\t\t} else {\r\n\t\t\tgetDiscover(formatFilters(filters, filters.query)).then((res) => {\r\n\t\t\t\tif (isMounted)\r\n\t\t\t\t\tsetFilters({ ...filters, pageCount: Number(res?.pages || 1) })\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: 'POST/SET_ALL',\r\n\t\t\t\t\tpayload: res?.result || null,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [location])\r\n\r\n\tconst handleSetFilters = (value) => {\r\n\t\tsetFilters(value)\r\n\r\n\t\tif (value?.tags?.length !== 0) {\r\n\t\t\t// tags\r\n\t\t\tgetPostsWithTags(formatFilters(value, value.query)).then((res) => {\r\n\t\t\t\tsetFilters({ ...value, pageCount: Number(res.pages) || 0 })\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: 'POST/SET_ALL',\r\n\t\t\t\t\tpayload: res.result,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\t// discover\r\n\r\n\t\t\tgetDiscover(formatFilters(value, value.query)).then((res) => {\r\n\t\t\t\tsetFilters({ ...value, pageCount: Number(res.pages) || 0 })\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: 'POST/SET_ALL',\r\n\t\t\t\t\tpayload: res.result,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<motion.section\r\n\t\t\tclassName=\"discover\"\r\n\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\texit={{ opacity: 0 }}\r\n\t\t>\r\n\t\t\t<Spinner showing={loading} />\r\n\r\n\t\t\t<header className=\"discover__header\">\r\n\t\t\t\t<h1 data-aos=\"zoom-out\">\r\n\t\t\t\t\t<span>discover</span> a taste\r\n\t\t\t\t</h1>\r\n\t\t\t\t<Filters\r\n\t\t\t\t\tfilters={filters}\r\n\t\t\t\t\tsetFilters={(newVal) => {\r\n\t\t\t\t\t\tconsole.log(newVal)\r\n\t\t\t\t\t\thandleSetFilters(newVal)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsetFilterState={(newVal) => {\r\n\t\t\t\t\t\tsetFilters(newVal)\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<Tags\r\n\t\t\t\t\tfilters={filters}\r\n\t\t\t\t\tsetFilters={(val) => {\r\n\t\t\t\t\t\tsetFilters(val)\r\n\r\n\t\t\t\t\t\thistory.push(`/discover?tags=${val?.tags?.join(',')}`)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClickTag={(_tag) => {\r\n\t\t\t\t\t\tconst tags = filters?.tags?.filter((tag) => tag !== _tag)\r\n\r\n\t\t\t\t\t\tsetFilters({ ...filters, tags })\r\n\r\n\t\t\t\t\t\tif (tags?.length === 0) {\r\n\t\t\t\t\t\t\thistory.push('/discover')\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\thistory.push(`/discover?tags=${tags.join(',')}`)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</header>\r\n\t\t\t<section className=\"discover__grid\">\r\n\t\t\t\t{posts &&\r\n\t\t\t\t\tposts.map((post, idx) => (\r\n\t\t\t\t\t\t<Item delay={idx} key={idx} object={post} />\r\n\t\t\t\t\t))}\r\n\t\t\t</section>\r\n\t\t\t<footer className=\"discover__pagination\">\r\n\t\t\t\t<div className=\"discover__pagination__pages\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Pages setFilters={handleSetFilters} filters={filters} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p>{filters.pageCount} pages total</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"discover__pagination__perPage\">\r\n\t\t\t\t\t<label className=\"filters__perPage\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tname=\"perPage\"\r\n\t\t\t\t\t\t\taria-label=\"Amount of items per page\"\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\thandleSetFilters({\r\n\t\t\t\t\t\t\t\t\t...filters,\r\n\t\t\t\t\t\t\t\t\tperPage: Number(e.target.value),\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"25\">25</option>\r\n\t\t\t\t\t\t\t<option value=\"50\">50</option>\r\n\t\t\t\t\t\t\t<option value=\"100\">100</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t<p>Items per page</p>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t</footer>\r\n\t\t</motion.section>\r\n\t)\r\n}\r\n\r\nexport default Discover\r\n","import React from 'react'\r\nimport GoogleLogin from 'react-google-login'\r\n\r\nconst ThirdPartyAuth = ({ onSuccessFacebook, onSuccessGoogle }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<GoogleLogin\r\n\t\t\t\tclientId=\"544966638845-agilmeq086cka6f2cpi30d4559g9u4a4.apps.googleusercontent.com\"\r\n\t\t\t\tonSuccess={onSuccessGoogle}\r\n\t\t\t\tclassName=\"btn btn--no-border btn--no-bg\"\r\n\t\t\t\taria-label=\"Login with a Google account\"\r\n\t\t\t></GoogleLogin>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ThirdPartyAuth\r\n","import { apiSignIn, apiSignUp, apiGoogleSignIn } from '../_api'\r\n\r\nexport const signIn = async (body) => {\r\n\ttry {\r\n\t\tconst { data } = await apiSignIn(body)\r\n\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const signUp = async (body) => {\r\n\ttry {\r\n\t\tconst { data } = await apiSignUp(body)\r\n\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const googleSignin = async (body) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGoogleSignIn(body)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { AiOutlineEye, AiOutlineEyeInvisible } from 'react-icons/ai'\r\nimport { useState } from 'react'\r\nimport ThirdPartyAuth from './ThirdPartyAuth'\r\nimport { googleSignin } from '../../_actions/auth'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nconst Login = ({ handleSignIn }) => {\r\n\tconst dispatch = useDispatch()\r\n\tconst history = useHistory()\r\n\r\n\tconst [showPass, setShowPass] = useState(false)\r\n\tconst [formData, setFormData] = useState({ email: '', password: '' })\r\n\treturn (\r\n\t\t<section className=\"auth__login\" data-aos=\"fade-in\" data-aos-delay=\"150\">\r\n\t\t\t<div className=\"auth__container\">\r\n\t\t\t\t<form\r\n\t\t\t\t\taction=\"\"\r\n\t\t\t\t\tonSubmit={(e) => handleSignIn(e, formData)}\r\n\t\t\t\t\tclassName=\"auth__form\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\t\tvalue={formData.email}\r\n\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\tsetFormData({ ...formData, email: e.target.value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<label htmlFor=\"password\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\ttype={showPass ? 'text' : 'password'}\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\tvalue={formData.password}\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tsetFormData({ ...formData, password: e.target.value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div onClick={() => setShowPass(!showPass)}>\r\n\t\t\t\t\t\t\t{showPass ? <AiOutlineEyeInvisible /> : <AiOutlineEye />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t<input type=\"submit\" className=\"btn btn--pill\" value=\"Login\" />\r\n\t\t\t\t</form>\r\n\r\n\t\t\t\t<ThirdPartyAuth\r\n\t\t\t\t\tonSuccessGoogle={(e) => {\r\n\t\t\t\t\t\tconst { tokenId, profileObj } = e\r\n\r\n\t\t\t\t\t\tconsole.log(e)\r\n\r\n\t\t\t\t\t\tgoogleSignin({\r\n\t\t\t\t\t\t\ttokenId,\r\n\t\t\t\t\t\t\timageUrl: profileObj.imageUrl,\r\n\t\t\t\t\t\t\tgoogleId: profileObj.googleId,\r\n\t\t\t\t\t\t\temail: profileObj.email,\r\n\t\t\t\t\t\t\tusername: profileObj.name,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\t\ttype: 'AUTH/SIGN_IN',\r\n\t\t\t\t\t\t\t\t\tpayload: { ...res },\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\thistory.push('/discover')\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Link to=\"/forgot-password\" aria-label=\"Forgot password link\">\r\n\t\t\t\t\tForgot your password?\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to=\"/signup\" aria-label=\"Switch to signup form\">\r\n\t\t\t\t\tDon't have an account? Sign up\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default Login\r\n","import React from 'react'\r\nimport { useState } from 'react'\r\nimport {\r\n\tAiFillFacebook,\r\n\tAiFillGoogleCircle,\r\n\tAiOutlineEye,\r\n\tAiOutlineEyeInvisible,\r\n} from 'react-icons/ai'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { googleSignin } from '../../_actions/auth'\r\nimport ThirdPartyAuth from './ThirdPartyAuth'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nconst Signup = ({ handleSignUp }) => {\r\n\tconst dispatch = useDispatch()\r\n\tconst history = useHistory()\r\n\r\n\tconst [showPass, setShowPass] = useState(false)\r\n\tconst [formData, setFormData] = useState({\r\n\t\tusername: '',\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t\trepeatPassword: '',\r\n\t})\r\n\r\n\treturn (\r\n\t\t<section className=\"auth__signup\" data-aos=\"fade-in\" data-aos-delay=\"150\">\r\n\t\t\t<div className=\"auth__container\">\r\n\t\t\t\t<form\r\n\t\t\t\t\taction=\"\"\r\n\t\t\t\t\tonSubmit={(e) => handleSignUp(e, formData)}\r\n\t\t\t\t\tclassName=\"auth__form\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\tvalue={formData.username}\r\n\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\tsetFormData({ ...formData, username: e.target.value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\t\tvalue={formData.email}\r\n\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\tsetFormData({ ...formData, email: e.target.value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<label htmlFor=\"password\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\ttype={showPass ? 'text' : 'password'}\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\tvalue={formData.password}\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tsetFormData({ ...formData, password: e.target.value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div onClick={() => setShowPass(!showPass)}>\r\n\t\t\t\t\t\t\t{showPass ? <AiOutlineEyeInvisible /> : <AiOutlineEye />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t<label htmlFor=\"repeatPassword\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\ttype={showPass ? 'text' : 'password'}\r\n\t\t\t\t\t\t\tname=\"repeatPassword\"\r\n\t\t\t\t\t\t\tid=\"repeatPassword\"\r\n\t\t\t\t\t\t\tplaceholder=\"Repeat Password\"\r\n\t\t\t\t\t\t\tvalue={formData.repeatPassword}\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tsetFormData({ ...formData, repeatPassword: e.target.value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div onClick={() => setShowPass(!showPass)}>\r\n\t\t\t\t\t\t\t{showPass ? <AiOutlineEyeInvisible /> : <AiOutlineEye />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t<input type=\"submit\" className=\"btn btn--pill\" value=\"Sign up\" />\r\n\t\t\t\t</form>\r\n\r\n\t\t\t\t<p>Or...</p>\r\n\r\n\t\t\t\t<ThirdPartyAuth\r\n\t\t\t\t\tonSuccessGoogle={(e) => {\r\n\t\t\t\t\t\tconst { tokenId, profileObj } = e\r\n\r\n\t\t\t\t\t\tconsole.log(e)\r\n\r\n\t\t\t\t\t\tgoogleSignin({\r\n\t\t\t\t\t\t\ttokenId,\r\n\t\t\t\t\t\t\timageUrl: profileObj.imageUrl,\r\n\t\t\t\t\t\t\tgoogleId: profileObj.googleId,\r\n\t\t\t\t\t\t\temail: profileObj.email,\r\n\t\t\t\t\t\t\tusername: profileObj.name,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\t\ttype: 'AUTH/SIGN_IN',\r\n\t\t\t\t\t\t\t\t\tpayload: { ...res },\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\thistory.push('/discover')\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Link to=\"/login\" aria-label=\"Switch to login form\">\r\n\t\t\t\t\tAlready have an account? Login\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default Signup\r\n","/*\r\n  Logger element to show any error messages which the client needs to see\r\n*/\r\nimport React from 'react'\r\nimport { IoAlertCircleOutline } from 'react-icons/io5'\r\nimport { HiLightBulb } from 'react-icons/hi'\r\n\r\nconst TopMostLogger = ({ title, message, show }) => {\r\n\tconst className = show\r\n\t\t? (title.toLowerCase() === 'alert' &&\r\n\t\t\t\t'logger logger--showing logger--alert') ||\r\n\t\t  (title.toLowerCase() === 'error' &&\r\n\t\t\t\t'logger logger--showing logger--error')\r\n\t\t: 'logger'\r\n\r\n\treturn (\r\n\t\t<div className={className}>\r\n\t\t\t<header aria-label={title} className=\"logger__title\">\r\n\t\t\t\t{title.toLowerCase() === 'alert' && <HiLightBulb />}\r\n\t\t\t\t{title.toLowerCase() === 'error' && <IoAlertCircleOutline />}\r\n\t\t\t\t{title}\r\n\t\t\t</header>\r\n\t\t\t<summary className=\"logger__message\">{message}</summary>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default TopMostLogger\r\n","import { motion } from 'framer-motion'\r\nimport React, { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport Login from './Login'\r\nimport Signup from './Signup'\r\nimport TopMostLogger from '../../components/TopMostLogger'\r\nimport { signIn, signUp } from '../../_actions/auth'\r\n\r\nconst Auth = () => {\r\n\tconst history = useHistory()\r\n\tconst location = useLocation()\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst [title, setTitle] = useState('')\r\n\tconst [message, setMessage] = useState('')\r\n\tconst [showing, setShowing] = useState(false)\r\n\r\n\tconst showDialog = (title, message, duration = 2000) => {\r\n\t\tif (showing) return\r\n\r\n\t\tsetTitle(title)\r\n\t\tsetMessage(message)\r\n\t\tsetShowing(true)\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetShowing(false)\r\n\t\t}, duration)\r\n\t}\r\n\r\n\tconst handleSignUp = async (e, body) => {\r\n\t\te.preventDefault()\r\n\r\n\t\tif (\r\n\t\t\t!body?.email ||\r\n\t\t\t!body?.username ||\r\n\t\t\t!body?.password ||\r\n\t\t\t!body?.repeatPassword\r\n\t\t) {\r\n\t\t\tshowDialog('Error', 'Please fill in required details.')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet res\r\n\r\n\t\ttry {\r\n\t\t\tres = await signUp(body)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err)\r\n\t\t\tshowDialog('Error', err?.message)\r\n\t\t}\r\n\r\n\t\tif (res?.verificationSent) {\r\n\t\t\tshowDialog('Alert', `Verification email sent to ${res.user.email}`, 3500)\r\n\t\t}\r\n\r\n\t\t// Show an error if a there was one, otherwise dispatch\r\n\t\tif (!res?.error) dispatch({ payload: res, type: 'AUTH/SIGN_UP' })\r\n\t\telse showDialog('Error', res?.error)\r\n\t}\r\n\r\n\tconst handleSignIn = async (e, body) => {\r\n\t\ttry {\r\n\t\t\te.preventDefault()\r\n\r\n\t\t\tif (!body?.email || !body?.password) {\r\n\t\t\t\tshowDialog('Error', 'Please fill in the required details.')\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst res = await signIn(body)\r\n\r\n\t\t\tif (!res.error) {\r\n\t\t\t\tdispatch({ payload: res, type: 'AUTH/SIGN_IN' })\r\n\t\t\t\thistory.push('/discover')\r\n\t\t\t} else showDialog('Error', res.error)\r\n\t\t} catch (err) {}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<motion.section className=\"auth\">\r\n\t\t\t<div className=\"auth__wrapper\">\r\n\t\t\t\t<TopMostLogger title={title} message={message} show={showing} />\r\n\r\n\t\t\t\t{location.pathname === '/login' && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<h1 data-aos=\"zoom-out\">Login</h1>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t<Login handleSignIn={handleSignIn} />\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{location.pathname === '/signup' && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<h1 data-aos=\"zoom-out\">Sign up</h1>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t<Signup handleSignUp={handleSignUp} />\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</motion.section>\r\n\t)\r\n}\r\n\r\nexport default Auth\r\n","import {\r\n\tapiBlockUser,\r\n\tapiDeactivateUser,\r\n\tapiEditUser,\r\n\tapiFollowUser,\r\n\tapiGetFollowers,\r\n\tapiGetFollowing,\r\n\tapiGetPostsFromUser,\r\n\tapiGetUser,\r\n\tapiReactivateUser,\r\n\tapiUnblockUser,\r\n\tapiUnfollowUser,\r\n} from '../_api'\r\n\r\nexport const getUser = async (userId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetUser(userId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const editUser = async (userId, body) => {\r\n\ttry {\r\n\t\tconst { data } = await apiEditUser(body, userId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const followUser = async (targetId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiFollowUser(targetId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\nexport const unfollowUser = async (targetId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiUnfollowUser(targetId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const blockUser = async (targetId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiBlockUser(targetId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const unblockUser = async (targetId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiUnblockUser(targetId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getFollowers = async (userId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetFollowers(userId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getFollowing = async (userId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetFollowing(userId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getUserPosts = async (userId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetPostsFromUser(userId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const deactivateUser = async (userId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiDeactivateUser(userId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const reactivateUser = async (userId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiReactivateUser(userId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { IoMdClose } from 'react-icons/io'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst Modal = ({ modal, closeModal }) => {\r\n\treturn (\r\n\t\t<div className={modal.showing ? 'modal modal--active' : 'modal'}>\r\n\t\t\t<header className=\"modal__header\">\r\n\t\t\t\t<h1>{modal.title}</h1>\r\n\t\t\t\t<button className=\"btn btn--no-bg\" aria-label=\"Close\">\r\n\t\t\t\t\t<IoMdClose onClick={() => closeModal()} />\r\n\t\t\t\t</button>\r\n\t\t\t</header>\r\n\t\t\t<div className=\"modal__body\">\r\n\t\t\t\t{modal.children &&\r\n\t\t\t\t\tmodal.children.map((child, idx) => (\r\n\t\t\t\t\t\t<div className=\"modal__body__user\" key={idx}>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\tchild.imageUrl ? child.imageUrl : '/images/default-avatar.png'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\talt={`Picture of ${child.username}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Link to={`/profiles/${child._id}`}>{child.username}</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Modal\r\n","import React, { useEffect, useState } from 'react'\r\nimport { getUserPosts } from '../../_actions/user'\r\nimport Item from '../../components/RecipeCard/Item'\r\n\r\nconst ProfilePosts = ({ profile }) => {\r\n\tconst [posts, setPosts] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!profile?._id) return\r\n\r\n\t\tlet isMounted = true\r\n\r\n\t\tgetUserPosts(profile?._id)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (isMounted) setPosts([...res.result])\r\n\t\t\t})\r\n\t\t\t.catch((err) => {})\r\n\r\n\t\treturn () => (isMounted = false)\r\n\t}, [profile])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{posts.map((post, idx) => (\r\n\t\t\t\t<Item delay={idx} object={post} key={idx} isOnProfile={true} />\r\n\t\t\t))}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default ProfilePosts\r\n","import { motion } from 'framer-motion'\r\nimport React from 'react'\r\nimport { useEffect } from 'react'\r\nimport {\r\n\tAiOutlineLogout,\r\n\tAiOutlineMessage,\r\n\tAiOutlineUserAdd,\r\n\tAiOutlineUserDelete,\r\n} from 'react-icons/ai'\r\nimport { IoOptionsOutline } from 'react-icons/io5'\r\nimport { CgBlock, CgUnblock } from 'react-icons/cg'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport {\r\n\tblockUser,\r\n\tfollowUser,\r\n\tgetFollowers,\r\n\tgetFollowing,\r\n\tgetUser,\r\n\tunblockUser,\r\n\tunfollowUser,\r\n} from '../../_actions/user'\r\nimport Modal from './Modal'\r\nimport { useState } from 'react'\r\nimport { formatLargeNumber } from '../../util/util'\r\nimport ProfilePosts from './ProfilePosts'\r\n\r\nconst Profile = ({ id }) => {\r\n\t// get the profile via id on mount (useEffect)\r\n\tconst dispatch = useDispatch()\r\n\tconst history = useHistory()\r\n\r\n\tconst [modal, setModal] = useState({\r\n\t\tshowing: false,\r\n\t\ttitle: '',\r\n\t\tchildren: [],\r\n\t})\r\n\r\n\tconst profile = useSelector((state) => state.user.single) || null\r\n\r\n\tconst me = useSelector((state) => state.auth.user) || null\r\n\r\n\tuseEffect(() => {\r\n\t\tgetUser(id).then((res) => {\r\n\t\t\t// Skip if error\r\n\t\t\tif (res?.error) return\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: 'USER/SET_USER',\r\n\t\t\t\tpayload: res,\r\n\t\t\t})\r\n\r\n\t\t\tgetFollowers(id).then((response) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: 'USER/SET_USER_FOLLOWERS',\r\n\t\t\t\t\tpayload: response?.result,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\tgetFollowing(id).then((response) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: 'USER/SET_USER_FOLLOWING',\r\n\t\t\t\t\tpayload: response?.result,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t}, [])\r\n\r\n\tconst _followUser = async (_id) => {\r\n\t\tconst { user, target } = await followUser(_id)\r\n\r\n\t\tconsole.log(user)\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: 'AUTH/EDIT_STORED_USER',\r\n\t\t\tpayload: { user },\r\n\t\t})\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: 'USER/EDIT_USER',\r\n\t\t\tpayload: target,\r\n\t\t})\r\n\t}\r\n\tconst _unfollowUser = async (_id) => {\r\n\t\tconst { user, target } = await unfollowUser(_id)\r\n\r\n\t\tconsole.log(user)\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: 'AUTH/EDIT_STORED_USER',\r\n\t\t\tpayload: { user },\r\n\t\t})\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: 'USER/EDIT_USER',\r\n\t\t\tpayload: target,\r\n\t\t})\r\n\t}\r\n\r\n\tconst _blockUser = async (_id) => {\r\n\t\tconst { user } = me?.blockList.includes(profile?._id)\r\n\t\t\t? await unblockUser(_id)\r\n\t\t\t: await blockUser(_id)\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: 'AUTH/EDIT_STORED_USER',\r\n\t\t\tpayload: { user },\r\n\t\t})\r\n\t}\r\n\r\n\tconst showFollowers = () => {\r\n\t\tlet showing = false\r\n\r\n\t\tif (profile?._followers?.length === 0 || profile?.followers?.length === 0) {\r\n\t\t\tshowing = false\r\n\t\t} else {\r\n\t\t\tshowing = true\r\n\t\t}\r\n\r\n\t\tsetModal({\r\n\t\t\t...modal,\r\n\t\t\ttitle: 'Followers',\r\n\t\t\tshowing,\r\n\t\t\tchildren: profile?._followers,\r\n\t\t})\r\n\t}\r\n\r\n\tconst showFollowing = () => {\r\n\t\tlet showing = false\r\n\r\n\t\tif (profile?._following?.length === 0) {\r\n\t\t\tshowing = false\r\n\t\t} else {\r\n\t\t\tshowing = true\r\n\t\t}\r\n\r\n\t\tsetModal({\r\n\t\t\t...modal,\r\n\t\t\ttitle: 'Following',\r\n\t\t\tshowing,\r\n\t\t\tchildren: profile?._following,\r\n\t\t})\r\n\t}\r\n\r\n\tconst closeModal = () => {\r\n\t\tsetModal({ ...modal, showing: false })\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal closeModal={closeModal} modal={modal} />\r\n\r\n\t\t\t<motion.section\r\n\t\t\t\tclassName=\"profile\"\r\n\t\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\t\texit={{ opacity: 0 }}\r\n\t\t\t>\r\n\t\t\t\t{profile && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div className=\"profile__card\">\r\n\t\t\t\t\t\t\t<header className=\"profile__card__header\">\r\n\t\t\t\t\t\t\t\t<div className=\"profile__card__header__avatar\">\r\n\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\t\t\tprofile?.imageUrl\r\n\t\t\t\t\t\t\t\t\t\t\t\t? profile?.imageUrl\r\n\t\t\t\t\t\t\t\t\t\t\t\t: '/images/default-avatar.png'\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\talt={`Picture of ${profile?.username}`}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"profile__card__header__details\">\r\n\t\t\t\t\t\t\t\t\t<h1>{profile?.username}</h1>\r\n\t\t\t\t\t\t\t\t\t<span className=\"score\">{profile?.score} Score</span>\r\n\t\t\t\t\t\t\t\t\t<div className=\"profile__card__header__details__stats\">\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\taria-label={\r\n\t\t\t\t\t\t\t\t\t\t\t\tprofile?.followers?.length === 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? '0 followers'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: `View ${profile?.followers?.length} followers`\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => showFollowers()}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{formatLargeNumber(profile?.followers?.length)} Followers\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => showFollowing()}\r\n\t\t\t\t\t\t\t\t\t\t\taria-label={\r\n\t\t\t\t\t\t\t\t\t\t\t\tprofile?.following?.length === 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? '0 following'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: `View ${profile?.following?.length} following`\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{formatLargeNumber(profile?.following?.length)} Following\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</header>\r\n\r\n\t\t\t\t\t\t\t{me && me?._id !== id && (\r\n\t\t\t\t\t\t\t\t<section className=\"profile__card__actions\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn--pill\"\r\n\t\t\t\t\t\t\t\t\t\taria-label={\r\n\t\t\t\t\t\t\t\t\t\t\tprofile?.followers.includes(me?._id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t? 'Unfollow this user'\r\n\t\t\t\t\t\t\t\t\t\t\t\t: 'Follow this user'\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\tprofile?.followers.includes(me?._id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t? _unfollowUser(id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t: _followUser(id)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{profile?.followers.includes(me?._id) ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<AiOutlineUserDelete />\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<AiOutlineUserAdd />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t{profile?.followers.includes(me?._id)\r\n\t\t\t\t\t\t\t\t\t\t\t? 'Unfollow'\r\n\t\t\t\t\t\t\t\t\t\t\t: 'Follow'}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg btn--no-bg--red\"\r\n\t\t\t\t\t\t\t\t\t\taria-label={\r\n\t\t\t\t\t\t\t\t\t\t\tme?.blockList.includes(profile?._id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t? 'Unblock this user'\r\n\t\t\t\t\t\t\t\t\t\t\t\t: 'Block this user'\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => _blockUser(id)}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{me?.blockList.includes(profile?._id) ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<CgUnblock />\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<CgBlock />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t{me?.blockList.includes(profile?._id) ? 'Unblock' : 'Block'}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{me?._id === id && (\r\n\t\t\t\t\t\t\t\t<section className=\"profile__card__actions\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg btn--no-bg--red\"\r\n\t\t\t\t\t\t\t\t\t\taria-label=\"Logout\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch({ type: 'AUTH/LOG_OUT' })\r\n\t\t\t\t\t\t\t\t\t\t\thistory.push('/discover')\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<AiOutlineLogout />\r\n\t\t\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn--pill btn--small-margin\"\r\n\t\t\t\t\t\t\t\t\t\tto=\"/settings\"\r\n\t\t\t\t\t\t\t\t\t\taria-label=\"Message this user\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<IoOptionsOutline />\r\n\t\t\t\t\t\t\t\t\t\tSettings\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t<article className=\"profile__card__bio\" aria-label=\"Profile bio\">\r\n\t\t\t\t\t\t\t\t{profile?.bio}\r\n\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<section className=\"profile__activity\">\r\n\t\t\t\t\t\t\t<ProfilePosts profile={profile} />\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</motion.section>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Profile\r\n","import React from 'react'\r\nimport marked from 'marked'\r\n\r\nconst Markdown = ({ content, className }) => {\r\n\tlet text = marked.parse(content || '')\r\n\r\n\t/* \r\n    Since the title is reserved for h1, only use h2s and lower.\r\n      however if people have lots of nested headings (unlikely),\r\n      the structure may seem inaccurate\r\n    Ultimately accessibility is a more pressing concern\r\n  */\r\n\tfor (let i = 5; i > 0; i--) {\r\n\t\tconst regex = `<h${i}`\r\n\r\n\t\ttext = text.replace(new RegExp(regex, 'g'), `<h${i + 1}`)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={className} dangerouslySetInnerHTML={{ __html: text }}></div>\r\n\t)\r\n}\r\n\r\nexport default Markdown\r\n","import React from 'react'\r\nimport { MdDeleteForever, MdEdit } from 'react-icons/md'\r\nimport { BsHeart, BsHeartFill } from 'react-icons/bs'\r\n\r\nconst Button = ({ onClick, type }) => {\r\n\tif (!['delete', 'edit', 'like', 'liked', 'report'].includes(type))\r\n\t\tthrow new Error(`Invalid type \"${type}\" in Button.jsx`)\r\n\r\n\tlet cName = 'btn btn--round '\r\n\tlet ariaLabel = ''\r\n\r\n\tif (type === 'delete') {\r\n\t\tcName += 'btn--red'\r\n\t\tariaLabel = 'Delete post'\r\n\t} else if (type === 'edit') {\r\n\t\tcName += 'btn--blue'\r\n\t\tariaLabel = 'Edit post'\r\n\t} else if (type === 'like' || type === 'liked') {\r\n\t\tif (type === 'liked') {\r\n\t\t\tcName += 'btn--green btn--heart btn--heart-liked'\r\n\t\t\tariaLabel = 'Unlike post'\r\n\t\t} else {\r\n\t\t\tcName += 'btn--green btn--heart'\r\n\t\t\tariaLabel = 'Like post'\r\n\t\t}\r\n\t} else if (type === 'report') {\r\n\t\tcName += 'btn--report btn--red'\r\n\t\tariaLabel = 'Report post'\r\n\t}\r\n\r\n\treturn (\r\n\t\t<button\r\n\t\t\tonClick={onClick}\r\n\t\t\tclassName={cName}\r\n\t\t\taria-label={ariaLabel}\r\n\t\t\talt={ariaLabel}\r\n\t\t>\r\n\t\t\t{type === 'delete' && <MdDeleteForever />}\r\n\t\t\t{type === 'edit' && <MdEdit />}\r\n\t\t\t{type === 'liked' && <BsHeartFill />}\r\n\t\t\t{type === 'like' && <BsHeart />}\r\n\t\t\t{type === 'report' && <></>}\r\n\t\t</button>\r\n\t)\r\n}\r\n\r\nexport default Button\r\n","import React from 'react'\r\nimport { MdDeleteForever } from 'react-icons/md'\r\nimport { useDispatch } from 'react-redux'\r\nimport { removeComment } from '../../_actions/post'\r\n\r\nconst Comment = ({ comment, userId }) => {\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst _removeComment = async () => {\r\n\t\tconst result = await removeComment(comment?._id)\r\n\r\n\t\tif (result.result) {\r\n\t\t\tdispatch({ type: 'POST/COMMENT_SINGLE/REMOVE', payload: result.result })\r\n\t\t} else if (result.error) {\r\n\t\t\tconsole.log(result.error)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"comments__comment\">\r\n\t\t\t{userId === comment?.user?._id && (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn--red btn--round\"\r\n\t\t\t\t\taria-label=\"Remove your comment\"\r\n\t\t\t\t\tonClick={_removeComment}\r\n\t\t\t\t>\r\n\t\t\t\t\t<MdDeleteForever />\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t\t<header>\r\n\t\t\t\t<img src={comment?.user?.imageUrl} />\r\n\t\t\t\t<p>{comment?.user?.username}</p>\r\n\t\t\t</header>\r\n\t\t\t<p\r\n\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t__html: comment?.message?.replace(/\\n/g, '<br>'),\r\n\t\t\t\t}}\r\n\t\t\t></p>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Comment\r\n","import React, { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { commentOnPost } from '../../_actions/post'\r\nimport Comment from './Comment'\r\n\r\nconst Comments = ({ comments, postId, user }) => {\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst [comment, setComment] = useState('')\r\n\r\n\tconst submitComment = async () => {\r\n\t\tconst result = await commentOnPost(postId, comment)\r\n\t\tif (result.result) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: 'POST/COMMENT_SINGLE',\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\t...result.result,\r\n\t\t\t\t\tuser: {\r\n\t\t\t\t\t\timageUrl: user.imageUrl,\r\n\t\t\t\t\t\tscore: user.score,\r\n\t\t\t\t\t\tusername: user.username,\r\n\t\t\t\t\t\t_id: user._id,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\tsetComment('')\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"comments\">\r\n\t\t\t{user?._id && (\r\n\t\t\t\t<div className=\"comments__field\">\r\n\t\t\t\t\t<form onSubmit={(e) => e.preventDefault()}>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tplaceholder=\"Add a comment...\"\r\n\t\t\t\t\t\t\tclassName=\"custom_input custom_input--comment-field\"\r\n\t\t\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\t\t\tvalue={comment}\r\n\t\t\t\t\t\t\tonChange={(e) => setComment(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tvalue=\"Post\"\r\n\t\t\t\t\t\t\tonClick={submitComment}\r\n\t\t\t\t\t\t\tclassName=\"btn btn--solid btn--solid-blue\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{comments.map((comment, index) => (\r\n\t\t\t\t<Comment comment={comment} key={index} userId={user?._id} />\r\n\t\t\t))}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Comments\r\n","import { motion } from 'framer-motion'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Markdown from '../../components/Markdown'\r\nimport Spinner from '../../components/Spinner'\r\nimport { deletePost, getPostByFriendlyId, likePost } from '../../_actions/post'\r\nimport { formatLargeNumber, placeImageInContent } from '../../util/util'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport Button from '../../components/Button'\r\nimport TopMostLogger from '../../components/TopMostLogger'\r\nimport Comments from '../../components/Comments/Comments'\r\nimport { BsHeartFill } from 'react-icons/bs'\r\n\r\nconst Recipe = ({ id }) => {\r\n\tconst dispatch = useDispatch()\r\n\tconst history = useHistory()\r\n\r\n\tconst post = useSelector((state) => state.post.single)\r\n\tconst user = useSelector((state) => state.auth.user)\r\n\r\n\tconst [showLog, setShowLog] = useState(false)\r\n\tconst [logTitle, setLogTitle] = useState('')\r\n\tconst [logMessage, setLogMessage] = useState('')\r\n\r\n\tuseEffect(() => {\r\n\t\tgetPostByFriendlyId(id)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tdispatch({ type: 'POST/SET_POST', payload: response?.result[0] })\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err))\r\n\t}, [])\r\n\r\n\tconsole.log(post?.user?._id === user?._id)\r\n\r\n\treturn (\r\n\t\t<motion.section\r\n\t\t\tclassName=\"fullrecipe\"\r\n\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\texit={{ opacity: 0 }}\r\n\t\t>\r\n\t\t\t{post ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<TopMostLogger show={showLog} title={logTitle} message={logMessage} />\r\n\r\n\t\t\t\t\t{post?.user?._id === user?._id && (\r\n\t\t\t\t\t\t<section className=\"fullrecipe__editarea\">\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype=\"delete\"\r\n\t\t\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\t\t\tconst result = await deletePost(post._id)\r\n\t\t\t\t\t\t\t\t\tconsole.log(result)\r\n\t\t\t\t\t\t\t\t\tif (result.error) {\r\n\t\t\t\t\t\t\t\t\t\t// could not delete post\r\n\t\t\t\t\t\t\t\t\t\tsetLogMessage(result.error)\r\n\t\t\t\t\t\t\t\t\t\tsetLogTitle('Error')\r\n\t\t\t\t\t\t\t\t\t\tsetShowLog(true)\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tsetLogMessage(result.message)\r\n\t\t\t\t\t\t\t\t\t\tsetLogTitle('Alert')\r\n\t\t\t\t\t\t\t\t\t\tsetShowLog(true)\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\tsetShowLog(false)\r\n\t\t\t\t\t\t\t\t\t\thistory.goBack()\r\n\t\t\t\t\t\t\t\t\t}, 2000)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype=\"edit\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t// set edit form\r\n\t\t\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\t\t\ttype: 'EDIT_FORM/SET',\r\n\t\t\t\t\t\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\t\t\t\t\t\tformData: { ...post, images: null },\r\n\t\t\t\t\t\t\t\t\t\t\tfiles: [...post.images],\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t// redirect to edit page\r\n\t\t\t\t\t\t\t\t\thistory.push('/edit')\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<header className=\"fullrecipe__header\">\r\n\t\t\t\t\t\t<div className=\"fullrecipe__header__info\">\r\n\t\t\t\t\t\t\t<h1>{post.title}</h1>\r\n\t\t\t\t\t\t\t{post.serves && (\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<span>{post.serves}</span> Serves\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{post.prepTime && (\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<span>{post.prepTime}min</span> Prep time\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{String(post.cookTime) && (\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<span>{post.cookTime}min</span> Cook time\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\tto={`/profiles/${post?.user?._id}`}\r\n\t\t\t\t\t\t\tclassName=\"fullrecipe__header__user\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<p className=\"user-username\">{post?.user?.username}</p>\r\n\t\t\t\t\t\t\t<p className=\"user-score\">{post?.user?.score}</p>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\tpost?.user?.imageUrl\r\n\t\t\t\t\t\t\t\t\t\t? post?.user?.imageUrl\r\n\t\t\t\t\t\t\t\t\t\t: `/images/default-avatar.png`\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\talt={`${post?.user?.username}'s avatar`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</header>\r\n\r\n\t\t\t\t\t{/* \r\n\t\t\t\t\t\tInteract with post (like, comment, report)\r\n\t\t\t\t\t */}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t<section className=\"fullrecipe__interactions\">\r\n\t\t\t\t\t\t\t{/* Show likes of post if you are the owner */}\r\n\t\t\t\t\t\t\t{user?._id && post?.user?._id === user?._id && (\r\n\t\t\t\t\t\t\t\t<div className=\"fullrecipe__interactions__stats\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"likes\">\r\n\t\t\t\t\t\t\t\t\t\t<BsHeartFill />\r\n\t\t\t\t\t\t\t\t\t\t{formatLargeNumber(post?.likes?.length)} likes\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{/*\r\n\t\t\t\t\t\t\t\tOnly show like/report buttons if logged in, \r\n\t\t\t\t\t\t\t\tand if post is not your own\r\n\t\t\t\t\t\t\t */}\r\n\t\t\t\t\t\t\t{post?.user?._id !== user?._id && (\r\n\t\t\t\t\t\t\t\t<div className=\"fullrecipe__interactions__controls\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst result = await likePost(post._id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t// there was an error liking post; likely because of unverified email\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (result.error) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetLogTitle('Error')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetLogMessage(result.error)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowLog(true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowLog(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, 2000)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t// all good, add/remove the like to redux store\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (result.result !== 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'POST/LIKE_SINGLE',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayload: result.result,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'POST/LIKE_SINGLE/REMOVE',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayload: user._id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\ttype={post.likes.includes(user?._id) ? 'liked' : 'like'}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<p>{formatLargeNumber(post?.likes?.length)}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t{/* <div></div> */}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t<ul className=\"fullrecipe__tags\">\r\n\t\t\t\t\t\t{post.tags.map((tag, index) => (\r\n\t\t\t\t\t\t\t<li key={index}>\r\n\t\t\t\t\t\t\t\t<Link to={`/discover?tags=${tag}`}>#{tag}</Link>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t<ul className=\"fullrecipe__ingredients\">\r\n\t\t\t\t\t\t{post?.ingredients?.map((ing, index) => (\r\n\t\t\t\t\t\t\t<li key={index}>{ing}</li>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<Markdown\r\n\t\t\t\t\t\tclassName=\"fullrecipe__info\"\r\n\t\t\t\t\t\tcontent={placeImageInContent(post.content, post.images)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Markdown\r\n\t\t\t\t\t\tclassName=\"fullrecipe__method\"\r\n\t\t\t\t\t\tcontent={placeImageInContent(post.method, post.images)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Comments\r\n\t\t\t\t\t\tcomments={post.comments}\r\n\t\t\t\t\t\tpostId={post._id}\r\n\t\t\t\t\t\tuser={user || null}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<Spinner />\r\n\t\t\t)}\r\n\t\t</motion.section>\r\n\t)\r\n}\r\n\r\nexport default Recipe\r\n","import React, { useEffect, useRef, useState } from 'react'\r\n\r\nconst FilePreview = ({ files, onFilesChange }) => {\r\n\tconst inputRef = useRef()\r\n\tconst [open, setOpen] = useState({ open: false, file: null })\r\n\r\n\tconst handleClick = (e, file) => {\r\n\t\te.preventDefault()\r\n\r\n\t\tconst _files = []\r\n\t\tfiles.map((f) => {\r\n\t\t\tif (f !== file) _files.push(f)\r\n\t\t})\r\n\r\n\t\tonFilesChange(_files)\r\n\t}\r\n\r\n\t// set focus of input when open is set as true - modal showing\r\n\tuseEffect(() => {\r\n\t\tif (open.open) {\r\n\t\t\tinputRef.current.focus()\r\n\t\t\tinputRef.current.select(inputRef.current.value.length)\r\n\t\t}\r\n\t}, [open])\r\n\r\n\treturn (\r\n\t\t<section className=\"create__filepreview\">\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"create__filepreview__modal create__filepreview__modal--showing\"\r\n\t\t\t\tstyle={{ display: open.open && open.file ? 'flex' : 'none' }}\r\n\t\t\t>\r\n\t\t\t\t<label htmlFor=\"refName\">\r\n\t\t\t\t\tGive a name to this image <span>*</span>\r\n\t\t\t\t</label>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tid=\"refName\"\r\n\t\t\t\t\t\tref={inputRef}\r\n\t\t\t\t\t\tname=\"refName\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Reference name\"\r\n\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\tonKeyPress={(e) => {\r\n\t\t\t\t\t\t\tif (e.key !== 'Enter' && e.key !== 'NumpadReturn') return\r\n\t\t\t\t\t\t\tconst _files = files.map((f) => {\r\n\t\t\t\t\t\t\t\tif (f === open.file) f = { ...f, name: e.target.value }\r\n\t\t\t\t\t\t\t\treturn f\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\tonFilesChange(_files)\r\n\r\n\t\t\t\t\t\t\tsetOpen({ open: false, file: null })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tif (!open.open && !open.file) return\r\n\r\n\t\t\t\t\t\t\tconst _files = files.map((f) => {\r\n\t\t\t\t\t\t\t\tif (f === open.file) f = { ...f, name: inputRef.current.value }\r\n\t\t\t\t\t\t\t\treturn f\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\tonFilesChange(_files)\r\n\r\n\t\t\t\t\t\t\tsetOpen({ open: false, file: null })\r\n\t\t\t\t\t\t\tinputRef.current.value = ''\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tSave\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t* A reference name makes it easier to position an image within your\r\n\t\t\t\t\trecipe content\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t{files.map((file, index) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\taria-label=\"Rename this image\"\r\n\t\t\t\t\tclassName=\"create__filepreview__file\"\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\tonContextMenu={(e) => handleClick(e, file)}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t// alter the 'name' field of this file object. used to reference in markdown content\r\n\t\t\t\t\t\tinputRef.current.value = file.name\r\n\t\t\t\t\t\tsetOpen({ open: true, file: file })\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<header>\r\n\t\t\t\t\t\t{file.name.substring(0, 15)}\r\n\t\t\t\t\t\t{file.name.length > 15 && '...'}\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t<img src={file.base64} alt={file.name} />\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default FilePreview\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Markdown from '../../components/Markdown'\r\nimport { placeImageInContent } from '../../util/util'\r\n\r\nconst Preview = ({ state }) => {\r\n\tconsole.log(state)\r\n\treturn (\r\n\t\t<section className=\"fullrecipe\">\r\n\t\t\t<header className=\"fullrecipe__header\">\r\n\t\t\t\t<div className=\"fullrecipe__header__info\">\r\n\t\t\t\t\t<h1>{state?.formData?.title}</h1>\r\n\t\t\t\t\t{state?.formData?.serves && (\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<span>{state?.formData?.serves}</span> Serves\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{state?.formData?.prepTime && (\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<span>{state?.formData?.prepTime}min</span> Prep time\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{state?.formData?.cookTime && (\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<span>{state?.formData?.cookTime}min</span> Cook time\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</header>\r\n\t\t\t<ul className=\"fullrecipe__tags\">\r\n\t\t\t\t{state?.formData?.tags?.map((tag, index) => (\r\n\t\t\t\t\t<li key={index}>\r\n\t\t\t\t\t\t<Link to=\"\">#{tag}</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\r\n\t\t\t<ul className=\"fullrecipe__ingredients\">\r\n\t\t\t\t{state?.formData?.ingredients?.map((ing, index) => (\r\n\t\t\t\t\t<li key={index}>{ing}</li>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\t\t\t<Markdown\r\n\t\t\t\tclassName=\"fullrecipe__info\"\r\n\t\t\t\tcontent={placeImageInContent(state?.formData?.content, state?.files)}\r\n\t\t\t/>\r\n\t\t\t<Markdown\r\n\t\t\t\tclassName=\"fullrecipe__method\"\r\n\t\t\t\tcontent={placeImageInContent(state?.formData?.method, state?.files)}\r\n\t\t\t/>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default Preview\r\n","import React from 'react'\r\n\r\nconst ListIngredients = ({ ingredients, onClickIngredient }) => {\r\n\treturn (\r\n\t\t<div className={`list list--ingredients`}>\r\n\t\t\t{ingredients.map((item, index) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"list__item btn btn--no-bg\"\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\taria-label=\"Remove this item.\"\r\n\t\t\t\t\tonClick={() => onClickIngredient(item)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{item}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ListIngredients\r\n","import React from 'react'\r\n\r\nconst ListTags = ({ tags, onClickTag }) => {\r\n\treturn (\r\n\t\t<div className={`list list--tags`}>\r\n\t\t\t{tags.map((item, index) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"list__item btn btn--no-bg\"\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\taria-label=\"Remove this item.\"\r\n\t\t\t\t\tonClick={() => onClickTag(item)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{item}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ListTags\r\n","import React from 'react'\r\n\r\nconst ConfirmationModal = ({ buttons, title, message, showing }) => {\r\n\treturn showing ? (\r\n\t\t<div className=\"confirmationModal\">\r\n\t\t\t<header>\r\n\t\t\t\t<h1>{title}</h1>\r\n\t\t\t</header>\r\n\t\t\t<section>{message}</section>\r\n\t\t\t<footer>{buttons}</footer>\r\n\t\t</div>\r\n\t) : (\r\n\t\t<></>\r\n\t)\r\n}\r\n\r\nexport default ConfirmationModal\r\n","import React, { Component } from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { FiUpload } from 'react-icons/fi'\r\nimport FilePreview from './FilePreview'\r\nimport Preview from './Preview'\r\nimport ListIngredients from './ListIngredients'\r\nimport ListTags from './ListTags'\r\nimport { connect } from 'react-redux'\r\nimport { createRef } from 'react'\r\nimport { createPost } from '../../_actions/post'\r\nimport { bufferToBase64 } from '../../util/util'\r\nimport { withRouter } from 'react-router'\r\nimport ConfirmationModal from '../../components/ConfirmationModal'\r\nimport TopMostLogger from '../../components/TopMostLogger'\r\n\r\nclass Create extends Component {\r\n\tconstructor() {\r\n\t\tsuper()\r\n\r\n\t\tthis.state = {\r\n\t\t\tuser: null,\r\n\t\t\tformData: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tserves: '',\r\n\t\t\t\tprepTime: '',\r\n\t\t\t\tcookTime: '',\r\n\t\t\t\tingredients: [],\r\n\t\t\t\ttags: [],\r\n\t\t\t\tcontent: '',\r\n\t\t\t\tmethod: '',\r\n\t\t\t},\r\n\t\t\tfiles: [],\r\n\t\t\tposted: false,\r\n\t\t\tmodalShowing: false,\r\n\t\t\tlogger: {\r\n\t\t\t\tmessage: '',\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tshowing: false,\r\n\t\t\t},\r\n\t\t}\r\n\r\n\t\tthis.ingredientsRef = createRef()\r\n\t\tthis.tagsRef = createRef()\r\n\r\n\t\tthis.handleFiles = async (e) => {\r\n\t\t\tconst _files = e.target.files\r\n\r\n\t\t\tlet filesToAdd = []\r\n\r\n\t\t\tlet count = 1\r\n\r\n\t\t\tfor (let i = 0; i < _files?.length; i++) {\r\n\t\t\t\tlet file = _files[i]\r\n\r\n\t\t\t\t// Don't allow upload if more than 10 MB\r\n\t\t\t\tif (file.size >= 10 * 1000 * 1000) return\r\n\r\n\t\t\t\t// Only allow images\r\n\t\t\t\tif (!['image/png', 'image/jpeg', 'image/webp'].includes(file.type)) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst name = `image-${this.state.files.length + count++}`\r\n\r\n\t\t\t\t// Get buffer from File.arrayBuffer method\r\n\t\t\t\tlet bfr = await file.arrayBuffer()\r\n\r\n\t\t\t\tfilesToAdd.push({\r\n\t\t\t\t\tname,\r\n\t\t\t\t\ttype: file.type,\r\n\t\t\t\t\tsize: file.size,\r\n\t\t\t\t\tlastModified: file.lastModified,\r\n\t\t\t\t\tbase64: `data:${file.type};base64,${bufferToBase64(bfr)}`,\r\n\t\t\t\t\toriginalFile: file,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif (count - 1 < _files?.length) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t...this.state,\r\n\t\t\t\t\tlogger: {\r\n\t\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\t'Some files have been removed as they are not image files.',\r\n\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\tshowing: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\tlogger: {\r\n\t\t\t\t\t\t\t...this.state.logger,\r\n\t\t\t\t\t\t\tshowing: false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 3000)\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tfiles: [...this.state.files, ...filesToAdd],\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tthis.addIngredient = () => {\r\n\t\t\tif (this.state.formData.ingredients.length >= 30) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t...this.state,\r\n\t\t\t\t\tlogger: {\r\n\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\tmessage: 'Maximum reached',\r\n\t\t\t\t\t\tshowing: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\tlogger: {\r\n\t\t\t\t\t\t\t...this.state.logger,\r\n\t\t\t\t\t\t\tshowing: false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 2000)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.ingredientsRef) return\r\n\r\n\t\t\tconst { value } = this.ingredientsRef.current\r\n\t\t\tif (\r\n\t\t\t\tvalue.length > 50 ||\r\n\t\t\t\tthis.state.formData.ingredients.includes(value) ||\r\n\t\t\t\t!value\r\n\t\t\t)\r\n\t\t\t\treturn\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tformData: {\r\n\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\tingredients: [...this.state.formData.ingredients, value],\r\n\t\t\t\t},\r\n\t\t\t})\r\n\r\n\t\t\tthis.ingredientsRef.current.value = ''\r\n\t\t}\r\n\r\n\t\tthis.addTag = () => {\r\n\t\t\tif (this.state.formData.tags.length >= 6) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t...this.state,\r\n\t\t\t\t\tlogger: {\r\n\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\tmessage: 'Maximum reached',\r\n\t\t\t\t\t\tshowing: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\tlogger: {\r\n\t\t\t\t\t\t\t...this.state.logger,\r\n\t\t\t\t\t\t\tshowing: false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 2000)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.tagsRef) return\r\n\r\n\t\t\tconst { value } = this.tagsRef.current\r\n\r\n\t\t\tif (\r\n\t\t\t\tvalue.length > 30 ||\r\n\t\t\t\tthis.state.formData.tags.includes(value) ||\r\n\t\t\t\t!value\r\n\t\t\t)\r\n\t\t\t\treturn\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tformData: {\r\n\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\ttags: [...this.state.formData.tags, value],\r\n\t\t\t\t},\r\n\t\t\t})\r\n\r\n\t\t\tthis.tagsRef.current.value = ''\r\n\t\t}\r\n\r\n\t\tthis.post = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await createPost({\r\n\t\t\t\t\tformData: this.state?.formData,\r\n\t\t\t\t\tfiles: this.state?.files,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (!result?.post?.userFriendlyId) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\tlogger: {\r\n\t\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\t\tmessage: result?.error,\r\n\t\t\t\t\t\t\tshowing: true,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\tlogger: {\r\n\t\t\t\t\t\t\t\t...this.state.logger,\r\n\t\t\t\t\t\t\t\tshowing: false,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 2000)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setState({ ...this.state, posted: true })\r\n\r\n\t\t\t\t// remove event listener which sets local storage\r\n\t\t\t\twindow.removeEventListener('beforeunload', this.setStorage)\r\n\r\n\t\t\t\t// remove from storage\r\n\t\t\t\tlocalStorage.removeItem('post_form')\r\n\r\n\t\t\t\t// set redux postForm as default\r\n\t\t\t\tthis.props.setStore({ formData: null, files: [] })\r\n\r\n\t\t\t\t// redirect to post page\r\n\t\t\t\tthis.props.history.push(`/recipe/${result?.post?.userFriendlyId}`)\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setStorage = () => {\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t'post_form',\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tformData: this.state?.formData,\r\n\t\t\t\t\tfiles: this.state?.files,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\twindow.addEventListener('beforeunload', this.setStorage)\r\n\t\tthis.setState(this.props)\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.state?.posted) return\r\n\r\n\t\twindow.removeEventListener('beforeunload', this.setStorage)\r\n\t\tthis.props.setStore(this.state)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<motion.section\r\n\t\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\t\texit={{ opacity: 0 }}\r\n\t\t\t\tclassName=\"create\"\r\n\t\t\t>\r\n\t\t\t\t<TopMostLogger\r\n\t\t\t\t\tmessage={this.state?.logger?.message}\r\n\t\t\t\t\ttitle={this.state?.logger?.title}\r\n\t\t\t\t\tshow={this.state?.logger?.showing}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<ConfirmationModal\r\n\t\t\t\t\tshowing={this.state.modalShowing}\r\n\t\t\t\t\ttitle=\"Format Syntax\"\r\n\t\t\t\t\tmessage={\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>![image-name]</span> Insert an uploaded image\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>**text**</span> Bold text\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>*text*</span> Italic text\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t# Heading 1<br />\r\n\t\t\t\t\t\t\t\t\t\t## Heading 2\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\tHeadings (Maximum depth = 6)\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t- List Item 1<br />- List Item 2\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\tBullet-point list\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t1. List Item 1<br />\r\n\t\t\t\t\t\t\t\t\t\t2. List Item 2\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\tNumbered list\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>---</span>Horizontal line\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t| Col1 | Col2 |<br />| :---: | :---: |<br />| Cell1 | Cell2\r\n\t\t\t\t\t\t\t\t\t\t|\r\n\t\t\t\t\t\t\t\t\t\t<br />| Cell3 | Cell4 |\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\tA table with centered columns. Use the following under column\r\n\t\t\t\t\t\t\t\t\tdefinitions to change alignment:\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t:--- will left-align text.\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t:---: will center text.\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t---: will right-align.\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbuttons={\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn--pill btn--pill-inverse\"\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tmodalShowing: !this.state.modalShowing,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tOkay\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<h1>{!this.props?.user && 'sign up to'} create a recipe</h1>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li>- Use up to 6 tags to gain a wider audience.</li>\r\n\t\t\t\t\t\t<li>- Add up to 30 ingredients.</li>\r\n\t\t\t\t\t\t<li>- Remove a tag or ingredient by clicking on it.</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t- Upload images and name them to control where they appear in the\r\n\t\t\t\t\t\t\trecipe.\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t- Format recipe information and method with markdown syntax.\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t{this.props?.user && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"btn btn--pill btn--pill-inverse\"\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\tmodalShowing: !this.state.modalShowing,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tView Formatting Help\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</header>\r\n\r\n\t\t\t\t{this.props?.user ? (\r\n\t\t\t\t\t<div className=\"create__container\">\r\n\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\taction=\"\"\r\n\t\t\t\t\t\t\tonSubmit={(e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\tthis.post()\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tclassName=\"create__form\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<label htmlFor=\"title\" className=\"label label--title\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\t\tid=\"title\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Title\"\r\n\t\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.formData.title}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t<label htmlFor=\"serves\" className=\"label label--serves\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\tid=\"serves\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Serves\"\r\n\t\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.formData.serves}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\t\tserves: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t<label htmlFor=\"prepTime\" className=\"label label--preptime\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tid=\"prepTime\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Prep. Time\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.formData.prepTime}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\t\tprepTime: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t<label htmlFor=\"cookTime\" className=\"label label--cooktime\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tid=\"cookTime\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Cook Time\"\r\n\t\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.formData.cookTime}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcookTime: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t<label htmlFor=\"ingredients\" className=\"label label--ingredients\">\r\n\t\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"ingredients\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"ingredients\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Add Ingredients...\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\t\tref={this.ingredientsRef}\r\n\t\t\t\t\t\t\t\t\t\tonKeyPress={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst enterPressed =\r\n\t\t\t\t\t\t\t\t\t\t\t\te.key === 'NumpadEnter' || e.key === 'Enter'\r\n\t\t\t\t\t\t\t\t\t\t\tif (!enterPressed) return\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tthis.addIngredient()\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\t\taria-label=\"Add this ingredient\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\t\t\tthis.addIngredient()\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\theight=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\t\twidth=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"#ffffff\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,18 L12,6 M6,12 L18,12\"\r\n\t\t\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</header>\r\n\r\n\t\t\t\t\t\t\t\t<ListIngredients\r\n\t\t\t\t\t\t\t\t\tingredients={this.state.formData.ingredients}\r\n\t\t\t\t\t\t\t\t\tonClickIngredient={(item) => {\r\n\t\t\t\t\t\t\t\t\t\tconst newIngredients =\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.formData.ingredients.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\t(_item) => _item !== item\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\t\tingredients: newIngredients,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t<label htmlFor=\"tags\" className=\"label label--tags\">\r\n\t\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"tags\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"tags\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Add Tags...\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\t\tref={this.tagsRef}\r\n\t\t\t\t\t\t\t\t\t\tonKeyPress={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst enterPressed =\r\n\t\t\t\t\t\t\t\t\t\t\t\te.key === 'NumpadEnter' || e.key === 'Enter'\r\n\t\t\t\t\t\t\t\t\t\t\tif (!enterPressed) return\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tthis.addTag()\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\t\taria-label=\"Add this tag\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\t\t\tthis.addTag()\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\theight=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\t\twidth=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"#ffffff\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,18 L12,6 M6,12 L18,12\"\r\n\t\t\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t<ListTags\r\n\t\t\t\t\t\t\t\t\ttags={this.state.formData.tags}\r\n\t\t\t\t\t\t\t\t\tonClickTag={(item) => {\r\n\t\t\t\t\t\t\t\t\t\tconst newTags = this.state.formData.tags.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t(_item) => _item !== item\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\t\tformData: { ...this.state.formData, tags: newTags },\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t<label htmlFor=\"content\" className=\"label label--content\">\r\n\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\tcols=\"30\"\r\n\t\t\t\t\t\t\t\t\trows=\"10\"\r\n\t\t\t\t\t\t\t\t\tname=\"content\"\r\n\t\t\t\t\t\t\t\t\tid=\"content\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Recipe information... allergens, gluten-free, vegan-friendly?\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.formData.content}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontent: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t<label htmlFor=\"method\" className=\"label label--method\">\r\n\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\tcols=\"30\"\r\n\t\t\t\t\t\t\t\t\trows=\"10\"\r\n\t\t\t\t\t\t\t\t\tname=\"method\"\r\n\t\t\t\t\t\t\t\t\tid=\"method\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Recipe method... describe the steps needed to complete this recipe\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.formData.method}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\t\tmethod: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t<label htmlFor=\"upload\" className=\"label label--upload\">\r\n\t\t\t\t\t\t\t\t<p className=\"btn btn--pill btn--solid-blue\" role=\"button\">\r\n\t\t\t\t\t\t\t\t\t<FiUpload style={{ margin: '0 10px 0 0' }} /> Upload\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\t\t\tname=\"upload\"\r\n\t\t\t\t\t\t\t\t\tid=\"upload\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\tencType=\"multipart/form-data\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ display: 'none' }}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleFiles}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t<input type=\"submit\" className=\"btn btn--pill\" value=\"Post\" />\r\n\t\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t\t<FilePreview\r\n\t\t\t\t\t\t\tfiles={this.state.files}\r\n\t\t\t\t\t\t\tonFilesChange={(files) => {\r\n\t\t\t\t\t\t\t\tthis.setState({ ...this.state, files })\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<></>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<Preview state={this.state} />\r\n\t\t\t</motion.section>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n// On mount get state of redux and set props\r\n//  if redux has no postForm set, check localStorage\r\nconst mapStateToProps = (state) => {\r\n\tlet _state = {}\r\n\r\n\tif (\r\n\t\tstate?.postForm?.formData === null ||\r\n\t\tstate?.postForm?.files?.length === 0\r\n\t) {\r\n\t\tlet _form = JSON.parse(localStorage.getItem('post_form'))\r\n\r\n\t\t_state = {\r\n\t\t\tpostForm: _form,\r\n\t\t}\r\n\t}\r\n\r\n\t_state = { ..._state, user: state?.auth?.user || null }\r\n\r\n\treturn {\r\n\t\tformData: _state?.postForm?.formData || null,\r\n\t\tfiles: _state?.postForm?.files || [],\r\n\t\tuser: _state?.user?._id,\r\n\t}\r\n}\r\n\r\n// On unmount set the state of redux with component state\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tsetStore: (newState) =>\r\n\t\t\tdispatch({ type: 'POST_FORM/SET', payload: { ...newState } }),\r\n\t}\r\n}\r\n\r\n// Connect helps by implementing redux store in a class component\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Create))\r\n","import React, { Component } from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { FiUpload } from 'react-icons/fi'\r\nimport FilePreview from './FilePreview'\r\nimport Preview from './Preview'\r\nimport ListIngredients from './ListIngredients'\r\nimport ListTags from './ListTags'\r\nimport { connect } from 'react-redux'\r\nimport { createRef } from 'react'\r\nimport { editPost } from '../../_actions/post'\r\nimport { bufferToBase64 } from '../../util/util'\r\nimport { withRouter } from 'react-router'\r\nimport ConfirmationModal from '../../components/ConfirmationModal'\r\n\r\nclass Create extends Component {\r\n\tconstructor() {\r\n\t\tsuper()\r\n\r\n\t\t// As opposed to Create.jsx we need to\r\n\t\t//  know the _id of the existing post\r\n\t\tthis.state = {\r\n\t\t\tformData: {\r\n\t\t\t\t_id: '',\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tserves: '',\r\n\t\t\t\tprepTime: '',\r\n\t\t\t\tcookTime: '',\r\n\t\t\t\tingredients: [],\r\n\t\t\t\ttags: [],\r\n\t\t\t\tcontent: '',\r\n\t\t\t\tmethod: '',\r\n\t\t\t},\r\n\t\t\tfiles: [],\r\n\t\t\tposted: false,\r\n\t\t\tmodalShowing: false,\r\n\t\t}\r\n\r\n\t\tthis.ingredientsRef = createRef()\r\n\t\tthis.tagsRef = createRef()\r\n\r\n\t\tthis.handleFiles = async (e) => {\r\n\t\t\tconst _files = e.target.files\r\n\r\n\t\t\tlet filesToAdd = []\r\n\r\n\t\t\tlet count = 1\r\n\r\n\t\t\tfor (let i = 0; i < _files?.length; i++) {\r\n\t\t\t\tlet file = _files[i]\r\n\r\n\t\t\t\t// Don't allow upload if more than 10 MB\r\n\t\t\t\tif (file.size >= 10 * 1000 * 1000) return\r\n\r\n\t\t\t\t// Only allow images\r\n\t\t\t\tif (!['image/png', 'image/jpeg', 'image/webp'].includes(file.type)) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst name = `image-${this.state.files.length + count++}`\r\n\r\n\t\t\t\t// Get buffer from File.arrayBuffer method\r\n\t\t\t\tlet bfr = await file.arrayBuffer()\r\n\r\n\t\t\t\tfilesToAdd.push({\r\n\t\t\t\t\tname,\r\n\t\t\t\t\ttype: file.type,\r\n\t\t\t\t\tsize: file.size,\r\n\t\t\t\t\tlastModified: file.lastModified,\r\n\t\t\t\t\tbase64: `data:${file.type};base64,${bufferToBase64(bfr)}`,\r\n\t\t\t\t\toriginalFile: file,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tfiles: [...this.state.files, ...filesToAdd],\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tthis.addIngredient = () => {\r\n\t\t\tif (this.state.formData.ingredients.length >= 30) return\r\n\r\n\t\t\tif (!this.ingredientsRef) return\r\n\r\n\t\t\tconst { value } = this.ingredientsRef.current\r\n\t\t\tif (\r\n\t\t\t\tvalue.length > 20 ||\r\n\t\t\t\tthis.state.formData.ingredients.includes(value) ||\r\n\t\t\t\t!value\r\n\t\t\t)\r\n\t\t\t\treturn\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tformData: {\r\n\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\tingredients: [...this.state.formData.ingredients, value],\r\n\t\t\t\t},\r\n\t\t\t})\r\n\r\n\t\t\tthis.ingredientsRef.current.value = ''\r\n\t\t}\r\n\r\n\t\tthis.addTag = () => {\r\n\t\t\tif (this.state.formData.tags.length >= 6) return\r\n\r\n\t\t\tif (!this.tagsRef) return\r\n\r\n\t\t\tconst { value } = this.tagsRef.current\r\n\r\n\t\t\tif (\r\n\t\t\t\tvalue.length > 20 ||\r\n\t\t\t\tthis.state.formData.tags.includes(value) ||\r\n\t\t\t\t!value\r\n\t\t\t)\r\n\t\t\t\treturn\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tformData: {\r\n\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\ttags: [...this.state.formData.tags, value],\r\n\t\t\t\t},\r\n\t\t\t})\r\n\r\n\t\t\tthis.tagsRef.current.value = ''\r\n\t\t}\r\n\r\n\t\tthis.submit = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await editPost(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\ttitle: this.state?.formData?.title,\r\n\t\t\t\t\t\t\tserves: String(this.state?.formData?.serves),\r\n\t\t\t\t\t\t\tcookTime: String(this.state?.formData?.cookTime),\r\n\t\t\t\t\t\t\tprepTime: String(this.state?.formData?.prepTime),\r\n\t\t\t\t\t\t\tingredients: this.state?.formData?.ingredients,\r\n\t\t\t\t\t\t\ttags: this.state?.formData?.tags,\r\n\t\t\t\t\t\t\tcontent: this.state?.formData?.content,\r\n\t\t\t\t\t\t\tmethod: this.state?.formData?.method,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfiles: this.state?.files,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tthis.state?.formData?._id\r\n\t\t\t\t)\r\n\r\n\t\t\t\tconsole.log(result)\r\n\r\n\t\t\t\tif (!result?.post?.userFriendlyId) return\r\n\r\n\t\t\t\tthis.setState({ ...this.state, posted: true })\r\n\r\n\t\t\t\t// remove event listener which sets local storage\r\n\t\t\t\twindow.removeEventListener('beforeunload', this.setStorage)\r\n\r\n\t\t\t\t// remove from storage\r\n\t\t\t\tlocalStorage.removeItem('edit_form')\r\n\r\n\t\t\t\t// set redux editForm as default\r\n\t\t\t\tthis.props.setStore({ formData: null, files: [] })\r\n\r\n\t\t\t\t// redirect to post page\r\n\t\t\t\tthis.props.history.push(`/recipe/${result?.post?.userFriendlyId}`)\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setStorage = () => {\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t'edit_form',\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tformData: this.state?.formData,\r\n\t\t\t\t\tfiles: this.state?.files,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\twindow.addEventListener('beforeunload', this.setStorage)\r\n\t\tthis.props.formData && this.setState(this.props)\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.state?.posted) return\r\n\r\n\t\twindow.removeEventListener('beforeunload', this.setStorage)\r\n\t\tthis.props.setStore(this.state)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<motion.section\r\n\t\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\t\texit={{ opacity: 0 }}\r\n\t\t\t\tclassName=\"create\"\r\n\t\t\t>\r\n\t\t\t\t<ConfirmationModal\r\n\t\t\t\t\tshowing={this.state.modalShowing}\r\n\t\t\t\t\ttitle=\"Format Syntax\"\r\n\t\t\t\t\tmessage={\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>![image-name]</span> Insert an uploaded image\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>**text**</span> Bold text\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>*text*</span> Italic text\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t# Heading 1<br />\r\n\t\t\t\t\t\t\t\t\t\t## Heading 2\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\tHeadings (Maximum depth = 6)\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t- List Item 1<br />- List Item 2\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\tBullet-point list\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t1. List Item 1<br />\r\n\t\t\t\t\t\t\t\t\t\t2. List Item 2\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\tNumbered list\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>---</span>Horizontal line\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t| Col1 | Col2 |<br />| :---: | :---: |<br />| Cell1 | Cell2\r\n\t\t\t\t\t\t\t\t\t\t|\r\n\t\t\t\t\t\t\t\t\t\t<br />| Cell3 | Cell4 |\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\tA table with centered columns. Use the following under column\r\n\t\t\t\t\t\t\t\t\tdefinitions to change alignment:\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t:--- will left-align text.\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t:---: will center text.\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t---: will right-align.\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbuttons={\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn--pill btn--pill-inverse\"\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tmodalShowing: !this.state.modalShowing,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tOkay\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<h1>edit a recipe</h1>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn btn--pill btn--blue\"\r\n\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\tmodalShowing: !this.state.modalShowing,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tView Formatting Help\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</header>\r\n\r\n\t\t\t\t<div className=\"create__container\">\r\n\t\t\t\t\t<form\r\n\t\t\t\t\t\taction=\"\"\r\n\t\t\t\t\t\tonSubmit={(e) => {\r\n\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\tthis.submit()\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName=\"create__form\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<label htmlFor=\"title\" className=\"label label--title\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\tid=\"title\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Title\"\r\n\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.title}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: { ...this.state.formData, title: e.target.value },\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"serves\" className=\"label label--serves\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\tid=\"serves\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Serves\"\r\n\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.serves}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tserves: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"prepTime\" className=\"label label--preptime\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tid=\"prepTime\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Prep. Time\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.prepTime}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tprepTime: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"cookTime\" className=\"label label--cooktime\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tid=\"cookTime\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Cook Time\"\r\n\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.cookTime}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tcookTime: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"ingredients\" className=\"label label--ingredients\">\r\n\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"ingredients\"\r\n\t\t\t\t\t\t\t\t\tid=\"ingredients\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Add Ingredients...\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\tref={this.ingredientsRef}\r\n\t\t\t\t\t\t\t\t\tonKeyPress={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst enterPressed =\r\n\t\t\t\t\t\t\t\t\t\t\te.key === 'NumpadEnter' || e.key === 'Enter'\r\n\t\t\t\t\t\t\t\t\t\tif (!enterPressed) return\r\n\r\n\t\t\t\t\t\t\t\t\t\tthis.addIngredient()\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\taria-label=\"Add this ingredient\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => this.addIngredient()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#ffffff\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,18 L12,6 M6,12 L18,12\"\r\n\t\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</header>\r\n\r\n\t\t\t\t\t\t\t<ListIngredients\r\n\t\t\t\t\t\t\t\tingredients={this.state.formData.ingredients}\r\n\t\t\t\t\t\t\t\tonClickIngredient={(item) => {\r\n\t\t\t\t\t\t\t\t\tconst newIngredients = this.state.formData.ingredients.filter(\r\n\t\t\t\t\t\t\t\t\t\t(_item) => _item !== item\r\n\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tingredients: newIngredients,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"tags\" className=\"label label--tags\">\r\n\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"tags\"\r\n\t\t\t\t\t\t\t\t\tid=\"tags\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Add Tags...\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\tref={this.tagsRef}\r\n\t\t\t\t\t\t\t\t\tonKeyPress={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst enterPressed =\r\n\t\t\t\t\t\t\t\t\t\t\te.key === 'NumpadEnter' || e.key === 'Enter'\r\n\t\t\t\t\t\t\t\t\t\tif (!enterPressed) return\r\n\r\n\t\t\t\t\t\t\t\t\t\tthis.addTag()\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\taria-label=\"Add this tag\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => this.addTag()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#ffffff\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,18 L12,6 M6,12 L18,12\"\r\n\t\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t<ListTags\r\n\t\t\t\t\t\t\t\ttags={this.state.formData.tags}\r\n\t\t\t\t\t\t\t\tonClickTag={(item) => {\r\n\t\t\t\t\t\t\t\t\tconst newTags = this.state.formData.tags.filter(\r\n\t\t\t\t\t\t\t\t\t\t(_item) => _item !== item\r\n\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: { ...this.state.formData, tags: newTags },\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"content\" className=\"label label--content\">\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tcols=\"30\"\r\n\t\t\t\t\t\t\t\trows=\"10\"\r\n\t\t\t\t\t\t\t\tname=\"content\"\r\n\t\t\t\t\t\t\t\tid=\"content\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Recipe information... allergens, gluten-free, vegan-friendly?\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.content}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tcontent: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"method\" className=\"label label--method\">\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tcols=\"30\"\r\n\t\t\t\t\t\t\t\trows=\"10\"\r\n\t\t\t\t\t\t\t\tname=\"method\"\r\n\t\t\t\t\t\t\t\tid=\"method\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Recipe method... describe the steps needed to complete this recipe\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.method}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tmethod: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"upload\" className=\"label label--upload\">\r\n\t\t\t\t\t\t\t<p className=\"btn btn--pill btn--solid-blue\" role=\"button\">\r\n\t\t\t\t\t\t\t\t<FiUpload style={{ margin: '0 10px 0 0' }} /> Upload\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\t\tname=\"upload\"\r\n\t\t\t\t\t\t\t\tid=\"upload\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\tencType=\"multipart/form-data\"\r\n\t\t\t\t\t\t\t\tstyle={{ display: 'none' }}\r\n\t\t\t\t\t\t\t\tonChange={this.handleFiles}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tclassName=\"btn btn--pill\"\r\n\t\t\t\t\t\t\tvalue=\"Submit Edit\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t<FilePreview\r\n\t\t\t\t\t\tfiles={this.state.files}\r\n\t\t\t\t\t\tonFilesChange={(files) => {\r\n\t\t\t\t\t\t\tthis.setState({ ...this.state, files })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Preview state={this.state} />\r\n\t\t\t</motion.section>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n// On mount get state of redux and set props\r\n//  if redux has no editForm set, check localStorage\r\nconst mapStateToProps = (state) => {\r\n\tif (\r\n\t\tstate?.editForm?.formData === null ||\r\n\t\tstate?.editForm?.files?.length === 0\r\n\t) {\r\n\t\tlet _form = JSON.parse(localStorage.getItem('edit_form'))\r\n\r\n\t\tstate = {\r\n\t\t\teditForm: _form,\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tformData: state?.editForm?.formData || null,\r\n\t\tfiles: state?.editForm?.files || [],\r\n\t}\r\n}\r\n\r\n// On unmount set the state of redux with component state\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tsetStore: (newState) =>\r\n\t\t\tdispatch({ type: 'EDIT_FORM/SET', payload: { ...newState } }),\r\n\t}\r\n}\r\n\r\n// Connect helps by implementing redux store in a class component\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Create))\r\n","import { motion } from 'framer-motion'\r\nimport React, { useState, useEffect, useRef } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { MdFileUpload } from 'react-icons/md'\r\nimport {\r\n\tVscEye,\r\n\tVscEyeClosed,\r\n\tVscUnverified,\r\n\tVscVerified,\r\n} from 'react-icons/vsc'\r\nimport { RiLockPasswordLine } from 'react-icons/ri'\r\nimport { Link } from 'react-router-dom'\r\nimport { bufferToBase64 } from '../../util/util'\r\nimport { deactivateUser, editUser, reactivateUser } from '../../_actions/user'\r\nimport TopMostLogger from '../../components/TopMostLogger'\r\nimport ConfirmationModal from '../../components/ConfirmationModal'\r\n\r\nconst Settings = () => {\r\n\tconst dispatch = useDispatch()\r\n\tconst fileRef = useRef()\r\n\tconst user = useSelector((state) => state.auth.user)\r\n\r\n\tconst [message, setMessage] = useState('')\r\n\tconst [title, setTitle] = useState('')\r\n\tconst [showLog, setShowLog] = useState(false)\r\n\r\n\tconst [showConfirmation, setShowConfirmation] = useState(false)\r\n\r\n\tconst [showResetPassword, setShowResetPassword] = useState(false)\r\n\r\n\tconst [details, setDetails] = useState({\r\n\t\t_id: user?._id || null,\r\n\t\tusername: user?.username || null,\r\n\t\tbio: user?.bio || null,\r\n\t\temail: user?.email || null,\r\n\t\timageUrl: user?.imageUrl || null,\r\n\t\tverified: user?.verified || null,\r\n\t\tdeactivated: user?.deactivated || null,\r\n\t})\r\n\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\r\n\t\tif (isMounted)\r\n\t\t\tsetDetails({\r\n\t\t\t\t_id: user?._id,\r\n\t\t\t\tusername: user?.username,\r\n\t\t\t\tbio: user?.bio,\r\n\t\t\t\temail: user?.email,\r\n\t\t\t\timageUrl: user?.imageUrl,\r\n\t\t\t\tverified: user?.verified,\r\n\t\t\t\tdeactivated: user?.deactivated,\r\n\t\t\t})\r\n\r\n\t\treturn () => (isMounted = false)\r\n\t}, [user])\r\n\r\n\tconst submitEdit = async () => {\r\n\t\tconst result = await editUser(details?._id, {\r\n\t\t\timageUrl: details?.imageUrl,\r\n\t\t\tbio: details?.bio,\r\n\t\t\tusername: details?.username,\r\n\t\t})\r\n\r\n\t\tif (result.error) {\r\n\t\t\tsetMessage(result.error)\r\n\t\t\tsetTitle('Error')\r\n\t\t\tsetShowLog(true)\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetShowLog(false)\r\n\t\t\t}, 2000)\r\n\t\t} else {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: 'AUTH/EDIT_STORED_USER',\r\n\t\t\t\tpayload: result,\r\n\t\t\t})\r\n\r\n\t\t\tsetMessage('Saved details')\r\n\t\t\tsetTitle('Alert')\r\n\t\t\tsetShowLog(true)\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetShowLog(false)\r\n\t\t\t}, 2000)\r\n\t\t}\r\n\t}\r\n\r\n\tconst deactivateProfile = async () => {\r\n\t\ttry {\r\n\t\t\tconst result = await deactivateUser(user?._id)\r\n\r\n\t\t\tdispatch({ type: 'AUTH/EDIT_STORED_USER', payload: result })\r\n\t\t} catch (err) {}\r\n\t}\r\n\r\n\tconst reactivateProfile = async () => {\r\n\t\ttry {\r\n\t\t\tconst result = await reactivateUser(user?._id)\r\n\r\n\t\t\tdispatch({ type: 'AUTH/EDIT_STORED_USER', payload: result })\r\n\t\t} catch (error) {}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<motion.section\r\n\t\t\tclassName=\"settings\"\r\n\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\texit={{ opacity: 0 }}\r\n\t\t>\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\tshowing={showConfirmation}\r\n\t\t\t\ttitle=\"Profile Visibility\"\r\n\t\t\t\tmessage={\r\n\t\t\t\t\tuser?.deactivated ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<p>Your profile is currently private</p>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<p>Your profile is currently public</p>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tbuttons={\r\n\t\t\t\t\tuser?.deactivated ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn--green btn--pill\"\r\n\t\t\t\t\t\t\t\tonClick={reactivateProfile}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tMake Public\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn--blue btn--pill\"\r\n\t\t\t\t\t\t\t\tonClick={() => setShowConfirmation(false)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn--green btn--pill\"\r\n\t\t\t\t\t\t\t\tonClick={deactivateProfile}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tMake Private\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn--blue btn--pill\"\r\n\t\t\t\t\t\t\t\tonClick={() => setShowConfirmation(false)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\tshowing={showResetPassword}\r\n\t\t\t\ttitle=\"Send Password Reset Link\"\r\n\t\t\t\tmessage={\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tIf you proceed, you will receive a one-time password reset link\r\n\t\t\t\t\t\t\tvia email\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</>\r\n\t\t\t\t}\r\n\t\t\t\tbuttons={\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<button className=\"btn btn--pill btn--green\">Reset Password</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"btn btn--pill btn--blue\"\r\n\t\t\t\t\t\t\tonClick={() => setShowResetPassword(false)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\r\n\t\t\t<TopMostLogger message={message} show={showLog} title={title} />\r\n\r\n\t\t\t<div className=\"settings__container\">\r\n\t\t\t\t<div className=\"settings__edit\">\r\n\t\t\t\t\t<p\r\n\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t!details?.verified\r\n\t\t\t\t\t\t\t\t? 'email email--unverified'\r\n\t\t\t\t\t\t\t\t: 'email email--verified'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{details?.email}\r\n\t\t\t\t\t\t{!details?.verified ? <VscUnverified /> : <VscVerified />}\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<form\r\n\t\t\t\t\t\tonSubmit={(e) => {\r\n\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\tsubmitEdit()\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<label className=\"file_upload\">\r\n\t\t\t\t\t\t\t<img src={details?.imageUrl} alt=\"Your profile avatar\" />\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t<MdFileUpload /> Upload\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\tname=\"avatar\"\r\n\t\t\t\t\t\t\t\tmultiple={false}\r\n\t\t\t\t\t\t\t\tref={fileRef}\r\n\t\t\t\t\t\t\t\tonChange={async (e) => {\r\n\t\t\t\t\t\t\t\t\t// check that it's less than 10 MB\r\n\t\t\t\t\t\t\t\t\tif (e.target.files[0].size > 100 ** 6) return\r\n\r\n\t\t\t\t\t\t\t\t\tconst buffer = await e.target.files[0].arrayBuffer()\r\n\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t!['image/webp', 'image/jpeg', 'image/png'].includes(\r\n\t\t\t\t\t\t\t\t\t\t\te.target.files[0].type\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\tsetMessage('Invalid image format')\r\n\t\t\t\t\t\t\t\t\t\tsetTitle('Error')\r\n\t\t\t\t\t\t\t\t\t\tsetShowLog(true)\r\n\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowLog(false)\r\n\t\t\t\t\t\t\t\t\t\t}, 2000)\r\n\r\n\t\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tconst b64 = `data:${\r\n\t\t\t\t\t\t\t\t\t\te.target.files[0].type\r\n\t\t\t\t\t\t\t\t\t};base64,${bufferToBase64(buffer)}`\r\n\r\n\t\t\t\t\t\t\t\t\tsetDetails({ ...details, imageUrl: b64 })\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tstyle={{ display: 'none' }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"username\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input\"\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\t\t\tvalue={details?.username}\r\n\t\t\t\t\t\t\t\tonChange={({ target }) =>\r\n\t\t\t\t\t\t\t\t\tsetDetails({ ...details, username: target.value })\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"bio\">\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--bio\"\r\n\t\t\t\t\t\t\t\tname=\"bio\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"bio\"\r\n\t\t\t\t\t\t\t\tvalue={details?.bio}\r\n\t\t\t\t\t\t\t\tonChange={({ target }) =>\r\n\t\t\t\t\t\t\t\t\tsetDetails({ ...details, bio: target.value })\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tvalue=\"Edit Profile\"\r\n\t\t\t\t\t\t\tclassName=\"btn btn--pill\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"settings__visibility\">\r\n\t\t\t\t\t{details?.deactivated ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<p className=\"privacy\">\r\n\t\t\t\t\t\t\t\tYour profile is set to private <VscEyeClosed />\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<p className=\"privacy\">\r\n\t\t\t\t\t\t\t\tYour profile is public <VscEye />\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn btn--blue styled-link\"\r\n\t\t\t\t\t\tonClick={() => setShowConfirmation(true)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tChange visibility\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{user?.verified && !user?.googleId && (\r\n\t\t\t\t\t<div className=\"settings__password\">\r\n\t\t\t\t\t\t<RiLockPasswordLine />\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"btn btn--blue styled-link\"\r\n\t\t\t\t\t\t\tonClick={() => setShowResetPassword(true)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tReset password\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</motion.section>\r\n\t)\r\n}\r\n\r\nexport default Settings\r\n","import Footer from './components/Footer'\r\nimport Navbar from './components/Navbar'\r\nimport Home from './pages/Home/Home'\r\nimport Discover from './pages/Discover/Discover'\r\nimport Auth from './pages/Auth/Auth'\r\nimport Profile from './pages/Profile/Profile'\r\nimport Recipe from './pages/Recipe/Recipe'\r\nimport Create from './pages/Create/Create'\r\nimport Edit from './pages/Create/Edit'\r\nimport { Route, Switch, useLocation } from 'react-router-dom'\r\nimport { AnimatePresence } from 'framer-motion'\r\nimport { useEffect, useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport Settings from './pages/Settings/Settings'\r\nimport Spinner from './components/Spinner'\r\n\r\nimport emitter from './_services/emitter'\r\n\r\nfunction App() {\r\n\tconst dispatch = useDispatch()\r\n\tconst location = useLocation()\r\n\r\n\tconst [loading, setLoading] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(false)\r\n\t}, [location])\r\n\r\n\tuseEffect(() => {\r\n\t\t// Initialize the AUTH user state from browser's localstorage\r\n\t\tdispatch({\r\n\t\t\ttype: 'AUTH/INIT',\r\n\t\t\tpayload: JSON.parse(localStorage.getItem('profile')),\r\n\t\t})\r\n\r\n\t\t// Listen to axios events via our emitter to handle request/response event\r\n\t\temitter.on('REQUEST_START', (e) => {\r\n\t\t\tsetLoading(true)\r\n\t\t})\r\n\t\temitter.on('RESPONSE_FINISH', (e) => {\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\t\temitter.on('RESPONSE_ERROR', (e) => {\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\r\n\t\treturn () => {\r\n\t\t\temitter.off('RESPONSE_FINISH')\r\n\t\t\temitter.off('RESPONSE_ERROR')\r\n\t\t\temitter.off('REQUEST_START')\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Navbar />\r\n\t\t\t<main className=\"container\">\r\n\t\t\t\t<Spinner showing={loading} />\r\n\t\t\t\t<AnimatePresence exitBeforeEnter>\r\n\t\t\t\t\t<Switch location={location} key={location.pathname}>\r\n\t\t\t\t\t\t<Route path=\"/\" exact>\r\n\t\t\t\t\t\t\t<Home />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/discover\" exact>\r\n\t\t\t\t\t\t\t<Discover />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/post\" exact>\r\n\t\t\t\t\t\t\t<Create />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/edit\" exact>\r\n\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route path=\"/login\">\r\n\t\t\t\t\t\t\t<Auth />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/signup\">\r\n\t\t\t\t\t\t\t<Auth />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route path=\"/settings\">\r\n\t\t\t\t\t\t\t<Settings />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath=\"/profiles/:id\"\r\n\t\t\t\t\t\t\trender={(p) => <Profile id={p.match.params.id} />}\r\n\t\t\t\t\t\t></Route>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath=\"/recipe/:id\"\r\n\t\t\t\t\t\t\trender={(p) => <Recipe id={p.match.params.id} />}\r\n\t\t\t\t\t\t></Route>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</AnimatePresence>\r\n\t\t\t</main>\r\n\t\t\t<Footer />\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default App\r\n","import { combineReducers } from 'redux'\r\n\r\nimport auth from './auth'\r\nimport user from './user'\r\nimport post from './post'\r\nimport postForm from './postForm'\r\nimport editForm from './editForm'\r\n\r\nexport default combineReducers({ auth, user, postForm, post, editForm })\r\n","/*\r\n\tDetails of current user\r\n*/\r\nexport default (state = { user: null }, action) => {\r\n\tif (typeof state === 'undefined') return\r\n\r\n\tswitch (action.type) {\r\n\t\tcase 'AUTH/INIT':\r\n\t\t\t// On initialize (user from localStorage - if stored)\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: action?.payload?.user,\r\n\t\t\t\ttoken: action?.payload?.token,\r\n\t\t\t}\r\n\r\n\t\tcase 'AUTH/EDIT_STORED_USER':\r\n\t\t\tconsole.log(action?.payload)\r\n\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t'profile',\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tuser: action?.payload?.user,\r\n\t\t\t\t\ttoken: JSON.parse(localStorage.getItem('profile')).token,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: action?.payload?.user,\r\n\t\t\t}\r\n\r\n\t\tcase 'AUTH/SIGN_IN':\r\n\t\t\t// Sign in (set localStorage)\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t'profile',\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tuser: action?.payload?.user,\r\n\t\t\t\t\ttoken: action?.payload?.token,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: action?.payload?.user,\r\n\t\t\t\ttoken: action?.payload?.token,\r\n\t\t\t}\r\n\t\tcase 'AUTH/SIGN_UP':\r\n\t\t\t// Sign user up\r\n\t\t\treturn { ...state }\r\n\t\tcase 'AUTH/LOG_OUT':\r\n\t\t\t// Log user out (just nullify state and remove localstorage item)\r\n\t\t\tlocalStorage.removeItem('profile')\r\n\t\t\treturn { ...state, user: null, token: null }\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","/*\r\n\tALL = list of users\r\n\tSINGLE = current user / profile page\r\n*/\r\nexport default (state = { all: [], single: null }, action) => {\r\n\tif (typeof state === 'undefined') return\r\n\r\n\tswitch (action.type) {\r\n\t\tcase 'USER/SET_USER':\r\n\t\t\treturn { ...state, single: action.payload }\r\n\t\tcase 'USER/SET_USER_FOLLOWERS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsingle: { ...state.single, _followers: action.payload },\r\n\t\t\t}\r\n\t\tcase 'USER/SET_USER_FOLLOWING':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsingle: { ...state.single, _following: action.payload },\r\n\t\t\t}\r\n\t\tcase 'USER/EDIT_USER':\r\n\t\t\treturn { ...state, single: { ...state.single, ...action.payload } }\r\n\t\tcase 'USER/SET_ALL':\r\n\t\t\treturn { ...state, all: action.payload }\r\n\t\tcase 'USER/PUSH_TO_ALL':\r\n\t\t\treturn { ...state, all: state.all.push(action.payload) }\r\n\t\tcase 'USER/PULL_FROM_ALL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tall: state.all.filter((item) => item._id !== action.payload._id),\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","/*\r\n\tCreate post form will be saved in redux \r\n\tstore so that when navigating away the form state can be loaded\r\n*/\r\n\r\nexport default (state = { formData: null, files: [] }, action) => {\r\n\tif (typeof state === 'undefined') return\r\n\r\n\tswitch (action.type) {\r\n\t\tcase 'POST_FORM/SET':\r\n\t\t\t// also set item in localstorage\r\n\t\t\tlocalStorage.setItem('post_form', JSON.stringify(action.payload))\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tformData: action.payload.formData,\r\n\t\t\t\tfiles: action.payload.files,\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","/*\r\n\tALL posts = list from discover or search\r\n\tSINGLE post = post page\r\n*/\r\n\r\nexport default (state = { all: [], single: null }, action) => {\r\n\tif (typeof state === 'undefined') return\r\n\r\n\tswitch (action.type) {\r\n\t\tcase 'POST/SET_POST':\r\n\t\t\treturn { ...state, single: action.payload }\r\n\t\tcase 'POST/EDIT_POST':\r\n\t\t\treturn { ...state, single: { ...state.single, ...action.payload } }\r\n\t\tcase 'POST/SET_ALL':\r\n\t\t\treturn { ...state, all: action.payload }\r\n\t\tcase 'POST/EDIT_ALL':\r\n\t\t\treturn { ...state }\r\n\t\tcase 'POST/LIKE_SINGLE':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsingle: {\r\n\t\t\t\t\t...state.single,\r\n\t\t\t\t\tlikes: [...state.single.likes, action.payload],\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase 'POST/LIKE_SINGLE/REMOVE':\r\n\t\t\t// remove the given user _id (action payload) from likes\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsingle: {\r\n\t\t\t\t\t...state.single,\r\n\t\t\t\t\tlikes: state.single.likes.filter(\r\n\t\t\t\t\t\t(userId) => userId !== action.payload\r\n\t\t\t\t\t),\r\n\t\t\t\t},\r\n\t\t\t}\r\n\r\n\t\tcase 'POST/COMMENT_SINGLE':\r\n\t\t\t// add comment to single post\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsingle: {\r\n\t\t\t\t\t...state.single,\r\n\t\t\t\t\tcomments: [...state.single.comments, action.payload],\r\n\t\t\t\t},\r\n\t\t\t}\r\n\r\n\t\tcase 'POST/COMMENT_SINGLE/REMOVE':\r\n\t\t\t// remove comment from post\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsingle: {\r\n\t\t\t\t\t...state.single,\r\n\t\t\t\t\tcomments: state.single.comments.filter(\r\n\t\t\t\t\t\t(comment) => comment._id !== action.payload\r\n\t\t\t\t\t),\r\n\t\t\t\t},\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","/*\r\n\tEdit post form will be saved in redux and localStorage, just like postForm\r\n*/\r\n\r\nexport default (state = { formData: null, files: [] }, action) => {\r\n\tif (typeof state === 'undefined') return\r\n\r\n\tswitch (action.type) {\r\n\t\tcase 'EDIT_FORM/SET':\r\n\t\t\tlocalStorage.setItem('edit_form', JSON.stringify(action.payload))\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tformData: action.payload.formData,\r\n\t\t\t\tfiles: action.payload.files,\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { Provider } from 'react-redux'\r\nimport { HashRouter as Router } from 'react-router-dom'\r\nimport { createStore } from 'redux'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport App from './App'\r\nimport reducers from './_reducers/index'\r\n\r\nconst store = createStore(reducers, composeWithDevTools())\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<Router>\r\n\t\t\t<App />\r\n\t\t</Router>\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n)\r\n"],"sourceRoot":""}