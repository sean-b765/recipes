(this["webpackJsonprecipes-frontend"]=this["webpackJsonprecipes-frontend"]||[]).push([[0],{211:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(20),i=n.n(r),s=n(11),l=n(12),o=n(41),c=n(95),u=n(10),d=n(1),j=function(){return Object(d.jsxs)("footer",{className:"footer",children:[Object(d.jsx)("div",{className:"footer__logo",children:Object(d.jsx)("h3",{children:"Recipes"})}),Object(d.jsx)("nav",{className:"footer__navigation",children:Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(l.b,{to:"/",children:"Home"})}),Object(d.jsx)("li",{children:Object(d.jsx)(l.b,{to:"/discover",children:"Discover"})}),Object(d.jsx)("li",{children:Object(d.jsx)(l.b,{to:"/post",children:"Post"})})]})}),Object(d.jsxs)("div",{className:"footer__info",children:[Object(d.jsxs)("div",{className:"footer__info__legal",children:[Object(d.jsx)(l.b,{to:"/",children:"Privacy Policy"}),Object(d.jsx)(l.b,{to:"/",children:"Terms & Conditions"})]}),Object(d.jsx)("div",{className:"footer__info__copyright",children:Object(d.jsx)("a",{href:"https://github.com/sean-b765",target:"_blank",children:"Copyright \xa9 2021 | Sean Boaden"})})]})]})},b=n(14),p=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(s.d)((function(e){return e.auth.user})),o=Object(b.g)(),c=Object(b.f)();return Object(a.useEffect)((function(){r(!1)}),[o]),Object(d.jsxs)("header",{className:"navbar",children:[Object(d.jsxs)("nav",{className:"navbar__navigation",children:[Object(d.jsxs)("div",{"aria-label":"Open the menu",className:n?"navbar__navigation__mobile close":"navbar__navigation__mobile",onClick:function(){return r(!n)},children:[Object(d.jsx)("span",{}),Object(d.jsx)("span",{}),Object(d.jsx)("span",{})]}),Object(d.jsxs)("div",{className:n?"menu mobile-variant":"menu",children:[Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(l.b,{to:"/",children:"Home"})}),Object(d.jsx)("li",{children:Object(d.jsx)(l.b,{to:"/discover",children:"Discover"})}),Object(d.jsx)("li",{children:Object(d.jsx)(l.b,{to:"/post",children:"Post"})})]}),!(null===i||void 0===i?void 0:i._id)&&Object(d.jsxs)("div",{className:"menu__mobile__actions",children:[Object(d.jsx)("button",{className:"btn btn--no-bg",onClick:function(){return c.push("/login")},children:"Login"}),Object(d.jsx)("button",{className:"btn btn--pill btn--pill-inverse btn--solid-blue",onClick:function(){return c.push("/signup")},children:"Sign up"})]})]})]}),Object(d.jsx)("div",{className:"navbar__brand",children:Object(d.jsx)(l.b,{to:"/",className:"navbar__brand__logo","aria-label":"Recipes Logo",children:"R"})}),!i&&Object(d.jsxs)("div",{className:"navbar__actions",children:[Object(d.jsx)("button",{className:"btn btn--no-bg",onClick:function(){return c.push("/login")},children:"Login"}),Object(d.jsx)("button",{className:"btn btn--pill btn--pill-inverse btn--solid-blue",onClick:function(){return c.push("/signup")},children:"Sign up"})]}),i&&Object(d.jsx)("div",{className:"navbar__notif",children:Object(d.jsx)("div",{className:"navbar__notif__profile","aria-label":"Visit your profile",onClick:function(){return c.push("/profiles/".concat(i._id))},children:Object(d.jsx)("img",{src:i.imageUrl?i.imageUrl:"/images/default-avatar.png",alt:"Your profile"})})})]})},v=n(18),m=n(55),f=n(56),O=n(213),h=function(){var e=Object(b.f)(),t=Object(s.d)((function(e){return e.auth.user}));return Object(d.jsx)(O.a.section,{className:"home",transition:{duration:.25},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Object(d.jsxs)("div",{className:"home__wrapper",children:[Object(d.jsxs)("div",{className:"home__wrapper__landing",children:[Object(d.jsxs)("header",{className:"home__wrapper__landing__split",children:[Object(d.jsx)("h1",{"data-aos":"fade","data-aos-duration":"750","data-aos-delay":"500","data-aos-timing":"",children:"Your favourite recipes,"}),Object(d.jsx)("p",{"data-aos":"fade-right","data-aos-delay":"800","data-aos-duration":"850",children:"all in one place."})]}),!(null===t||void 0===t?void 0:t._id)&&Object(d.jsx)("div",{className:"home__wrapper__landing__split home__wrapper__landing__split--center",children:Object(d.jsx)("button",{className:"btn btn--large",onClick:function(){return e.push("/signup")},"data-aos-delay":"1200","data-aos-duration":"500","data-aos":"zoom-in-up",children:"Get Started"})})]}),Object(d.jsxs)("section",{className:"home__wrapper__showcase",children:[Object(d.jsxs)("div",{className:"home__wrapper__showcase__item home__wrapper__showcase__item--discover",children:[Object(d.jsxs)("header",{"data-aos":"fade","data-aos-duration":"750",children:[Object(d.jsx)(m.a,{}),Object(d.jsx)("h2",{children:"Discover new tastes"})]}),Object(d.jsx)("article",{"data-aos":"zoom-in-up","data-aos-duration":"750",children:Object(d.jsx)("p",{children:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Voluptatibus ratione facilis dolorum cupiditate rem enim non?"})})]}),Object(d.jsxs)("div",{className:"home__wrapper__showcase__item home__wrapper__showcase__item--reverse home__wrapper__showcase__item--search",children:[Object(d.jsx)("article",{"data-aos":"zoom-in-up","data-aos-duration":"750",children:Object(d.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Natus dolorum voluptate sapiente."})}),Object(d.jsxs)("header",{"data-aos":"fade","data-aos-duration":"750",children:[Object(d.jsx)(v.d,{}),Object(d.jsx)("h2",{children:"Search for a dish"})]})]}),Object(d.jsxs)("div",{className:"home__wrapper__showcase__item home__wrapper__showcase__item--features",children:[Object(d.jsxs)("div",{className:"split",children:[Object(d.jsxs)("header",{"data-aos":"fade","data-aos-duration":"750",children:[Object(d.jsx)(f.b,{}),Object(d.jsx)("h2",{children:"Follow your friends"})]}),Object(d.jsx)("article",{"data-aos":"zoom-in-up","data-aos-duration":"750",children:Object(d.jsx)("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Atque placeat rerum error consectetur minus nulla ad."})})]}),Object(d.jsxs)("div",{className:"split",children:[Object(d.jsxs)("header",{"data-aos":"fade","data-aos-duration":"750",children:[Object(d.jsx)(v.e,{}),Object(d.jsx)("h2",{children:"Share your own creations"})]}),Object(d.jsx)("article",{"data-aos":"zoom-in-up","data-aos-duration":"750",children:Object(d.jsx)("p",{children:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Illum, nam?"})})]})]})]})]})})},g=n(3),x=n(5),_=n.n(x),y=n(9),w=n(96),S=n.n(w),N=n(97),k=new(n.n(N).a),T={on:function(e,t){return k.on(e,t)},once:function(e,t){return k.once(e,t)},off:function(e,t){return k.off(e,t)},emit:function(e,t){return k.emit(e,t)}};Object.freeze(T);var D=T,C=S.a.create({baseURL:"https://recipe-masters.herokuapp.com/"});C.interceptors.request.use((function(e){D.emit("REQUEST_START",!0);var t=localStorage.getItem("profile");return t&&(e.headers.Authorization="Bearer ".concat(JSON.parse(t).token)),e})),C.interceptors.response.use((function(e){return D.emit("RESPONSE_FINISH",e.data),e}),(function(e){throw D.emit("RESPONSE_ERROR",e),e}));var E=function(e){return C.post("/auth/signin",e)},F=function(e){return C.post("/auth/signup",e)},R=function(e){return C.post("/auth/signin-google",e)},I=function(e){return C.get("/user/".concat(e))},L=function(e){return C.patch("/user/follow/".concat(e))},U=function(e){return C.patch("/user/unfollow/".concat(e))},P=function(e){return C.get("/user/".concat(e,"/followers"))},M=function(e){return C.get("/user/".concat(e,"/following"))},A=function(e){return C.patch("/user/block/".concat(e))},H=function(e){return C.patch("/user/unblock/".concat(e))},G=function(e,t){return C.patch("/user/".concat(t),e)},z=function(e){return C.patch("/user/".concat(e,"/deactivate"))},B=function(e){return C.patch("/user/".concat(e,"/reactivate"))},K=function(e){return C.get("/user/".concat(e,"/posts"))},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"?sort=rating&period=alltime";return C.get("/posts/discover".concat(e))},V=function(e){return C.post("/posts/create",e)},W=function(e,t){return C.patch("/posts/edit/".concat(t),e)},J=function(e){return C.get("/posts/post/".concat(e))},Y=function(e){return C.delete("/posts/delete/".concat(e))},Z=function(e){return C.patch("/posts/like/".concat(e))},Q=function(e,t){return C.post("/posts/comment/".concat(e),t)},X=function(e){return C.delete("/posts/remove-comment/".concat(e))},$=function(e){return C.get("/posts/tags/".concat(e))},ee=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t),e.next=4,V(t);case 4:return n=e.sent,a=n.data,e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(y.a)(_.a.mark((function e(t,n){var a,r,i,s,l,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(t,n);case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message)||(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),se=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(y.a)(_.a.mark((function e(t,n){var a,r,i,s,l,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q(t,{comment:n});case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message)||(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ce=n(73),ue=(n(208),n(45)),de=Object(ce.b)(ce.a),je=function(e){var t=e.filters,n=e.setFilters,a=e.setFilterState;return Object(d.jsx)("section",{className:"filters",children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(t)},children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{className:"filters__sort",htmlFor:"by",children:Object(d.jsxs)("select",{name:"by","aria-label":"Sort by",onChange:function(e){return n(Object(g.a)(Object(g.a)({},t),{},{sort:e.target.value}))},children:[Object(d.jsx)("option",{value:"rating",children:"rating"}),Object(d.jsx)("option",{value:"new",children:"new"})]})}),Object(d.jsx)("label",{className:"filters__period",htmlFor:"sort",children:Object(d.jsxs)("select",{name:"sort","aria-label":"Sort with date filters",onChange:function(e){return n(Object(g.a)(Object(g.a)({},t),{},{period:e.target.value}))},children:[Object(d.jsx)("option",{value:"alltime",children:"all time"}),Object(d.jsx)("option",{value:"year",children:"1 year"}),Object(d.jsx)("option",{value:"halfyear",children:"6 months"}),Object(d.jsx)("option",{value:"month",children:"1 month"}),Object(d.jsx)("option",{value:"week",children:"1 week"}),Object(d.jsx)("option",{value:"day",children:"today"})]})})]}),Object(d.jsxs)("label",{children:[Object(d.jsx)("p",{style:{marginTop:"0.5rem"},children:"Serves"}),Object(d.jsx)(de,{style:{margin:"0.4rem 0 1rem 0"},value:t.serves,onChange:function(e){return a(Object(g.a)(Object(g.a)({},t),{},{serves:e}))},onAfterChange:function(e){return n(Object(g.a)(Object(g.a)({},t),{},{serves:e}))},max:12,min:1,defaultValue:[1,12],tipFormatter:function(e){return"".concat(e)}})]}),Object(d.jsxs)("label",{children:[Object(d.jsxs)("p",{style:{marginTop:"0.5rem"},children:["Cook Time",Object(d.jsx)("span",{children:"(mins)"})]}),!ue.isMobile&&Object(d.jsx)(de,{style:{margin:"0.4rem 0 1rem 0"},value:t.cookTime,onChange:function(e){return a(Object(g.a)(Object(g.a)({},t),{},{cookTime:e}))},onAfterChange:function(e){return n(Object(g.a)(Object(g.a)({},t),{},{cookTime:e}))},max:240,min:0,defaultValue:[0,240],tipFormatter:function(e){return"".concat(e,"min")}}),ue.isMobile&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{placeholder:"Min.",type:"number",name:"cookTimeLow",id:"cookTimeLow",className:"custom_input custom_input--num",min:0,max:240,onChange:function(e){a(Object(g.a)(Object(g.a)({},t),{},{cookTime:[e.target.value,t.cookTime[1]]}))}}),Object(d.jsx)("input",{type:"number",placeholder:"Max.",name:"cookTimeHigh",id:"cookTimeHigh",className:"custom_input custom_input--num",min:0,max:240,onChange:function(e){a(Object(g.a)(Object(g.a)({},t),{},{cookTime:[t.cookTime[0],e.target.value]}))}})]})]}),Object(d.jsxs)("label",{children:[Object(d.jsxs)("p",{style:{marginTop:"0.5rem"},children:["Prep. Time ",Object(d.jsx)("span",{children:"(mins)"})]}),!ue.isMobile&&Object(d.jsx)(de,{style:{margin:"0.4rem 0 1rem 0"},value:t.prepTime,onChange:function(e){return a(Object(g.a)(Object(g.a)({},t),{},{prepTime:e}))},onAfterChange:function(e){return n(Object(g.a)(Object(g.a)({},t),{},{prepTime:e}))},max:120,min:0,defaultValue:[0,120],tipFormatter:function(e){return"".concat(e,"min")}}),ue.isMobile&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{placeholder:"Min.",type:"number",name:"prepTimeLow",id:"prepTimeLow",className:"custom_input custom_input--num",min:0,max:240,onChange:function(e){a(Object(g.a)(Object(g.a)({},t),{},{prepTime:[e.target.value,t.prepTime[1]]}))}}),Object(d.jsx)("input",{type:"number",placeholder:"Max.",name:"prepTimeHigh",id:"prepTimeHigh",className:"custom_input custom_input--num",min:0,max:240,onChange:function(e){a(Object(g.a)(Object(g.a)({},t),{},{prepTime:[t.prepTime[0],e.target.value]}))}})]})]}),Object(d.jsxs)("label",{htmlFor:"search",className:"discover__header__search",children:[Object(d.jsx)("input",{type:"text",name:"search",id:"search",placeholder:"Search...","aria-label":"Search query",value:t.query,onChange:function(e){return a(Object(g.a)(Object(g.a)({},t),{},{query:e.target.value}))}}),Object(d.jsxs)("label",{htmlFor:"search","aria-label":"Search...",children:[Object(d.jsx)(v.d,{}),Object(d.jsx)("input",{type:"submit","aria-label":"Search...",value:""})]})]})]})})},be=n(102),pe=n.n(be),ve=function(e){for(var t="",n=new Uint8Array(e),a=n.byteLength,r=0;r<a;r++)t+=String.fromCharCode(n[r]);return window.btoa(t)},me=function(e){var t,n;return(null===(t=e.tags)||void 0===t?void 0:t.length)>=1?"?include=".concat(null===(n=e.tags)||void 0===n?void 0:n.join(","),"&sort=").concat(e.sort,"&period=").concat(e.period,"&serves=").concat(e.serves[0],"-").concat(e.serves[1],"&prepTime=").concat(e.prepTime[0]||0,"-").concat(e.prepTime[1]||120,"&cookTime=").concat(e.cookTime[0]||0,"-").concat(e.cookTime[1]||240,"&page=").concat(e.page,"&perPage=").concat(e.perPage).concat(""!==(null===e||void 0===e?void 0:e.query)?"&terms=".concat(null===e||void 0===e?void 0:e.query):""):"?sort=".concat(e.sort,"&period=").concat(e.period,"&serves=").concat(e.serves[0],"-").concat(e.serves[1],"&prepTime=").concat(e.prepTime[0]||0,"-").concat(e.prepTime[1]||120,"&cookTime=").concat(e.cookTime[0]||0,"-").concat(e.cookTime[1]||240,"&page=").concat(e.page,"&perPage=").concat(e.perPage).concat(""!==(null===e||void 0===e?void 0:e.query)?"&terms=".concat(null===e||void 0===e?void 0:e.query):"")},fe=/(![\[][\w\d-_]{0,})[\]]/g,Oe=function(e,t){for(var n,a=e.matchAll(fe),r=e,i=t.map((function(e){return e.name})),s=function(){var e=n.value[0].substring(2,n.value[0].length-1);if(!i.includes(e))return r=r.replace(n.value[0],""),"continue";var a=t.find((function(t,n){return t.name===e}));r=r.replace(n.value[0],"\n![".concat(e,"](").concat(a.base64,")"))};!(n=a.next()).done;)s();return r=pe.a.sanitize(r)},he=function(e){return e>1e6?"".concat(parseFloat(Number(e/1e6).toFixed(1)),"M"):e>1e5||e>1e4||e>1e3?"".concat(parseFloat(Number(e/1e3).toFixed(1)),"K"):"".concat(e)},ge=n(44),xe=n(35),_e=n(103),ye=function(e){var t,n,a,r,i,s,o,c,u=e.object,j=e.delay,b=e.isOnProfile,p=void 0!==b&&b;return Object(d.jsxs)("div",{className:"recipe","data-aos":"zoom-in","data-aos-delay":100*j,"data-aos-once":"true","data-aos-anchor-placement":"top-bottom",children:[Object(d.jsx)("div",{className:(null===u||void 0===u||null===(t=u.images[0])||void 0===t?void 0:t.base64)?"recipe__bg":"recipe__bg recipe__bg--nobg",style:{backgroundImage:'url("'.concat((null===u||void 0===u||null===(n=u.images[0])||void 0===n?void 0:n.base64)?null===u||void 0===u||null===(a=u.images[0])||void 0===a?void 0:a.base64:"./images/default-recipe.png",'")')},children:Object(d.jsx)("div",{className:"recipe__bg__overlay",children:Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:[Object(d.jsx)(ge.b,{}),null===u||void 0===u?void 0:u.serves]}),Object(d.jsxs)("p",{children:[Object(d.jsx)(f.a,{}),"".concat(null===u||void 0===u?void 0:u.cookTime,"m")]}),Object(d.jsxs)("p",{children:[Object(d.jsx)(_e.a,{}),"".concat(null===u||void 0===u?void 0:u.prepTime,"m")]})]})})}),u.user&&Object(d.jsxs)("header",{children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:Object(d.jsx)(l.b,{to:"/recipe/".concat(u.userFriendlyId),children:u.title})}),Object(d.jsxs)("p",{children:[Object(d.jsx)(xe.b,{})," ",he(null===u||void 0===u||null===(r=u.likes)||void 0===r?void 0:r.length)]})]}),!p&&Object(d.jsx)("div",{className:"avatar",children:Object(d.jsx)(l.b,{to:"profiles/".concat(null===u||void 0===u||null===(i=u.user)||void 0===i?void 0:i._id),children:Object(d.jsx)("img",{src:u.user.imageUrl?u.user.imageUrl:"/images/default-avatar.png",alt:"".concat(u.user.username,"'s avatar'")})})})]}),Object(d.jsx)("div",{className:(null===u||void 0===u||null===(s=u.images[0])||void 0===s?void 0:s.base64)?"recipe__preview":"recipe__preview recipe__preview--nobg",style:{backgroundImage:"url(".concat((null===u||void 0===u||null===(o=u.images[0])||void 0===o?void 0:o.base64)?null===u||void 0===u||null===(c=u.images[0])||void 0===c?void 0:c.base64:"./images/default-recipe.png",")")}})]})},we=function(e){for(var t=e.setFilters,n=e.filters,a=(Object(b.f)(),[]),r=n.page-2<1?1:n.page-2;r<n.page+3&&r<=n.pageCount;r++)a.push(r);return Object(d.jsx)(d.Fragment,{children:a.map((function(e,a){return e===n.page?Object(d.jsx)("span",{style:{cursor:"default"},"aria-label":"Showing results for current page",className:"btn btn--no-bg btn--page btn--page-selected",children:e},a):Object(d.jsx)("button",{"aria-label":"Show results for page ".concat(e),className:"btn btn--no-bg btn--page",onClick:function(){t(Object(g.a)(Object(g.a)({},n),{},{page:e}))},children:e},a)}))})},Se=n(17),Ne=function(e){var t,n=e.filters,r=e.setFilters,i=e.onClickTag,s=Object(a.useState)(""),l=Object(u.a)(s,2),o=l[0],c=l[1];return Object(d.jsxs)("div",{className:"discover__header__tags",children:[Object(d.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),o&&!(null===n||void 0===n||null===(t=n.tags)||void 0===t?void 0:t.includes(o))&&(r(Object(g.a)(Object(g.a)({},n),{},{tags:[].concat(Object(Se.a)(null===n||void 0===n?void 0:n.tags),[o])})),c(""))},children:[Object(d.jsx)("input",{value:o,onChange:function(e){return c(e.target.value)},type:"text",className:"custom_input custom_input--border",placeholder:"Add tags..."}),Object(d.jsx)("input",{type:"submit",value:"+",className:"btn btn--solid btn--solid-blue"})]}),Object(d.jsx)("div",{children:null===n||void 0===n||null===(t=n.tags)||void 0===t?void 0:t.map((function(e,t){return Object(d.jsx)("button",{className:"btn btn--no-bg btn--tag",onClick:function(){return i(e)},children:e},t)}))})]})},ke=function(e){return e.showing?Object(d.jsx)("div",{className:"spinner",children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",background:"none",display:"block",shapeRendering:"auto",width:"5rem",height:"5rem"},viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:Object(d.jsx)("g",{transform:"translate(50 50)",children:Object(d.jsx)("g",{transform:"scale(0.7)",children:Object(d.jsxs)("g",{transform:"translate(-50 -50)",children:[Object(d.jsxs)("g",{children:[Object(d.jsx)("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"0.7575757575757576s"}),Object(d.jsx)("path",{fillOpacity:"0.8",fill:"#ea3f34",d:"M50 50L50 0A50 50 0 0 1 100 50Z"})]}),Object(d.jsxs)("g",{children:[Object(d.jsx)("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"1.0101010101010102s"}),Object(d.jsx)("path",{fillOpacity:"0.8",fill:"#f2982c",d:"M50 50L50 0A50 50 0 0 1 100 50Z",transform:"rotate(90 50 50)"})]}),Object(d.jsxs)("g",{children:[Object(d.jsx)("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"1.5151515151515151s"}),Object(d.jsx)("path",{fillOpacity:"0.8",fill:"#52a360",d:"M50 50L50 0A50 50 0 0 1 100 50Z",transform:"rotate(180 50 50)"})]}),Object(d.jsxs)("g",{children:[Object(d.jsx)("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"3.0303030303030303s"}),Object(d.jsx)("path",{fillOpacity:"0.8",fill:"#674794",d:"M50 50L50 0A50 50 0 0 1 100 50Z",transform:"rotate(270 50 50)"})]})]})})})})}):Object(d.jsx)(d.Fragment,{})},Te=function(){var e=Object(s.c)(),t=Object(b.g)(),n=Object(b.f)(),r=Object(a.useState)({sort:"rating",period:"alltime",serves:[1,12],prepTime:[0,120],cookTime:[0,240],tags:[],page:1,perPage:25,pageCount:1,query:""}),i=Object(u.a)(r,2),l=i[0],o=i[1],c=Object(a.useState)(!1),j=Object(u.a)(c,2),p=j[0],v=(j[1],Object(s.d)((function(e){return e.post.all})));Object(a.useEffect)((function(){var n,a=!0,r=[];try{var i;0!==(null===(i=r=t.search.replace("?tags=",""))||void 0===i?void 0:i.length)&&(r=r.split(","),l.tags=r)}catch(s){}return(null===l||void 0===l||null===(n=l.tags)||void 0===n?void 0:n.length)>=1?ee(me(l)).then((function(t){a&&o(Object(g.a)(Object(g.a)({},l),{},{pageCount:Number((null===t||void 0===t?void 0:t.pages)||1)})),e({type:"POST/SET_ALL",payload:t.result})})).catch((function(e){})):te(me(l,l.query)).then((function(t){a&&o(Object(g.a)(Object(g.a)({},l),{},{pageCount:Number((null===t||void 0===t?void 0:t.pages)||1)})),e({type:"POST/SET_ALL",payload:(null===t||void 0===t?void 0:t.result)||null})})),function(){a=!1}}),[t]);var m=function(t){var n;o(t),0!==(null===t||void 0===t||null===(n=t.tags)||void 0===n?void 0:n.length)?ee(me(t,t.query)).then((function(n){o(Object(g.a)(Object(g.a)({},t),{},{pageCount:Number(n.pages)||0})),e({type:"POST/SET_ALL",payload:n.result})})):te(me(t,t.query)).then((function(n){o(Object(g.a)(Object(g.a)({},t),{},{pageCount:Number(n.pages)||0})),e({type:"POST/SET_ALL",payload:n.result})}))};return Object(d.jsxs)(O.a.section,{className:"discover",transition:{duration:.25},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[Object(d.jsx)(ke,{showing:p}),Object(d.jsxs)("header",{className:"discover__header",children:[Object(d.jsxs)("h1",{"data-aos":"zoom-out",children:[Object(d.jsx)("span",{children:"discover"})," a taste"]}),Object(d.jsx)(je,{filters:l,setFilters:function(e){console.log(e),m(e)},setFilterState:function(e){o(e)}}),Object(d.jsx)(Ne,{filters:l,setFilters:function(e){var t;o(e),n.push("/discover?tags=".concat(null===e||void 0===e||null===(t=e.tags)||void 0===t?void 0:t.join(",")))},onClickTag:function(e){var t,a=null===l||void 0===l||null===(t=l.tags)||void 0===t?void 0:t.filter((function(t){return t!==e}));o(Object(g.a)(Object(g.a)({},l),{},{tags:a})),0===(null===a||void 0===a?void 0:a.length)?n.push("/discover"):n.push("/discover?tags=".concat(a.join(",")))}})]}),Object(d.jsx)("section",{className:"discover__grid",children:v&&v.map((function(e,t){return Object(d.jsx)(ye,{delay:t,object:e},t)}))}),Object(d.jsxs)("footer",{className:"discover__pagination",children:[Object(d.jsxs)("div",{className:"discover__pagination__pages",children:[Object(d.jsx)("div",{children:Object(d.jsx)(we,{setFilters:m,filters:l})}),Object(d.jsxs)("p",{children:[l.pageCount," pages total"]})]}),Object(d.jsx)("div",{className:"discover__pagination__perPage",children:Object(d.jsxs)("label",{className:"filters__perPage",children:[Object(d.jsxs)("select",{name:"perPage","aria-label":"Amount of items per page",onChange:function(e){return m(Object(g.a)(Object(g.a)({},l),{},{perPage:Number(e.target.value)}))},children:[Object(d.jsx)("option",{value:"25",children:"25"}),Object(d.jsx)("option",{value:"50",children:"50"}),Object(d.jsx)("option",{value:"100",children:"100"})]}),Object(d.jsx)("p",{children:"Items per page"})]})})]})]})},De=n(104),Ce=n.n(De),Ee=function(e){e.onSuccessFacebook;var t=e.onSuccessGoogle;return Object(d.jsx)("div",{children:Object(d.jsx)(Ce.a,{clientId:"544966638845-agilmeq086cka6f2cpi30d4559g9u4a4.apps.googleusercontent.com",onSuccess:t,className:"btn btn--no-border btn--no-bg","aria-label":"Login with a Google account"})})},Fe=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Le=function(e){var t=e.handleSignIn,n=Object(s.c)(),r=Object(b.f)(),i=Object(a.useState)(!1),o=Object(u.a)(i,2),c=o[0],j=o[1],p=Object(a.useState)({email:"",password:""}),m=Object(u.a)(p,2),f=m[0],O=m[1];return Object(d.jsx)("section",{className:"auth__login","data-aos":"fade-in","data-aos-delay":"150",children:Object(d.jsxs)("div",{className:"auth__container",children:[Object(d.jsxs)("form",{action:"",onSubmit:function(e){return t(e,f)},className:"auth__form",children:[Object(d.jsx)("input",{className:"custom_input custom_input--underline",type:"email",name:"email",id:"email",placeholder:"Email",value:f.email,onChange:function(e){return O(Object(g.a)(Object(g.a)({},f),{},{email:e.target.value}))}}),Object(d.jsxs)("label",{htmlFor:"password",children:[Object(d.jsx)("input",{className:"custom_input custom_input--underline",type:c?"text":"password",name:"password",id:"password",placeholder:"Password",value:f.password,onChange:function(e){return O(Object(g.a)(Object(g.a)({},f),{},{password:e.target.value}))}}),Object(d.jsx)("div",{onClick:function(){return j(!c)},children:c?Object(d.jsx)(v.b,{}):Object(d.jsx)(v.a,{})})]}),Object(d.jsx)("input",{type:"submit",className:"btn btn--pill",value:"Login"})]}),Object(d.jsx)(Ee,{onSuccessGoogle:function(e){var t=e.tokenId,a=e.profileObj;console.log(e),Ie({tokenId:t,imageUrl:a.imageUrl,googleId:a.googleId,email:a.email,username:a.name}).then((function(e){n({type:"AUTH/SIGN_IN",payload:Object(g.a)({},e)}),r.push("/discover")})).catch((function(e){console.log(e)}))}}),Object(d.jsx)(l.b,{to:"/forgot-password","aria-label":"Forgot password link",children:"Forgot your password?"}),Object(d.jsx)(l.b,{to:"/signup","aria-label":"Switch to signup form",children:"Don't have an account? Sign up"})]})})},Ue=function(e){var t=e.handleSignUp,n=Object(s.c)(),r=Object(b.f)(),i=Object(a.useState)(!1),o=Object(u.a)(i,2),c=o[0],j=o[1],p=Object(a.useState)({username:"",email:"",password:"",repeatPassword:""}),m=Object(u.a)(p,2),f=m[0],O=m[1];return Object(d.jsx)("section",{className:"auth__signup","data-aos":"fade-in","data-aos-delay":"150",children:Object(d.jsxs)("div",{className:"auth__container",children:[Object(d.jsxs)("form",{action:"",onSubmit:function(e){return t(e,f)},className:"auth__form",children:[Object(d.jsx)("input",{className:"custom_input custom_input--underline",type:"text",name:"username",id:"username",placeholder:"Username",value:f.username,onChange:function(e){return O(Object(g.a)(Object(g.a)({},f),{},{username:e.target.value}))}}),Object(d.jsx)("input",{className:"custom_input custom_input--underline",type:"email",name:"email",id:"email",placeholder:"Email",value:f.email,onChange:function(e){return O(Object(g.a)(Object(g.a)({},f),{},{email:e.target.value}))}}),Object(d.jsxs)("label",{htmlFor:"password",children:[Object(d.jsx)("input",{className:"custom_input custom_input--underline",type:c?"text":"password",name:"password",id:"password",placeholder:"Password",value:f.password,onChange:function(e){return O(Object(g.a)(Object(g.a)({},f),{},{password:e.target.value}))}}),Object(d.jsx)("div",{onClick:function(){return j(!c)},children:c?Object(d.jsx)(v.b,{}):Object(d.jsx)(v.a,{})})]}),Object(d.jsxs)("label",{htmlFor:"repeatPassword",children:[Object(d.jsx)("input",{className:"custom_input custom_input--underline",type:c?"text":"password",name:"repeatPassword",id:"repeatPassword",placeholder:"Repeat Password",value:f.repeatPassword,onChange:function(e){return O(Object(g.a)(Object(g.a)({},f),{},{repeatPassword:e.target.value}))}}),Object(d.jsx)("div",{onClick:function(){return j(!c)},children:c?Object(d.jsx)(v.b,{}):Object(d.jsx)(v.a,{})})]}),Object(d.jsx)("input",{type:"submit",className:"btn btn--pill",value:"Sign up"})]}),Object(d.jsx)("p",{children:"Or..."}),Object(d.jsx)(Ee,{onSuccessGoogle:function(e){var t=e.tokenId,a=e.profileObj;console.log(e),Ie({tokenId:t,imageUrl:a.imageUrl,googleId:a.googleId,email:a.email,username:a.name}).then((function(e){n({type:"AUTH/SIGN_IN",payload:Object(g.a)({},e)}),r.push("/discover")})).catch((function(e){console.log(e)}))}}),Object(d.jsx)(l.b,{to:"/login","aria-label":"Switch to login form",children:"Already have an account? Login"})]})})},Pe=n(57),Me=n(105),Ae=function(e){var t=e.title,n=e.message,a=e.show?"alert"===t.toLowerCase()?"logger logger--showing logger--alert":"error"===t.toLowerCase()&&"logger logger--showing logger--error":"logger";return Object(d.jsxs)("div",{className:a,children:[Object(d.jsxs)("header",{"aria-label":t,className:"logger__title",children:["alert"===t.toLowerCase()&&Object(d.jsx)(Me.a,{}),"error"===t.toLowerCase()&&Object(d.jsx)(Pe.a,{}),t]}),Object(d.jsx)("summary",{className:"logger__message",children:n})]})},He=function(){var e=Object(b.f)(),t=Object(b.g)(),n=Object(s.c)(),r=Object(a.useState)(""),i=Object(u.a)(r,2),l=i[0],o=i[1],c=Object(a.useState)(""),j=Object(u.a)(c,2),p=j[0],v=j[1],m=Object(a.useState)(!1),f=Object(u.a)(m,2),h=f[0],g=f[1],x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;h||(o(e),v(t),g(!0),setTimeout((function(){g(!1)}),n))},w=function(){var e=Object(y.a)(_.a.mark((function e(t,a){var r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(null===a||void 0===a?void 0:a.email)&&(null===a||void 0===a?void 0:a.username)&&(null===a||void 0===a?void 0:a.password)&&(null===a||void 0===a?void 0:a.repeatPassword)){e.next=4;break}return x("Error","Please fill in required details."),e.abrupt("return");case 4:return e.prev=4,e.next=7,Re(a);case 7:l=e.sent,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0),x("Error",null===e.t0||void 0===e.t0?void 0:e.t0.message);case 14:(null===(r=l)||void 0===r?void 0:r.verificationSent)&&x("Alert","Verification email sent to ".concat(l.user.email),3500),(null===(i=l)||void 0===i?void 0:i.error)?x("Error",null===(s=l)||void 0===s?void 0:s.error):n({payload:l,type:"AUTH/SIGN_UP"});case 16:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var t=Object(y.a)(_.a.mark((function t(a,r){var i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.preventDefault(),(null===r||void 0===r?void 0:r.email)&&(null===r||void 0===r?void 0:r.password)){t.next=5;break}return x("Error","Please fill in the required details."),t.abrupt("return");case 5:return t.next=7,Fe(r);case 7:(i=t.sent).error?x("Error",i.error):(n({payload:i,type:"AUTH/SIGN_IN"}),e.push("/discover")),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(d.jsx)(O.a.section,{className:"auth",children:Object(d.jsxs)("div",{className:"auth__wrapper",children:[Object(d.jsx)(Ae,{title:l,message:p,show:h}),"/login"===t.pathname&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("header",{children:Object(d.jsx)("h1",{"data-aos":"zoom-out",children:"Login"})}),Object(d.jsx)(Le,{handleSignIn:S})]}),"/signup"===t.pathname&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("header",{children:Object(d.jsx)("h1",{"data-aos":"zoom-out",children:"Sign up"})}),Object(d.jsx)(Ue,{handleSignUp:w})]})]})})},Ge=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(y.a)(_.a.mark((function e(t,n){var a,r,i,s,l,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G(n,t);case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message)||(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Be=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{error:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Xe=n(106),$e=function(e){var t=e.modal,n=e.closeModal;return Object(d.jsxs)("div",{className:t.showing?"modal modal--active":"modal",children:[Object(d.jsxs)("header",{className:"modal__header",children:[Object(d.jsx)("h1",{children:t.title}),Object(d.jsx)("button",{className:"btn btn--no-bg","aria-label":"Close",children:Object(d.jsx)(Xe.a,{onClick:function(){return n()}})})]}),Object(d.jsx)("div",{className:"modal__body",children:t.children&&t.children.map((function(e,t){return Object(d.jsxs)("div",{className:"modal__body__user",children:[Object(d.jsx)("img",{src:e.imageUrl?e.imageUrl:"/images/default-avatar.png",alt:"Picture of ".concat(e.username)}),Object(d.jsx)(l.b,{to:"/profiles/".concat(e._id),children:e.username})]},t)}))})]})},et=function(e){var t=e.profile,n=Object(a.useState)([]),r=Object(u.a)(n,2),i=r[0],s=r[1];return Object(a.useEffect)((function(){if(null===t||void 0===t?void 0:t._id){var e=!0;return Ye(null===t||void 0===t?void 0:t._id).then((function(t){e&&s(Object(Se.a)(t.result))})).catch((function(e){})),function(){return e=!1}}}),[t]),Object(d.jsx)(d.Fragment,{children:i.map((function(e,t){return Object(d.jsx)(ye,{delay:t,object:e,isOnProfile:!0},t)}))})},tt=function(e){var t,n,r,i,o,c,j=e.id,p=Object(s.c)(),m=Object(b.f)(),f=Object(a.useState)({showing:!1,title:"",children:[]}),h=Object(u.a)(f,2),x=h[0],w=h[1],S=Object(s.d)((function(e){return e.user.single}))||null,N=Object(s.d)((function(e){return e.auth.user}))||null;Object(a.useEffect)((function(){Ge(j).then((function(e){(null===e||void 0===e?void 0:e.error)||(p({type:"USER/SET_USER",payload:e}),We(j).then((function(e){p({type:"USER/SET_USER_FOLLOWERS",payload:null===e||void 0===e?void 0:e.result})})),Je(j).then((function(e){p({type:"USER/SET_USER_FOLLOWING",payload:null===e||void 0===e?void 0:e.result})})))}))}),[]);var k=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be(t);case 2:n=e.sent,a=n.user,r=n.target,console.log(a),p({type:"AUTH/EDIT_STORED_USER",payload:{user:a}}),p({type:"USER/EDIT_USER",payload:r});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke(t);case 2:n=e.sent,a=n.user,r=n.target,console.log(a),p({type:"AUTH/EDIT_STORED_USER",payload:{user:a}}),p({type:"USER/EDIT_USER",payload:r});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===N||void 0===N?void 0:N.blockList.includes(null===S||void 0===S?void 0:S._id))){e.next=6;break}return e.next=3,Ve(t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,qe(t);case 8:e.t0=e.sent;case 9:n=e.t0,a=n.user,p({type:"AUTH/EDIT_STORED_USER",payload:{user:a}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)($e,{closeModal:function(){w(Object(g.a)(Object(g.a)({},x),{},{showing:!1}))},modal:x}),Object(d.jsx)(O.a.section,{className:"profile",transition:{duration:.25},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:S&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"profile__card",children:[Object(d.jsxs)("header",{className:"profile__card__header",children:[Object(d.jsx)("div",{className:"profile__card__header__avatar",children:Object(d.jsx)("img",{src:(null===S||void 0===S?void 0:S.imageUrl)?null===S||void 0===S?void 0:S.imageUrl:"/images/default-avatar.png",alt:"Picture of ".concat(null===S||void 0===S?void 0:S.username)})}),Object(d.jsxs)("div",{className:"profile__card__header__details",children:[Object(d.jsx)("h1",{children:null===S||void 0===S?void 0:S.username}),Object(d.jsxs)("span",{className:"score",children:[null===S||void 0===S?void 0:S.score," Score"]}),Object(d.jsxs)("div",{className:"profile__card__header__details__stats",children:[Object(d.jsxs)("button",{"aria-label":0===(null===S||void 0===S||null===(t=S.followers)||void 0===t?void 0:t.length)?"0 followers":"View ".concat(null===S||void 0===S||null===(n=S.followers)||void 0===n?void 0:n.length," followers"),className:"btn btn--no-bg",onClick:function(){return function(){var e,t,n=!1;n=0!==(null===S||void 0===S||null===(e=S._followers)||void 0===e?void 0:e.length)&&0!==(null===S||void 0===S||null===(t=S.followers)||void 0===t?void 0:t.length),w(Object(g.a)(Object(g.a)({},x),{},{title:"Followers",showing:n,children:null===S||void 0===S?void 0:S._followers}))}()},children:[he(null===S||void 0===S||null===(r=S.followers)||void 0===r?void 0:r.length)," Followers"]}),Object(d.jsxs)("button",{className:"btn btn--no-bg",onClick:function(){return function(){var e,t=!1;t=0!==(null===S||void 0===S||null===(e=S._following)||void 0===e?void 0:e.length),w(Object(g.a)(Object(g.a)({},x),{},{title:"Following",showing:t,children:null===S||void 0===S?void 0:S._following}))}()},"aria-label":0===(null===S||void 0===S||null===(i=S.following)||void 0===i?void 0:i.length)?"0 following":"View ".concat(null===S||void 0===S||null===(o=S.following)||void 0===o?void 0:o.length," following"),children:[he(null===S||void 0===S||null===(c=S.following)||void 0===c?void 0:c.length)," Following"]})]})]})]}),N&&(null===N||void 0===N?void 0:N._id)!==j&&Object(d.jsxs)("section",{className:"profile__card__actions",children:[Object(d.jsxs)("button",{className:"btn btn--pill","aria-label":(null===S||void 0===S?void 0:S.followers.includes(null===N||void 0===N?void 0:N._id))?"Unfollow this user":"Follow this user",onClick:function(){return(null===S||void 0===S?void 0:S.followers.includes(null===N||void 0===N?void 0:N._id))?T(j):k(j)},children:[(null===S||void 0===S?void 0:S.followers.includes(null===N||void 0===N?void 0:N._id))?Object(d.jsx)(v.g,{}):Object(d.jsx)(v.f,{}),(null===S||void 0===S?void 0:S.followers.includes(null===N||void 0===N?void 0:N._id))?"Unfollow":"Follow"]}),Object(d.jsxs)("button",{className:"btn btn--no-bg btn--no-bg--red","aria-label":(null===N||void 0===N?void 0:N.blockList.includes(null===S||void 0===S?void 0:S._id))?"Unblock this user":"Block this user",onClick:function(){return D(j)},children:[(null===N||void 0===N?void 0:N.blockList.includes(null===S||void 0===S?void 0:S._id))?Object(d.jsx)(ge.c,{}):Object(d.jsx)(ge.a,{}),(null===N||void 0===N?void 0:N.blockList.includes(null===S||void 0===S?void 0:S._id))?"Unblock":"Block"]})]}),(null===N||void 0===N?void 0:N._id)===j&&Object(d.jsxs)("section",{className:"profile__card__actions",children:[Object(d.jsxs)("button",{className:"btn btn--no-bg btn--no-bg--red","aria-label":"Logout",onClick:function(){p({type:"AUTH/LOG_OUT"}),m.push("/discover")},children:[Object(d.jsx)(v.c,{}),"Logout"]}),Object(d.jsxs)(l.b,{className:"btn btn--pill btn--small-margin",to:"/settings","aria-label":"Message this user",children:[Object(d.jsx)(Pe.b,{}),"Settings"]})]}),Object(d.jsx)("article",{className:"profile__card__bio","aria-label":"Profile bio",children:null===S||void 0===S?void 0:S.bio})]}),Object(d.jsx)("section",{className:"profile__activity",children:Object(d.jsx)(et,{profile:S})})]})})]})},nt=n(107),at=n.n(nt),rt=function(e){for(var t=e.content,n=e.className,a=at.a.parse(t||""),r=5;r>0;r--){var i="<h".concat(r);a=a.replace(new RegExp(i,"g"),"<h".concat(r+1))}return Object(d.jsx)("div",{className:n,dangerouslySetInnerHTML:{__html:a}})},it=n(36),st=function(e){var t=e.onClick,n=e.type;if(!["delete","edit","like","liked","report"].includes(n))throw new Error('Invalid type "'.concat(n,'" in Button.jsx'));var a="btn btn--round ",r="";return"delete"===n?(a+="btn--red",r="Delete post"):"edit"===n?(a+="btn--blue",r="Edit post"):"like"===n||"liked"===n?"liked"===n?(a+="btn--green btn--heart btn--heart-liked",r="Unlike post"):(a+="btn--green btn--heart",r="Like post"):"report"===n&&(a+="btn--report btn--red",r="Report post"),Object(d.jsxs)("button",{onClick:t,className:a,"aria-label":r,alt:r,children:["delete"===n&&Object(d.jsx)(it.a,{}),"edit"===n&&Object(d.jsx)(it.b,{}),"liked"===n&&Object(d.jsx)(xe.b,{}),"like"===n&&Object(d.jsx)(xe.a,{}),"report"===n&&Object(d.jsx)(d.Fragment,{})]})},lt=function(e){var t,n,a,r,i=e.comment,l=e.userId,o=Object(s.c)(),c=function(){var e=Object(y.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(null===i||void 0===i?void 0:i._id);case 2:(t=e.sent).result?o({type:"POST/COMMENT_SINGLE/REMOVE",payload:t.result}):t.error&&console.log(t.error);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"comments__comment",children:[l===(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t._id)&&Object(d.jsx)("button",{className:"btn btn--red btn--round","aria-label":"Remove your comment",onClick:c,children:Object(d.jsx)(it.a,{})}),Object(d.jsxs)("header",{children:[Object(d.jsx)("img",{src:null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.imageUrl}),Object(d.jsx)("p",{children:null===i||void 0===i||null===(a=i.user)||void 0===a?void 0:a.username})]}),Object(d.jsx)("p",{dangerouslySetInnerHTML:{__html:null===i||void 0===i||null===(r=i.message)||void 0===r?void 0:r.replace(/\n/g,"<br>")}})]})},ot=function(e){var t=e.comments,n=e.postId,r=e.user,i=Object(s.c)(),l=Object(a.useState)(""),o=Object(u.a)(l,2),c=o[0],j=o[1],b=function(){var e=Object(y.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(n,c);case 2:(t=e.sent).result&&(i({type:"POST/COMMENT_SINGLE",payload:Object(g.a)(Object(g.a)({},t.result),{},{user:{imageUrl:r.imageUrl,score:r.score,username:r.username,_id:r._id}})}),j(""));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"comments",children:[(null===r||void 0===r?void 0:r._id)&&Object(d.jsx)("div",{className:"comments__field",children:Object(d.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(d.jsx)("textarea",{placeholder:"Add a comment...",className:"custom_input custom_input--comment-field",name:"comment",value:c,onChange:function(e){return j(e.target.value)}}),Object(d.jsx)("input",{type:"submit",value:"Post",onClick:b,className:"btn btn--solid btn--solid-blue"})]})}),t.map((function(e,t){return Object(d.jsx)(lt,{comment:e,userId:null===r||void 0===r?void 0:r._id},t)}))]})},ct=function(e){var t,n,r,i,o,c,j,p,v,m,f,h,x,w=e.id,S=Object(s.c)(),N=Object(b.f)(),k=Object(s.d)((function(e){return e.post.single})),T=Object(s.d)((function(e){return e.auth.user})),D=Object(a.useState)(!1),C=Object(u.a)(D,2),E=C[0],F=C[1],R=Object(a.useState)(""),I=Object(u.a)(R,2),L=I[0],U=I[1],P=Object(a.useState)(""),M=Object(u.a)(P,2),A=M[0],H=M[1];return Object(a.useEffect)((function(){ne(w).then((function(e){S({type:"POST/SET_POST",payload:null===e||void 0===e?void 0:e.result[0]})})).catch((function(e){return console.log(e)}))}),[]),console.log((null===k||void 0===k||null===(t=k.user)||void 0===t?void 0:t._id)===(null===T||void 0===T?void 0:T._id)),Object(d.jsx)(O.a.section,{className:"fullrecipe",transition:{duration:.25},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:k?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Ae,{show:E,title:L,message:A}),(null===k||void 0===k||null===(n=k.user)||void 0===n?void 0:n._id)===(null===T||void 0===T?void 0:T._id)&&Object(d.jsxs)("section",{className:"fullrecipe__editarea",children:[Object(d.jsx)(st,{type:"delete",onClick:Object(y.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(k._id);case 2:t=e.sent,console.log(t),t.error?(H(t.error),U("Error"),F(!0)):(H(t.message),U("Alert"),F(!0)),setTimeout((function(){F(!1),N.goBack()}),2e3);case 6:case"end":return e.stop()}}),e)})))}),Object(d.jsx)(st,{type:"edit",onClick:function(){S({type:"EDIT_FORM/SET",payload:{formData:Object(g.a)(Object(g.a)({},k),{},{images:null}),files:Object(Se.a)(k.images)}}),N.push("/edit")}})]}),Object(d.jsxs)("header",{className:"fullrecipe__header",children:[Object(d.jsxs)("div",{className:"fullrecipe__header__info",children:[Object(d.jsx)("h1",{children:k.title}),k.serves&&Object(d.jsxs)("span",{children:[Object(d.jsx)("span",{children:k.serves})," Serves"]}),k.prepTime&&Object(d.jsxs)("span",{children:[Object(d.jsxs)("span",{children:[k.prepTime,"min"]})," Prep time"]}),String(k.cookTime)&&Object(d.jsxs)("span",{children:[Object(d.jsxs)("span",{children:[k.cookTime,"min"]})," Cook time"]})]}),Object(d.jsxs)(l.b,{to:"/profiles/".concat(null===k||void 0===k||null===(r=k.user)||void 0===r?void 0:r._id),className:"fullrecipe__header__user",children:[Object(d.jsx)("p",{className:"user-username",children:null===k||void 0===k||null===(i=k.user)||void 0===i?void 0:i.username}),Object(d.jsx)("p",{className:"user-score",children:null===k||void 0===k||null===(o=k.user)||void 0===o?void 0:o.score}),Object(d.jsx)("img",{src:(null===k||void 0===k||null===(c=k.user)||void 0===c?void 0:c.imageUrl)?null===k||void 0===k||null===(j=k.user)||void 0===j?void 0:j.imageUrl:"/images/default-avatar.png",alt:"".concat(null===k||void 0===k||null===(p=k.user)||void 0===p?void 0:p.username,"'s avatar")})]})]}),Object(d.jsxs)("section",{className:"fullrecipe__interactions",children:[(null===T||void 0===T?void 0:T._id)&&(null===k||void 0===k||null===(v=k.user)||void 0===v?void 0:v._id)===(null===T||void 0===T?void 0:T._id)&&Object(d.jsx)("div",{className:"fullrecipe__interactions__stats",children:Object(d.jsxs)("span",{className:"likes",children:[Object(d.jsx)(xe.b,{}),he(null===k||void 0===k||null===(m=k.likes)||void 0===m?void 0:m.length)," likes"]})}),(null===k||void 0===k||null===(f=k.user)||void 0===f?void 0:f._id)!==(null===T||void 0===T?void 0:T._id)&&Object(d.jsx)("div",{className:"fullrecipe__interactions__controls",children:Object(d.jsxs)("div",{children:[Object(d.jsx)(st,{onClick:Object(y.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(k._id);case 2:if(!(t=e.sent).error){e.next=9;break}return U("Error"),H(t.error),F(!0),setTimeout((function(){F(!1)}),2e3),e.abrupt("return");case 9:0!==t.result?S({type:"POST/LIKE_SINGLE",payload:t.result}):S({type:"POST/LIKE_SINGLE/REMOVE",payload:T._id});case 10:case"end":return e.stop()}}),e)}))),type:k.likes.includes(null===T||void 0===T?void 0:T._id)?"liked":"like"}),Object(d.jsx)("p",{children:he(null===k||void 0===k||null===(h=k.likes)||void 0===h?void 0:h.length)})]})})]}),Object(d.jsx)("ul",{className:"fullrecipe__tags",children:k.tags.map((function(e,t){return Object(d.jsx)("li",{children:Object(d.jsxs)(l.b,{to:"/discover?tags=".concat(e),children:["#",e]})},t)}))}),Object(d.jsx)("ul",{className:"fullrecipe__ingredients",children:null===k||void 0===k||null===(x=k.ingredients)||void 0===x?void 0:x.map((function(e,t){return Object(d.jsx)("li",{children:e},t)}))}),Object(d.jsx)(rt,{className:"fullrecipe__info",content:Oe(k.content,k.images)}),Object(d.jsx)(rt,{className:"fullrecipe__method",content:Oe(k.method,k.images)}),Object(d.jsx)(ot,{comments:k.comments,postId:k._id,user:T||null})]}):Object(d.jsx)(ke,{})})},ut=n(58),dt=n(59),jt=n(62),bt=n(61),pt=n(60),vt=function(e){var t=e.files,n=e.onFilesChange,r=Object(a.useRef)(),i=Object(a.useState)({open:!1,file:null}),s=Object(u.a)(i,2),l=s[0],o=s[1];return Object(a.useEffect)((function(){l.open&&(r.current.focus(),r.current.select(r.current.value.length))}),[l]),Object(d.jsxs)("section",{className:"create__filepreview",children:[Object(d.jsxs)("div",{className:"create__filepreview__modal create__filepreview__modal--showing",style:{display:l.open&&l.file?"flex":"none"},children:[Object(d.jsxs)("label",{htmlFor:"refName",children:["Give a name to this image ",Object(d.jsx)("span",{children:"*"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{id:"refName",ref:r,name:"refName",type:"text",placeholder:"Reference name",className:"custom_input custom_input--underline",onKeyPress:function(e){if("Enter"===e.key||"NumpadReturn"===e.key){var a=t.map((function(t){return t===l.file&&(t=Object(g.a)(Object(g.a)({},t),{},{name:e.target.value})),t}));n(a),o({open:!1,file:null})}}}),Object(d.jsx)("button",{className:"btn",onClick:function(){if(l.open||l.file){var e=t.map((function(e){return e===l.file&&(e=Object(g.a)(Object(g.a)({},e),{},{name:r.current.value})),e}));n(e),o({open:!1,file:null}),r.current.value=""}},children:"Save"})]}),Object(d.jsx)("span",{children:"* A reference name makes it easier to position an image within your recipe content"})]}),t.map((function(e,a){return Object(d.jsxs)("button",{"aria-label":"Rename this image",className:"create__filepreview__file",onContextMenu:function(a){return function(e,a){e.preventDefault();var r=[];t.map((function(e){e!==a&&r.push(e)})),n(r)}(a,e)},onClick:function(){r.current.value=e.name,o({open:!0,file:e})},children:[Object(d.jsxs)("header",{children:[e.name.substring(0,15),e.name.length>15&&"..."]}),Object(d.jsx)("img",{src:e.base64,alt:e.name})]},a)}))]})},mt=function(e){var t,n,a,r,i,s,o,c,u,j,b,p,v,m=e.state;return console.log(m),Object(d.jsxs)("section",{className:"fullrecipe",children:[Object(d.jsx)("header",{className:"fullrecipe__header",children:Object(d.jsxs)("div",{className:"fullrecipe__header__info",children:[Object(d.jsx)("h1",{children:null===m||void 0===m||null===(t=m.formData)||void 0===t?void 0:t.title}),(null===m||void 0===m||null===(n=m.formData)||void 0===n?void 0:n.serves)&&Object(d.jsxs)("span",{children:[Object(d.jsx)("span",{children:null===m||void 0===m||null===(a=m.formData)||void 0===a?void 0:a.serves})," Serves"]}),(null===m||void 0===m||null===(r=m.formData)||void 0===r?void 0:r.prepTime)&&Object(d.jsxs)("span",{children:[Object(d.jsxs)("span",{children:[null===m||void 0===m||null===(i=m.formData)||void 0===i?void 0:i.prepTime,"min"]})," Prep time"]}),(null===m||void 0===m||null===(s=m.formData)||void 0===s?void 0:s.cookTime)&&Object(d.jsxs)("span",{children:[Object(d.jsxs)("span",{children:[null===m||void 0===m||null===(o=m.formData)||void 0===o?void 0:o.cookTime,"min"]})," Cook time"]})]})}),Object(d.jsx)("ul",{className:"fullrecipe__tags",children:null===m||void 0===m||null===(c=m.formData)||void 0===c||null===(u=c.tags)||void 0===u?void 0:u.map((function(e,t){return Object(d.jsx)("li",{children:Object(d.jsxs)(l.b,{to:"",children:["#",e]})},t)}))}),Object(d.jsx)("ul",{className:"fullrecipe__ingredients",children:null===m||void 0===m||null===(j=m.formData)||void 0===j||null===(b=j.ingredients)||void 0===b?void 0:b.map((function(e,t){return Object(d.jsx)("li",{children:e},t)}))}),Object(d.jsx)(rt,{className:"fullrecipe__info",content:Oe(null===m||void 0===m||null===(p=m.formData)||void 0===p?void 0:p.content,null===m||void 0===m?void 0:m.files)}),Object(d.jsx)(rt,{className:"fullrecipe__method",content:Oe(null===m||void 0===m||null===(v=m.formData)||void 0===v?void 0:v.method,null===m||void 0===m?void 0:m.files)})]})},ft=function(e){var t=e.ingredients,n=e.onClickIngredient;return Object(d.jsx)("div",{className:"list list--ingredients",children:t.map((function(e,t){return Object(d.jsx)("button",{className:"list__item btn btn--no-bg","aria-label":"Remove this item.",onClick:function(){return n(e)},children:e},t)}))})},Ot=function(e){var t=e.tags,n=e.onClickTag;return Object(d.jsx)("div",{className:"list list--tags",children:t.map((function(e,t){return Object(d.jsx)("button",{className:"list__item btn btn--no-bg","aria-label":"Remove this item.",onClick:function(){return n(e)},children:e},t)}))})},ht=function(e){var t=e.buttons,n=e.title,a=e.message;return e.showing?Object(d.jsxs)("div",{className:"confirmationModal",children:[Object(d.jsx)("header",{children:Object(d.jsx)("h1",{children:n})}),Object(d.jsx)("section",{children:a}),Object(d.jsx)("footer",{children:t})]}):Object(d.jsx)(d.Fragment,{})},gt=function(e){Object(jt.a)(n,e);var t=Object(bt.a)(n);function n(){var e;return Object(ut.a)(this,n),(e=t.call(this)).state={user:null,formData:{title:"",serves:"",prepTime:"",cookTime:"",ingredients:[],tags:[],content:"",method:""},files:[],posted:!1,modalShowing:!1,logger:{message:"",title:"",showing:!1}},e.ingredientsRef=Object(a.createRef)(),e.tagsRef=Object(a.createRef)(),e.handleFiles=function(){var t=Object(y.a)(_.a.mark((function t(n){var a,r,i,s,l,o,c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.target.files,r=[],i=1,s=0;case 4:if(!(s<(null===a||void 0===a?void 0:a.length))){t.next=18;break}if(!((l=a[s]).size>=1e7)){t.next=8;break}return t.abrupt("return");case 8:if(["image/png","image/jpeg","image/webp"].includes(l.type)){t.next=10;break}return t.abrupt("continue",15);case 10:return o="image-".concat(e.state.files.length+i++),t.next=13,l.arrayBuffer();case 13:c=t.sent,r.push({name:o,type:l.type,size:l.size,lastModified:l.lastModified,base64:"data:".concat(l.type,";base64,").concat(ve(c)),originalFile:l});case 15:s++,t.next=4;break;case 18:i-1<(null===a||void 0===a?void 0:a.length)&&(e.setState(Object(g.a)(Object(g.a)({},e.state),{},{logger:{message:"Some files have been removed as they are not image files.",title:"Error",showing:!0}})),setTimeout((function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{logger:Object(g.a)(Object(g.a)({},e.state.logger),{},{showing:!1})}))}),3e3)),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{files:[].concat(Object(Se.a)(e.state.files),r)}));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addIngredient=function(){if(e.state.formData.ingredients.length>=30)return e.setState(Object(g.a)(Object(g.a)({},e.state),{},{logger:{title:"Error",message:"Maximum reached",showing:!0}})),void setTimeout((function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{logger:Object(g.a)(Object(g.a)({},e.state.logger),{},{showing:!1})}))}),2e3);if(e.ingredientsRef){var t=e.ingredientsRef.current.value;t.length>50||e.state.formData.ingredients.includes(t)||!t||(e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:Object(g.a)(Object(g.a)({},e.state.formData),{},{ingredients:[].concat(Object(Se.a)(e.state.formData.ingredients),[t])})})),e.ingredientsRef.current.value="")}},e.addTag=function(){if(e.state.formData.tags.length>=6)return e.setState(Object(g.a)(Object(g.a)({},e.state),{},{logger:{title:"Error",message:"Maximum reached",showing:!0}})),void setTimeout((function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{logger:Object(g.a)(Object(g.a)({},e.state.logger),{},{showing:!1})}))}),2e3);if(e.tagsRef){var t=e.tagsRef.current.value;t.length>30||e.state.formData.tags.includes(t)||!t||(e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:Object(g.a)(Object(g.a)({},e.state.formData),{},{tags:[].concat(Object(Se.a)(e.state.formData.tags),[t])})})),e.tagsRef.current.value="")}},e.post=Object(y.a)(_.a.mark((function t(){var n,a,r,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ae({formData:null===(n=e.state)||void 0===n?void 0:n.formData,files:null===(a=e.state)||void 0===a?void 0:a.files});case 3:if(null===(s=t.sent)||void 0===s||null===(r=s.post)||void 0===r?void 0:r.userFriendlyId){t.next=8;break}return e.setState(Object(g.a)(Object(g.a)({},e.state),{},{logger:{title:"Error",message:null===s||void 0===s?void 0:s.error,showing:!0}})),setTimeout((function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{logger:Object(g.a)(Object(g.a)({},e.state.logger),{},{showing:!1})}))}),2e3),t.abrupt("return");case 8:e.setState(Object(g.a)(Object(g.a)({},e.state),{},{posted:!0})),window.removeEventListener("beforeunload",e.setStorage),localStorage.removeItem("post_form"),e.props.setStore({formData:null,files:[]}),e.props.history.push("/recipe/".concat(null===s||void 0===s||null===(i=s.post)||void 0===i?void 0:i.userFriendlyId)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])}))),e.setStorage=function(){var t,n;localStorage.setItem("post_form",JSON.stringify({formData:null===(t=e.state)||void 0===t?void 0:t.formData,files:null===(n=e.state)||void 0===n?void 0:n.files}))},e}return Object(dt.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.setStorage),this.setState(this.props)}},{key:"componentWillUnmount",value:function(){var e;(null===(e=this.state)||void 0===e?void 0:e.posted)||(window.removeEventListener("beforeunload",this.setStorage),this.props.setStore(this.state))}},{key:"render",value:function(){var e,t,n,a,r,i,s,l,o,c=this;return Object(d.jsxs)(O.a.section,{transition:{duration:.25},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"create",children:[Object(d.jsx)(Ae,{message:null===(e=this.state)||void 0===e||null===(t=e.logger)||void 0===t?void 0:t.message,title:null===(n=this.state)||void 0===n||null===(a=n.logger)||void 0===a?void 0:a.title,show:null===(r=this.state)||void 0===r||null===(i=r.logger)||void 0===i?void 0:i.showing}),Object(d.jsx)(ht,{showing:this.state.modalShowing,title:"Format Syntax",message:Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("ul",{children:[Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{children:"![image-name]"})," Insert an uploaded image"]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{children:"**text**"})," Bold text"]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{children:"*text*"})," Italic text"]}),Object(d.jsxs)("li",{children:[Object(d.jsxs)("span",{children:["# Heading 1",Object(d.jsx)("br",{}),"## Heading 2"]}),"Headings (Maximum depth = 6)"]}),Object(d.jsxs)("li",{children:[Object(d.jsxs)("span",{children:["- List Item 1",Object(d.jsx)("br",{}),"- List Item 2"]}),"Bullet-point list"]}),Object(d.jsxs)("li",{children:[Object(d.jsxs)("span",{children:["1. List Item 1",Object(d.jsx)("br",{}),"2. List Item 2"]}),"Numbered list"]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{children:"---"}),"Horizontal line"]}),Object(d.jsxs)("li",{children:[Object(d.jsxs)("span",{children:["| Col1 | Col2 |",Object(d.jsx)("br",{}),"| :---: | :---: |",Object(d.jsx)("br",{}),"| Cell1 | Cell2 |",Object(d.jsx)("br",{}),"| Cell3 | Cell4 |"]}),"A table with centered columns. Use the following under column definitions to change alignment:",Object(d.jsx)("br",{}),":--- will left-align text.",Object(d.jsx)("br",{}),":---: will center text.",Object(d.jsx)("br",{}),"---: will right-align."]})]})}),buttons:Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{className:"btn btn--pill btn--pill-inverse",onClick:function(){return c.setState(Object(g.a)(Object(g.a)({},c.state),{},{modalShowing:!c.state.modalShowing}))},children:"Okay"})})}),Object(d.jsxs)("header",{children:[Object(d.jsxs)("h1",{children:[!(null===(s=this.props)||void 0===s?void 0:s.user)&&"sign up to"," create a recipe"]}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:"- Use up to 6 tags to gain a wider audience."}),Object(d.jsx)("li",{children:"- Add up to 30 ingredients."}),Object(d.jsx)("li",{children:"- Remove a tag or ingredient by clicking on it."}),Object(d.jsx)("li",{children:"- Upload images and name them to control where they appear in the recipe."}),Object(d.jsx)("li",{children:"- Format recipe information and method with markdown syntax."})]}),(null===(l=this.props)||void 0===l?void 0:l.user)&&Object(d.jsx)("button",{className:"btn btn--pill btn--pill-inverse",onClick:function(){return c.setState(Object(g.a)(Object(g.a)({},c.state),{},{modalShowing:!c.state.modalShowing}))},children:"View Formatting Help"})]}),(null===(o=this.props)||void 0===o?void 0:o.user)?Object(d.jsxs)("div",{className:"create__container",children:[Object(d.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),c.post()},className:"create__form",children:[Object(d.jsx)("label",{htmlFor:"title",className:"label label--title",children:Object(d.jsx)("input",{className:"custom_input custom_input--underline",type:"text",name:"title",id:"title",placeholder:"Title",onKeyDownCapture:function(e){return"Enter"===e.key&&e.preventDefault()},value:this.state.formData.title,onChange:function(e){return c.setState(Object(g.a)(Object(g.a)({},c.state),{},{formData:Object(g.a)(Object(g.a)({},c.state.formData),{},{title:e.target.value})}))}})}),Object(d.jsx)("label",{htmlFor:"serves",className:"label label--serves",children:Object(d.jsx)("input",{type:"text",className:"custom_input custom_input--underline",id:"serves",placeholder:"Serves",onKeyDownCapture:function(e){return"Enter"===e.key&&e.preventDefault()},value:this.state.formData.serves,onChange:function(e){return c.setState(Object(g.a)(Object(g.a)({},c.state),{},{formData:Object(g.a)(Object(g.a)({},c.state.formData),{},{serves:e.target.value})}))}})}),Object(d.jsx)("label",{htmlFor:"prepTime",className:"label label--preptime",children:Object(d.jsx)("input",{type:"text",id:"prepTime",placeholder:"Prep. Time",className:"custom_input custom_input--underline",onKeyDownCapture:function(e){return"Enter"===e.key&&e.preventDefault()},value:this.state.formData.prepTime,onChange:function(e){return c.setState(Object(g.a)(Object(g.a)({},c.state),{},{formData:Object(g.a)(Object(g.a)({},c.state.formData),{},{prepTime:e.target.value})}))}})}),Object(d.jsx)("label",{htmlFor:"cookTime",className:"label label--cooktime",children:Object(d.jsx)("input",{type:"text",id:"cookTime",placeholder:"Cook Time",onKeyDownCapture:function(e){return"Enter"===e.key&&e.preventDefault()},className:"custom_input custom_input--underline",value:this.state.formData.cookTime,onChange:function(e){return c.setState(Object(g.a)(Object(g.a)({},c.state),{},{formData:Object(g.a)(Object(g.a)({},c.state.formData),{},{cookTime:e.target.value})}))}})}),Object(d.jsxs)("label",{htmlFor:"ingredients",className:"label label--ingredients",children:[Object(d.jsxs)("header",{children:[Object(d.jsx)("input",{type:"text",name:"ingredients",id:"ingredients",placeholder:"Add Ingredients...",className:"custom_input custom_input--underline",ref:this.ingredientsRef,onKeyPress:function(e){("NumpadEnter"===e.key||"Enter"===e.key)&&(c.addIngredient(),e.preventDefault())}}),Object(d.jsx)("button",{className:"btn btn--no-bg","aria-label":"Add this ingredient",onClick:function(e){e.preventDefault(),c.addIngredient()},children:Object(d.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:Object(d.jsx)("path",{fill:"none",stroke:"#ffffff",strokeWidth:"2",d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,18 L12,6 M6,12 L18,12"})})})]}),Object(d.jsx)(ft,{ingredients:this.state.formData.ingredients,onClickIngredient:function(e){var t=c.state.formData.ingredients.filter((function(t){return t!==e}));c.setState(Object(g.a)(Object(g.a)({},c.state),{},{formData:Object(g.a)(Object(g.a)({},c.state.formData),{},{ingredients:t})}))}})]}),Object(d.jsxs)("label",{htmlFor:"tags",className:"label label--tags",children:[Object(d.jsxs)("header",{children:[Object(d.jsx)("input",{type:"text",name:"tags",id:"tags",placeholder:"Add Tags...",className:"custom_input custom_input--underline",ref:this.tagsRef,onKeyPress:function(e){("NumpadEnter"===e.key||"Enter"===e.key)&&(c.addTag(),e.preventDefault())}}),Object(d.jsx)("button",{className:"btn btn--no-bg","aria-label":"Add this tag",onClick:function(e){e.preventDefault(),c.addTag()},children:Object(d.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:Object(d.jsx)("path",{fill:"none",stroke:"#ffffff",strokeWidth:"2",d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,18 L12,6 M6,12 L18,12"})})})]}),Object(d.jsx)(Ot,{tags:this.state.formData.tags,onClickTag:function(e){var t=c.state.formData.tags.filter((function(t){return t!==e}));c.setState(Object(g.a)(Object(g.a)({},c.state),{},{formData:Object(g.a)(Object(g.a)({},c.state.formData),{},{tags:t})}))}})]}),Object(d.jsx)("label",{htmlFor:"content",className:"label label--content",children:Object(d.jsx)("textarea",{cols:"30",rows:"10",name:"content",id:"content",placeholder:"Recipe information... allergens, gluten-free, vegan-friendly?",value:this.state.formData.content,onChange:function(e){return c.setState(Object(g.a)(Object(g.a)({},c.state),{},{formData:Object(g.a)(Object(g.a)({},c.state.formData),{},{content:e.target.value})}))},className:"custom_input custom_input--underline"})}),Object(d.jsx)("label",{htmlFor:"method",className:"label label--method",children:Object(d.jsx)("textarea",{cols:"30",rows:"10",name:"method",id:"method",placeholder:"Recipe method... describe the steps needed to complete this recipe",value:this.state.formData.method,onChange:function(e){return c.setState(Object(g.a)(Object(g.a)({},c.state),{},{formData:Object(g.a)(Object(g.a)({},c.state.formData),{},{method:e.target.value})}))},className:"custom_input custom_input--underline"})}),Object(d.jsxs)("label",{htmlFor:"upload",className:"label label--upload",children:[Object(d.jsxs)("p",{className:"btn btn--pill btn--solid-blue",role:"button",children:[Object(d.jsx)(pt.a,{style:{margin:"0 10px 0 0"}})," Upload"]}),Object(d.jsx)("input",{type:"file",multiple:!0,name:"upload",id:"upload",className:"custom_input custom_input--underline",encType:"multipart/form-data",style:{display:"none"},onChange:this.handleFiles})]}),Object(d.jsx)("input",{type:"submit",className:"btn btn--pill",value:"Post"})]}),Object(d.jsx)(vt,{files:this.state.files,onFilesChange:function(e){c.setState(Object(g.a)(Object(g.a)({},c.state),{},{files:e}))}})]}):Object(d.jsx)(d.Fragment,{}),Object(d.jsx)(mt,{state:this.state})]})}}]),n}(a.Component),xt=Object(b.h)(Object(s.b)((function(e){var t,n,a,r,i,s,l,o,c,u,d={};null!==(null===e||void 0===e||null===(t=e.postForm)||void 0===t?void 0:t.formData)&&0!==(null===e||void 0===e||null===(n=e.postForm)||void 0===n||null===(a=n.files)||void 0===a?void 0:a.length)||(d={postForm:JSON.parse(localStorage.getItem("post_form"))});return{formData:(null===(i=d=Object(g.a)(Object(g.a)({},d),{},{user:(null===e||void 0===e||null===(r=e.auth)||void 0===r?void 0:r.user)||null}))||void 0===i||null===(s=i.postForm)||void 0===s?void 0:s.formData)||null,files:(null===(l=d)||void 0===l||null===(o=l.postForm)||void 0===o?void 0:o.files)||[],user:null===(c=d)||void 0===c||null===(u=c.user)||void 0===u?void 0:u._id}}),(function(e){return{setStore:function(t){return e({type:"POST_FORM/SET",payload:Object(g.a)({},t)})}}}))(gt)),_t=function(e){Object(jt.a)(n,e);var t=Object(bt.a)(n);function n(){var e;return Object(ut.a)(this,n),(e=t.call(this)).state={formData:{_id:"",title:"",serves:"",prepTime:"",cookTime:"",ingredients:[],tags:[],content:"",method:""},files:[],posted:!1,modalShowing:!1},e.ingredientsRef=Object(a.createRef)(),e.tagsRef=Object(a.createRef)(),e.handleFiles=function(){var t=Object(y.a)(_.a.mark((function t(n){var a,r,i,s,l,o,c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.target.files,r=[],i=1,s=0;case 4:if(!(s<(null===a||void 0===a?void 0:a.length))){t.next=18;break}if(!((l=a[s]).size>=1e7)){t.next=8;break}return t.abrupt("return");case 8:if(["image/png","image/jpeg","image/webp"].includes(l.type)){t.next=10;break}return t.abrupt("continue",15);case 10:return o="image-".concat(e.state.files.length+i++),t.next=13,l.arrayBuffer();case 13:c=t.sent,r.push({name:o,type:l.type,size:l.size,lastModified:l.lastModified,base64:"data:".concat(l.type,";base64,").concat(ve(c)),originalFile:l});case 15:s++,t.next=4;break;case 18:e.setState(Object(g.a)(Object(g.a)({},e.state),{},{files:[].concat(Object(Se.a)(e.state.files),r)}));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addIngredient=function(){if(!(e.state.formData.ingredients.length>=30)&&e.ingredientsRef){var t=e.ingredientsRef.current.value;t.length>20||e.state.formData.ingredients.includes(t)||!t||(e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:Object(g.a)(Object(g.a)({},e.state.formData),{},{ingredients:[].concat(Object(Se.a)(e.state.formData.ingredients),[t])})})),e.ingredientsRef.current.value="")}},e.addTag=function(){if(!(e.state.formData.tags.length>=6)&&e.tagsRef){var t=e.tagsRef.current.value;t.length>20||e.state.formData.tags.includes(t)||!t||(e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:Object(g.a)(Object(g.a)({},e.state.formData),{},{tags:[].concat(Object(Se.a)(e.state.formData.tags),[t])})})),e.tagsRef.current.value="")}},e.submit=Object(y.a)(_.a.mark((function t(){var n,a,r,i,s,l,o,c,u,d,j,b,p,v,m,f,O,h,x,y,w,S;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ie({formData:{title:null===(n=e.state)||void 0===n||null===(a=n.formData)||void 0===a?void 0:a.title,serves:String(null===(r=e.state)||void 0===r||null===(i=r.formData)||void 0===i?void 0:i.serves),cookTime:String(null===(s=e.state)||void 0===s||null===(l=s.formData)||void 0===l?void 0:l.cookTime),prepTime:String(null===(o=e.state)||void 0===o||null===(c=o.formData)||void 0===c?void 0:c.prepTime),ingredients:null===(u=e.state)||void 0===u||null===(d=u.formData)||void 0===d?void 0:d.ingredients,tags:null===(j=e.state)||void 0===j||null===(b=j.formData)||void 0===b?void 0:b.tags,content:null===(p=e.state)||void 0===p||null===(v=p.formData)||void 0===v?void 0:v.content,method:null===(m=e.state)||void 0===m||null===(f=m.formData)||void 0===f?void 0:f.method},files:null===(O=e.state)||void 0===O?void 0:O.files},null===(h=e.state)||void 0===h||null===(x=h.formData)||void 0===x?void 0:x._id);case 3:if(S=t.sent,console.log(S),null===S||void 0===S||null===(y=S.post)||void 0===y?void 0:y.userFriendlyId){t.next=7;break}return t.abrupt("return");case 7:e.setState(Object(g.a)(Object(g.a)({},e.state),{},{posted:!0})),window.removeEventListener("beforeunload",e.setStorage),localStorage.removeItem("edit_form"),e.props.setStore({formData:null,files:[]}),e.props.history.push("/recipe/".concat(null===S||void 0===S||null===(w=S.post)||void 0===w?void 0:w.userFriendlyId)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])}))),e.setStorage=function(){var t,n;localStorage.setItem("edit_form",JSON.stringify({formData:null===(t=e.state)||void 0===t?void 0:t.formData,files:null===(n=e.state)||void 0===n?void 0:n.files}))},e}return Object(dt.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.setStorage),this.props.formData&&this.setState(this.props)}},{key:"componentWillUnmount",value:function(){var e;(null===(e=this.state)||void 0===e?void 0:e.posted)||(window.removeEventListener("beforeunload",this.setStorage),this.props.setStore(this.state))}},{key:"render",value:function(){var e=this;return Object(d.jsxs)(O.a.section,{transition:{duration:.25},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"create",children:[Object(d.jsx)(ht,{showing:this.state.modalShowing,title:"Format Syntax",message:Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("ul",{children:[Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{children:"![image-name]"})," Insert an uploaded image"]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{children:"**text**"})," Bold text"]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{children:"*text*"})," Italic text"]}),Object(d.jsxs)("li",{children:[Object(d.jsxs)("span",{children:["# Heading 1",Object(d.jsx)("br",{}),"## Heading 2"]}),"Headings (Maximum depth = 6)"]}),Object(d.jsxs)("li",{children:[Object(d.jsxs)("span",{children:["- List Item 1",Object(d.jsx)("br",{}),"- List Item 2"]}),"Bullet-point list"]}),Object(d.jsxs)("li",{children:[Object(d.jsxs)("span",{children:["1. List Item 1",Object(d.jsx)("br",{}),"2. List Item 2"]}),"Numbered list"]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{children:"---"}),"Horizontal line"]}),Object(d.jsxs)("li",{children:[Object(d.jsxs)("span",{children:["| Col1 | Col2 |",Object(d.jsx)("br",{}),"| :---: | :---: |",Object(d.jsx)("br",{}),"| Cell1 | Cell2 |",Object(d.jsx)("br",{}),"| Cell3 | Cell4 |"]}),"A table with centered columns. Use the following under column definitions to change alignment:",Object(d.jsx)("br",{}),":--- will left-align text.",Object(d.jsx)("br",{}),":---: will center text.",Object(d.jsx)("br",{}),"---: will right-align."]})]})}),buttons:Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{className:"btn btn--pill btn--pill-inverse",onClick:function(){return e.setState(Object(g.a)(Object(g.a)({},e.state),{},{modalShowing:!e.state.modalShowing}))},children:"Okay"})})}),Object(d.jsxs)("header",{children:[Object(d.jsx)("h1",{children:"edit a recipe"}),Object(d.jsx)("button",{className:"btn btn--pill btn--blue",onClick:function(){return e.setState(Object(g.a)(Object(g.a)({},e.state),{},{modalShowing:!e.state.modalShowing}))},children:"View Formatting Help"})]}),Object(d.jsxs)("div",{className:"create__container",children:[Object(d.jsxs)("form",{action:"",onSubmit:function(t){t.preventDefault(),e.submit()},className:"create__form",children:[Object(d.jsx)("label",{htmlFor:"title",className:"label label--title",children:Object(d.jsx)("input",{className:"custom_input custom_input--underline",type:"text",name:"title",id:"title",placeholder:"Title",onKeyDownCapture:function(e){return"Enter"===e.key&&e.preventDefault()},value:this.state.formData.title,onChange:function(t){return e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:Object(g.a)(Object(g.a)({},e.state.formData),{},{title:t.target.value})}))}})}),Object(d.jsx)("label",{htmlFor:"serves",className:"label label--serves",children:Object(d.jsx)("input",{type:"text",className:"custom_input custom_input--underline",id:"serves",placeholder:"Serves",onKeyDownCapture:function(e){return"Enter"===e.key&&e.preventDefault()},value:this.state.formData.serves,onChange:function(t){return e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:Object(g.a)(Object(g.a)({},e.state.formData),{},{serves:t.target.value})}))}})}),Object(d.jsx)("label",{htmlFor:"prepTime",className:"label label--preptime",children:Object(d.jsx)("input",{type:"text",id:"prepTime",placeholder:"Prep. Time",className:"custom_input custom_input--underline",onKeyDownCapture:function(e){return"Enter"===e.key&&e.preventDefault()},value:this.state.formData.prepTime,onChange:function(t){return e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:Object(g.a)(Object(g.a)({},e.state.formData),{},{prepTime:t.target.value})}))}})}),Object(d.jsx)("label",{htmlFor:"cookTime",className:"label label--cooktime",children:Object(d.jsx)("input",{type:"text",id:"cookTime",placeholder:"Cook Time",onKeyDownCapture:function(e){return"Enter"===e.key&&e.preventDefault()},className:"custom_input custom_input--underline",value:this.state.formData.cookTime,onChange:function(t){return e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:Object(g.a)(Object(g.a)({},e.state.formData),{},{cookTime:t.target.value})}))}})}),Object(d.jsxs)("label",{htmlFor:"ingredients",className:"label label--ingredients",children:[Object(d.jsxs)("header",{children:[Object(d.jsx)("input",{type:"text",name:"ingredients",id:"ingredients",placeholder:"Add Ingredients...",className:"custom_input custom_input--underline",ref:this.ingredientsRef,onKeyPress:function(t){("NumpadEnter"===t.key||"Enter"===t.key)&&(e.addIngredient(),t.preventDefault())}}),Object(d.jsx)("button",{className:"btn btn--no-bg","aria-label":"Add this ingredient",onClick:function(){return e.addIngredient()},children:Object(d.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:Object(d.jsx)("path",{fill:"none",stroke:"#ffffff",strokeWidth:"2",d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,18 L12,6 M6,12 L18,12"})})})]}),Object(d.jsx)(ft,{ingredients:this.state.formData.ingredients,onClickIngredient:function(t){var n=e.state.formData.ingredients.filter((function(e){return e!==t}));e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:Object(g.a)(Object(g.a)({},e.state.formData),{},{ingredients:n})}))}})]}),Object(d.jsxs)("label",{htmlFor:"tags",className:"label label--tags",children:[Object(d.jsxs)("header",{children:[Object(d.jsx)("input",{type:"text",name:"tags",id:"tags",placeholder:"Add Tags...",className:"custom_input custom_input--underline",ref:this.tagsRef,onKeyPress:function(t){("NumpadEnter"===t.key||"Enter"===t.key)&&(e.addTag(),t.preventDefault())}}),Object(d.jsx)("button",{className:"btn btn--no-bg","aria-label":"Add this tag",onClick:function(){return e.addTag()},children:Object(d.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:Object(d.jsx)("path",{fill:"none",stroke:"#ffffff",strokeWidth:"2",d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,18 L12,6 M6,12 L18,12"})})})]}),Object(d.jsx)(Ot,{tags:this.state.formData.tags,onClickTag:function(t){var n=e.state.formData.tags.filter((function(e){return e!==t}));e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:Object(g.a)(Object(g.a)({},e.state.formData),{},{tags:n})}))}})]}),Object(d.jsx)("label",{htmlFor:"content",className:"label label--content",children:Object(d.jsx)("textarea",{cols:"30",rows:"10",name:"content",id:"content",placeholder:"Recipe information... allergens, gluten-free, vegan-friendly?",value:this.state.formData.content,onChange:function(t){return e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:Object(g.a)(Object(g.a)({},e.state.formData),{},{content:t.target.value})}))},className:"custom_input custom_input--underline"})}),Object(d.jsx)("label",{htmlFor:"method",className:"label label--method",children:Object(d.jsx)("textarea",{cols:"30",rows:"10",name:"method",id:"method",placeholder:"Recipe method... describe the steps needed to complete this recipe",value:this.state.formData.method,onChange:function(t){return e.setState(Object(g.a)(Object(g.a)({},e.state),{},{formData:Object(g.a)(Object(g.a)({},e.state.formData),{},{method:t.target.value})}))},className:"custom_input custom_input--underline"})}),Object(d.jsxs)("label",{htmlFor:"upload",className:"label label--upload",children:[Object(d.jsxs)("p",{className:"btn btn--pill btn--solid-blue",role:"button",children:[Object(d.jsx)(pt.a,{style:{margin:"0 10px 0 0"}})," Upload"]}),Object(d.jsx)("input",{type:"file",multiple:!0,name:"upload",id:"upload",className:"custom_input custom_input--underline",encType:"multipart/form-data",style:{display:"none"},onChange:this.handleFiles})]}),Object(d.jsx)("input",{type:"submit",className:"btn btn--pill",value:"Submit Edit"})]}),Object(d.jsx)(vt,{files:this.state.files,onFilesChange:function(t){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{files:t}))}})]}),Object(d.jsx)(mt,{state:this.state})]})}}]),n}(a.Component),yt=Object(b.h)(Object(s.b)((function(e){var t,n,a,r,i,s,l,o,c;null!==(null===(t=e)||void 0===t||null===(n=t.editForm)||void 0===n?void 0:n.formData)&&0!==(null===(a=e)||void 0===a||null===(r=a.editForm)||void 0===r||null===(i=r.files)||void 0===i?void 0:i.length)||(e={editForm:JSON.parse(localStorage.getItem("edit_form"))});return{formData:(null===(s=e)||void 0===s||null===(l=s.editForm)||void 0===l?void 0:l.formData)||null,files:(null===(o=e)||void 0===o||null===(c=o.editForm)||void 0===c?void 0:c.files)||[]}}),(function(e){return{setStore:function(t){return e({type:"EDIT_FORM/SET",payload:Object(g.a)({},t)})}}}))(_t)),wt=n(214),St=n(46),Nt=function(){var e=Object(s.c)(),t=Object(a.useRef)(),n=Object(s.d)((function(e){return e.auth.user})),r=Object(a.useState)(""),i=Object(u.a)(r,2),l=i[0],o=i[1],c=Object(a.useState)(""),j=Object(u.a)(c,2),b=j[0],p=j[1],v=Object(a.useState)(!1),f=Object(u.a)(v,2),h=f[0],x=f[1],w=Object(a.useState)(!1),S=Object(u.a)(w,2),N=S[0],k=S[1],T=Object(a.useState)(!1),D=Object(u.a)(T,2),C=D[0],E=D[1],F=Object(a.useState)({_id:(null===n||void 0===n?void 0:n._id)||null,username:(null===n||void 0===n?void 0:n.username)||null,bio:(null===n||void 0===n?void 0:n.bio)||null,email:(null===n||void 0===n?void 0:n.email)||null,imageUrl:(null===n||void 0===n?void 0:n.imageUrl)||null,verified:(null===n||void 0===n?void 0:n.verified)||null,deactivated:(null===n||void 0===n?void 0:n.deactivated)||null}),R=Object(u.a)(F,2),I=R[0],L=R[1];Object(a.useEffect)((function(){var e=!0;return e&&L({_id:null===n||void 0===n?void 0:n._id,username:null===n||void 0===n?void 0:n.username,bio:null===n||void 0===n?void 0:n.bio,email:null===n||void 0===n?void 0:n.email,imageUrl:null===n||void 0===n?void 0:n.imageUrl,verified:null===n||void 0===n?void 0:n.verified,deactivated:null===n||void 0===n?void 0:n.deactivated}),function(){return e=!1}}),[n]);var U=function(){var t=Object(y.a)(_.a.mark((function t(){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ze(null===I||void 0===I?void 0:I._id,{imageUrl:null===I||void 0===I?void 0:I.imageUrl,bio:null===I||void 0===I?void 0:I.bio,username:null===I||void 0===I?void 0:I.username});case 2:(n=t.sent).error?(o(n.error),p("Error"),x(!0),setTimeout((function(){x(!1)}),2e3)):(e({type:"AUTH/EDIT_STORED_USER",payload:n}),o("Saved details"),p("Alert"),x(!0),setTimeout((function(){x(!1)}),2e3));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=function(){var t=Object(y.a)(_.a.mark((function t(){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ze(null===n||void 0===n?void 0:n._id);case 3:a=t.sent,e({type:"AUTH/EDIT_STORED_USER",payload:a}),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=Object(y.a)(_.a.mark((function t(){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Qe(null===n||void 0===n?void 0:n._id);case 3:a=t.sent,e({type:"AUTH/EDIT_STORED_USER",payload:a}),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(d.jsxs)(O.a.section,{className:"settings",transition:{duration:.25},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[Object(d.jsx)(ht,{showing:N,title:"Profile Visibility",message:(null===n||void 0===n?void 0:n.deactivated)?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("p",{children:"Your profile is currently private"})}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("p",{children:"Your profile is currently public"})}),buttons:(null===n||void 0===n?void 0:n.deactivated)?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{className:"btn btn--green btn--pill",onClick:M,children:"Make Public"}),Object(d.jsx)("button",{className:"btn btn--blue btn--pill",onClick:function(){return k(!1)},children:"Cancel"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{className:"btn btn--green btn--pill",onClick:P,children:"Make Private"}),Object(d.jsx)("button",{className:"btn btn--blue btn--pill",onClick:function(){return k(!1)},children:"Cancel"})]})}),Object(d.jsx)(ht,{showing:C,title:"Send Password Reset Link",message:Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("p",{children:"If you proceed, you will receive a one-time password reset link via email"})}),buttons:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{className:"btn btn--pill btn--green",children:"Reset Password"}),Object(d.jsx)("button",{className:"btn btn--pill btn--blue",onClick:function(){return E(!1)},children:"Cancel"})]})}),Object(d.jsx)(Ae,{message:l,show:h,title:b}),Object(d.jsxs)("div",{className:"settings__container",children:[Object(d.jsxs)("div",{className:"settings__edit",children:[Object(d.jsxs)("p",{className:(null===I||void 0===I?void 0:I.verified)?"email email--verified":"email email--unverified",children:[null===I||void 0===I?void 0:I.email,(null===I||void 0===I?void 0:I.verified)?Object(d.jsx)(St.d,{}):Object(d.jsx)(St.c,{})]}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),U()},children:[Object(d.jsxs)("label",{className:"file_upload",children:[Object(d.jsx)("img",{src:null===I||void 0===I?void 0:I.imageUrl,alt:"Your profile avatar"}),Object(d.jsxs)("span",{children:[Object(d.jsx)(it.c,{})," Upload"]}),Object(d.jsx)("input",{type:"file",name:"avatar",multiple:!1,ref:t,onChange:function(){var e=Object(y.a)(_.a.mark((function e(t){var n,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files[0].size>Math.pow(100,6))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.target.files[0].arrayBuffer();case 4:if(n=e.sent,["image/webp","image/jpeg","image/png"].includes(t.target.files[0].type)){e.next=11;break}return o("Invalid image format"),p("Error"),x(!0),setTimeout((function(){x(!1)}),2e3),e.abrupt("return");case 11:a="data:".concat(t.target.files[0].type,";base64,").concat(ve(n)),L(Object(g.a)(Object(g.a)({},I),{},{imageUrl:a}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:{display:"none"}})]}),Object(d.jsx)("label",{htmlFor:"username",children:Object(d.jsx)("input",{className:"custom_input",type:"text",name:"username",placeholder:"Username",value:null===I||void 0===I?void 0:I.username,onChange:function(e){var t=e.target;return L(Object(g.a)(Object(g.a)({},I),{},{username:t.value}))}})}),Object(d.jsx)("label",{htmlFor:"bio",children:Object(d.jsx)("textarea",{className:"custom_input custom_input--bio",name:"bio",placeholder:"bio",value:null===I||void 0===I?void 0:I.bio,onChange:function(e){var t=e.target;return L(Object(g.a)(Object(g.a)({},I),{},{bio:t.value}))}})}),Object(d.jsx)("input",{type:"submit",value:"Edit Profile",className:"btn btn--pill"})]})]}),Object(d.jsxs)("div",{className:"settings__visibility",children:[(null===I||void 0===I?void 0:I.deactivated)?Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("p",{className:"privacy",children:["Your profile is set to private ",Object(d.jsx)(St.b,{})]})}):Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("p",{className:"privacy",children:["Your profile is public ",Object(d.jsx)(St.a,{})]})}),Object(d.jsx)("button",{className:"btn btn--blue styled-link",onClick:function(){return k(!0)},children:"Change visibility"})]}),(null===n||void 0===n?void 0:n.verified)&&!(null===n||void 0===n?void 0:n.googleId)&&Object(d.jsxs)("div",{className:"settings__password",children:[Object(d.jsx)(m.b,{}),Object(d.jsx)("button",{className:"btn btn--blue styled-link",onClick:function(){return E(!0)},children:"Reset password"})]})]})]})};var kt=function(){var e=Object(s.c)(),t=Object(b.g)(),n=Object(a.useState)(!1),r=Object(u.a)(n,2),i=r[0],l=r[1];return Object(a.useEffect)((function(){l(!1)}),[t]),Object(a.useEffect)((function(){return e({type:"AUTH/INIT",payload:JSON.parse(localStorage.getItem("profile"))}),D.on("REQUEST_START",(function(e){l(!0)})),D.on("RESPONSE_FINISH",(function(e){l(!1)})),D.on("RESPONSE_ERROR",(function(e){l(!1)})),function(){D.off("RESPONSE_FINISH"),D.off("RESPONSE_ERROR"),D.off("REQUEST_START")}}),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p,{}),Object(d.jsxs)("main",{className:"container",children:[Object(d.jsx)(ke,{showing:i}),Object(d.jsx)(wt.a,{exitBeforeEnter:!0,children:Object(d.jsxs)(b.c,{location:t,children:[Object(d.jsx)(b.a,{path:"/",exact:!0,children:Object(d.jsx)(h,{})}),Object(d.jsx)(b.a,{path:"/discover",exact:!0,children:Object(d.jsx)(Te,{})}),Object(d.jsx)(b.a,{path:"/post",exact:!0,children:Object(d.jsx)(xt,{})}),Object(d.jsx)(b.a,{path:"/edit",exact:!0,children:Object(d.jsx)(yt,{})}),Object(d.jsx)(b.a,{path:"/login",children:Object(d.jsx)(He,{})}),Object(d.jsx)(b.a,{path:"/signup",children:Object(d.jsx)(He,{})}),Object(d.jsx)(b.a,{path:"/settings",children:Object(d.jsx)(Nt,{})}),Object(d.jsx)(b.a,{path:"/profiles/:id",render:function(e){return Object(d.jsx)(tt,{id:e.match.params.id})}}),Object(d.jsx)(b.a,{path:"/recipe/:id",render:function(e){return Object(d.jsx)(ct,{id:e.match.params.id})}})]},t.pathname)})]}),Object(d.jsx)(j,{})]})},Tt=Object(o.combineReducers)({auth:function(){var e,t,n,a,r,i,s,l,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:null},c=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof o)switch(c.type){case"AUTH/INIT":return Object(g.a)(Object(g.a)({},o),{},{user:null===c||void 0===c||null===(e=c.payload)||void 0===e?void 0:e.user,token:null===c||void 0===c||null===(t=c.payload)||void 0===t?void 0:t.token});case"AUTH/EDIT_STORED_USER":return console.log(null===c||void 0===c?void 0:c.payload),localStorage.setItem("profile",JSON.stringify({user:null===c||void 0===c||null===(n=c.payload)||void 0===n?void 0:n.user,token:JSON.parse(localStorage.getItem("profile")).token})),Object(g.a)(Object(g.a)({},o),{},{user:null===c||void 0===c||null===(a=c.payload)||void 0===a?void 0:a.user});case"AUTH/SIGN_IN":return localStorage.setItem("profile",JSON.stringify({user:null===c||void 0===c||null===(r=c.payload)||void 0===r?void 0:r.user,token:null===c||void 0===c||null===(i=c.payload)||void 0===i?void 0:i.token})),Object(g.a)(Object(g.a)({},o),{},{user:null===c||void 0===c||null===(s=c.payload)||void 0===s?void 0:s.user,token:null===c||void 0===c||null===(l=c.payload)||void 0===l?void 0:l.token});case"AUTH/SIGN_UP":return Object(g.a)({},o);case"AUTH/LOG_OUT":return localStorage.removeItem("profile"),Object(g.a)(Object(g.a)({},o),{},{user:null,token:null});default:return o}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{all:[],single:null},t=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof e)switch(t.type){case"USER/SET_USER":return Object(g.a)(Object(g.a)({},e),{},{single:t.payload});case"USER/SET_USER_FOLLOWERS":return Object(g.a)(Object(g.a)({},e),{},{single:Object(g.a)(Object(g.a)({},e.single),{},{_followers:t.payload})});case"USER/SET_USER_FOLLOWING":return Object(g.a)(Object(g.a)({},e),{},{single:Object(g.a)(Object(g.a)({},e.single),{},{_following:t.payload})});case"USER/EDIT_USER":return Object(g.a)(Object(g.a)({},e),{},{single:Object(g.a)(Object(g.a)({},e.single),t.payload)});case"USER/SET_ALL":return Object(g.a)(Object(g.a)({},e),{},{all:t.payload});case"USER/PUSH_TO_ALL":return Object(g.a)(Object(g.a)({},e),{},{all:e.all.push(t.payload)});case"USER/PULL_FROM_ALL":return Object(g.a)(Object(g.a)({},e),{},{all:e.all.filter((function(e){return e._id!==t.payload._id}))});default:return e}},postForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{formData:null,files:[]},t=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof e)switch(t.type){case"POST_FORM/SET":return localStorage.setItem("post_form",JSON.stringify(t.payload)),Object(g.a)(Object(g.a)({},e),{},{formData:t.payload.formData,files:t.payload.files});default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{all:[],single:null},t=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof e)switch(t.type){case"POST/SET_POST":return Object(g.a)(Object(g.a)({},e),{},{single:t.payload});case"POST/EDIT_POST":return Object(g.a)(Object(g.a)({},e),{},{single:Object(g.a)(Object(g.a)({},e.single),t.payload)});case"POST/SET_ALL":return Object(g.a)(Object(g.a)({},e),{},{all:t.payload});case"POST/EDIT_ALL":return Object(g.a)({},e);case"POST/LIKE_SINGLE":return Object(g.a)(Object(g.a)({},e),{},{single:Object(g.a)(Object(g.a)({},e.single),{},{likes:[].concat(Object(Se.a)(e.single.likes),[t.payload])})});case"POST/LIKE_SINGLE/REMOVE":return Object(g.a)(Object(g.a)({},e),{},{single:Object(g.a)(Object(g.a)({},e.single),{},{likes:e.single.likes.filter((function(e){return e!==t.payload}))})});case"POST/COMMENT_SINGLE":return Object(g.a)(Object(g.a)({},e),{},{single:Object(g.a)(Object(g.a)({},e.single),{},{comments:[].concat(Object(Se.a)(e.single.comments),[t.payload])})});case"POST/COMMENT_SINGLE/REMOVE":return Object(g.a)(Object(g.a)({},e),{},{single:Object(g.a)(Object(g.a)({},e.single),{},{comments:e.single.comments.filter((function(e){return e._id!==t.payload}))})});default:return e}},editForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{formData:null,files:[]},t=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof e)switch(t.type){case"EDIT_FORM/SET":return localStorage.setItem("edit_form",JSON.stringify(t.payload)),Object(g.a)(Object(g.a)({},e),{},{formData:t.payload.formData,files:t.payload.files});default:return e}}}),Dt=Object(o.createStore)(Tt,Object(c.composeWithDevTools)());i.a.render(Object(d.jsx)(s.a,{store:Dt,children:Object(d.jsx)(l.a,{children:Object(d.jsx)(kt,{})})}),document.getElementById("root"))}},[[211,1,2]]]);
//# sourceMappingURL=main.90773725.chunk.js.map