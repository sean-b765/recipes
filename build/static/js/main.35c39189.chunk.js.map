{"version":3,"sources":["components/Footer.jsx","components/Navbar.jsx","pages/Home/Home.jsx","_api/index.js","_actions/post.js","components/Filters.jsx","util/util.js","components/RecipeCard/Item.jsx","pages/Discover/Pages.jsx","components/Tags.jsx","pages/Discover/Discover.jsx","pages/Auth/ThirdPartyAuth.jsx","_actions/auth.js","pages/Auth/Login.jsx","pages/Auth/Signup.jsx","components/TopMostLogger.jsx","pages/Auth/Auth.jsx","_actions/user.js","pages/Profile/Modal.jsx","components/Spinner.jsx","pages/Profile/ProfilePosts.jsx","pages/Profile/Profile.jsx","components/Markdown.jsx","components/Button.jsx","components/Comments/Comment.jsx","components/Comments/Comments.jsx","pages/Recipe/Recipe.jsx","pages/Create/FilePreview.jsx","pages/Create/Preview.jsx","pages/Create/ListIngredients.jsx","pages/Create/ListTags.jsx","pages/Create/Create.jsx","pages/Create/Edit.jsx","App.js","_reducers/index.js","_reducers/auth.js","_reducers/user.js","_reducers/postForm.js","_reducers/post.js","_reducers/editForm.js","index.js"],"names":["Footer","className","to","Navbar","useState","open","setOpen","user","useSelector","state","auth","location","useLocation","history","useHistory","useEffect","onClick","_id","push","src","imageUrl","alt","Home","motion","section","transition","duration","initial","opacity","animate","exit","API","axios","create","baseURL","process","interceptors","request","use","req","profile","localStorage","getItem","console","log","url","headers","Authorization","JSON","parse","token","apiSignIn","body","post","apiSignUp","apiGoogleSignIn","apiGetUser","userId","get","apiFollowUser","targetId","patch","apiUnfollowUser","apiGetFollowers","apiGetFollowing","apiBlockUser","apiUnblockUser","apiGetPostsFromUser","apiGetDiscover","filters","apiCreatePost","apiEditPost","id","apiGetPost","apiDeletePost","delete","apiLikePost","apiAddComment","commentString","apiRemoveComment","commentId","apiGetPostsWithTags","getPostsWithTags","a","data","error","response","message","getDiscover","getPostByFriendlyId","createPost","deletePost","editPost","likePost","commentOnPost","comment","removeComment","Range","createSliderWithTooltip","_range","Filters","setFilters","setFilterState","onSubmit","e","preventDefault","htmlFor","name","onChange","sort","target","value","period","style","marginTop","margin","serves","onAfterChange","v","max","min","defaultValue","tipFormatter","prepTime","cookTime","type","placeholder","query","bufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","i","String","fromCharCode","window","btoa","formatFilters","tags","length","join","page","perPage","imagePattern","placeImageInContent","content","images","result","matchAll","contentString","imgNames","map","img","imgName","substring","includes","replace","find","image","idx","base64","next","done","DOMPurify","sanitize","formatLargeNumber","num","parseFloat","Number","toFixed","Item","recipe","object","delay","isOnProfile","backgroundImage","userFriendlyId","title","likes","username","Pages","page_arr","pageCount","cursor","Tags","onClickTag","tag","setTag","Discover","dispatch","useDispatch","posts","all","search","split","err","then","res","pages","payload","catch","handleSetFilters","val","_tag","filter","ThirdPartyAuth","onSuccessFacebook","onSuccessGoogle","clientId","onSuccess","signIn","signUp","googleSignin","Login","handleSignIn","showPass","setShowPass","email","password","formData","setFormData","action","tokenId","profileObj","googleId","Signup","handleSignUp","repeatPassword","TopMostLogger","show","toLowerCase","Auth","setTitle","setMessage","showing","setShowing","showDialog","setTimeout","verificationSent","pathname","getUser","followUser","unfollowUser","blockUser","unblockUser","getFollowers","getFollowing","getUserPosts","Modal","modal","closeModal","children","child","Spinner","xmlns","background","display","width","height","viewBox","preserveAspectRatio","cx","cy","r","strokeWidth","stroke","strokeDasharray","fill","strokeLinecap","attributeName","repeatCount","dur","keyTimes","values","ProfilePosts","setPosts","Profile","setModal","single","me","_followUser","_unfollowUser","_blockUser","blockList","score","followers","_followers","showFollowers","_following","showFollowing","following","goBack","bio","Markdown","text","marked","regex","RegExp","dangerouslySetInnerHTML","__html","Button","Error","cName","ariaLabel","Comment","_removeComment","Comments","comments","postId","setComment","submitComment","index","Recipe","showLog","setShowLog","logTitle","setLogTitle","logMessage","setLogMessage","files","method","FilePreview","onFilesChange","inputRef","useRef","file","current","focus","select","ref","onKeyPress","key","_files","f","onContextMenu","handleClick","Preview","ListIngredients","ingredients","onClickIngredient","item","ListTags","Create","posted","ingredientsRef","createRef","tagsRef","handleFiles","filesToAdd","size","arrayBuffer","bfr","lastModified","originalFile","setState","this","addIngredient","addTag","removeEventListener","setStorage","removeItem","props","setStore","setItem","stringify","addEventListener","onKeyDownCapture","d","newIngredients","_item","newTags","cols","rows","role","multiple","encType","Component","withRouter","connect","postForm","newState","submit","editForm","App","AnimatePresence","exitBeforeEnter","path","exact","Edit","render","p","match","params","combineReducers","store","createStore","reducers","composeWithDevTools","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.35c39189.chunk.js","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst Footer = () => {\r\n\treturn (\r\n\t\t<footer className=\"footer\">\r\n\t\t\t<div className=\"footer__logo\">\r\n\t\t\t\t<h3>Recipes</h3>\r\n\t\t\t</div>\r\n\t\t\t<nav className=\"footer__navigation\">\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<Link to=\"/\">Home</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<Link to=\"/discover\">Discover</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<Link to=\"/search\">Search</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<Link to=\"/post\">Post</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</nav>\r\n\t\t\t<div className=\"footer__info\">\r\n\t\t\t\t<div className=\"footer__info__legal\">\r\n\t\t\t\t\t<Link to=\"/\">Privacy Policy</Link>\r\n\t\t\t\t\t<Link to=\"/\">Terms &amp; Conditions</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"footer__info__copyright\">\r\n\t\t\t\t\t<Link to=\"/\">Copyright &copy; 2021 | Sean Boaden</Link>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</footer>\r\n\t)\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Link, useHistory, useLocation } from 'react-router-dom'\r\nimport { IoNotificationsOutline } from 'react-icons/io5'\r\n\r\nconst Navbar = () => {\r\n\tconst [open, setOpen] = useState(false)\r\n\r\n\tconst user = useSelector((state) => state.auth.user)\r\n\r\n\tconst location = useLocation()\r\n\tconst history = useHistory()\r\n\r\n\tuseEffect(() => {\r\n\t\tsetOpen(false)\r\n\t}, [location])\r\n\r\n\treturn (\r\n\t\t<header className=\"navbar\">\r\n\t\t\t<nav className=\"navbar__navigation\">\r\n\t\t\t\t<div\r\n\t\t\t\t\taria-label=\"Open the menu\"\r\n\t\t\t\t\tclassName={\r\n\t\t\t\t\t\topen\r\n\t\t\t\t\t\t\t? 'navbar__navigation__mobile close'\r\n\t\t\t\t\t\t\t: 'navbar__navigation__mobile'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonClick={() => setOpen(!open)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={open ? 'menu mobile-variant' : 'menu'}>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<Link to=\"/\">Home</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<Link to=\"/discover\">Discover</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<Link to=\"/post\">Post</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t{!user?._id && (\r\n\t\t\t\t\t\t<div className=\"menu__mobile__actions\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\tonClick={() => history.push('/login')}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn--pill btn--solid-blue\"\r\n\t\t\t\t\t\t\t\tonClick={() => history.push('/signup')}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tSign up\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</nav>\r\n\r\n\t\t\t<div className=\"navbar__brand\">\r\n\t\t\t\t<Link to=\"/\" className=\"navbar__brand__logo\" aria-label=\"Recipes Logo\">\r\n\t\t\t\t\tR\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Login/signup should show when not logged in */}\r\n\t\t\t{!user && (\r\n\t\t\t\t<div className=\"navbar__actions\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\tonClick={() => history.push('/login')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tLogin\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn btn--pill btn--solid-blue\"\r\n\t\t\t\t\t\tonClick={() => history.push('/signup')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tSign up\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{/* See notification bell / user avatar when logged in */}\r\n\t\t\t{user && (\r\n\t\t\t\t<div className=\"navbar__notif\">\r\n\t\t\t\t\t<IoNotificationsOutline\r\n\t\t\t\t\t\taria-label=\"View your notifications\"\r\n\t\t\t\t\t\tonClick={() => {}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"navbar__notif__profile\"\r\n\t\t\t\t\t\taria-label=\"Visit your profile\"\r\n\t\t\t\t\t\tonClick={() => history.push(`/profiles/${user._id}`)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={user.imageUrl ? user.imageUrl : '/images/default-avatar.png'}\r\n\t\t\t\t\t\t\talt=\"Your profile\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nexport default Navbar\r\n","import React from 'react'\r\nimport { AiOutlineSearch, AiOutlineShareAlt } from 'react-icons/ai'\r\nimport { RiCompassDiscoverFill } from 'react-icons/ri'\r\nimport { BiUserPlus } from 'react-icons/bi'\r\nimport { motion } from 'framer-motion'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst Home = () => {\r\n\tconst history = useHistory()\r\n\tconst user = useSelector((state) => state.auth.user)\r\n\r\n\treturn (\r\n\t\t<motion.section\r\n\t\t\tclassName=\"home\"\r\n\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\texit={{ opacity: 0 }}\r\n\t\t>\r\n\t\t\t<div className=\"home__wrapper\">\r\n\t\t\t\t<div className=\"home__wrapper__landing\">\r\n\t\t\t\t\t<header className=\"home__wrapper__landing__split\">\r\n\t\t\t\t\t\t<h1>Your favourite recipes,</h1>\r\n\t\t\t\t\t\t<p>all in one place.</p>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t{!user?._id && (\r\n\t\t\t\t\t\t<div className=\"home__wrapper__landing__split home__wrapper__landing__split--center\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn--large\"\r\n\t\t\t\t\t\t\t\tonClick={() => history.push('/signup')}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tGet Started\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<section className=\"home__wrapper__showcase\">\r\n\t\t\t\t\t<div className=\"home__wrapper__showcase__item home__wrapper__showcase__item--discover\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<RiCompassDiscoverFill />\r\n\t\t\t\t\t\t\t<h2>Discover new tastes</h2>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t<article>\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\tLorem ipsum dolor, sit amet consectetur adipisicing elit.\r\n\t\t\t\t\t\t\t\tVoluptatibus ratione facilis dolorum cupiditate rem enim non?\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</article>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"home__wrapper__showcase__item home__wrapper__showcase__item--reverse home__wrapper__showcase__item--search\">\r\n\t\t\t\t\t\t<article>\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\tLorem ipsum dolor sit amet consectetur adipisicing elit. Natus\r\n\t\t\t\t\t\t\t\tdolorum voluptate sapiente.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<AiOutlineSearch />\r\n\t\t\t\t\t\t\t<h2>Search for a dish</h2>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"home__wrapper__showcase__item home__wrapper__showcase__item--features\">\r\n\t\t\t\t\t\t<div className=\"split\">\r\n\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t<BiUserPlus />\r\n\t\t\t\t\t\t\t\t<h2>Follow your friends</h2>\r\n\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t<article>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tLorem, ipsum dolor sit amet consectetur adipisicing elit.\r\n\t\t\t\t\t\t\t\t\tAtque placeat rerum error consectetur minus nulla ad.\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"split\">\r\n\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t<AiOutlineShareAlt />\r\n\t\t\t\t\t\t\t\t<h2>Share your own creations</h2>\r\n\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t<article>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tLorem ipsum dolor, sit amet consectetur adipisicing elit.\r\n\t\t\t\t\t\t\t\t\tIllum, nam?\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t</motion.section>\r\n\t)\r\n}\r\n\r\nexport default Home\r\n","import axios from 'axios'\r\n\r\nconst API = axios.create({ baseURL: process.env.REACT_APP_BACKEND })\r\n\r\nAPI.interceptors.request.use((req) => {\r\n\tconst profile = localStorage.getItem('profile')\r\n\r\n\tconsole.log(req.url, req.headers)\r\n\r\n\tif (profile) {\r\n\t\treq.headers.Authorization = `Bearer ${JSON.parse(profile).token}`\r\n\t}\r\n\r\n\treturn req\r\n})\r\n\r\n// Auth\r\nexport const apiSignIn = (body) => API.post('/auth/signin', body)\r\nexport const apiSignUp = (body) => API.post('/auth/signup', body)\r\nexport const apiGoogleSignIn = (body) => API.post('/auth/signin-google', body)\r\n\r\n// Users\r\nexport const apiGetUser = (userId) => API.get(`/user/${userId}`)\r\nexport const apiFollowUser = (targetId) => API.patch(`/user/follow/${targetId}`)\r\nexport const apiUnfollowUser = (targetId) =>\r\n\tAPI.patch(`/user/unfollow/${targetId}`)\r\nexport const apiGetFollowers = (userId) => API.get(`/user/${userId}/followers`)\r\nexport const apiGetFollowing = (userId) => API.get(`/user/${userId}/following`)\r\nexport const apiBlockUser = (targetId) => API.patch(`/user/block/${targetId}`)\r\nexport const apiUnblockUser = (targetId) =>\r\n\tAPI.patch(`/user/unblock/${targetId}`)\r\nexport const apiEditUser = (body, userId) => API.patch(`/user/${userId}`, body)\r\n\r\nexport const apiDeleteUser = (userId) => API.delete(`/user/${userId}`)\r\nexport const apiDeactivateUser = (userId) =>\r\n\tAPI.patch(`/user/${userId}/deactivate`)\r\n// Make Public\r\nexport const apiReactivateUser = (userId) =>\r\n\tAPI.patch(`/user/${userId}/reactivate`)\r\n\r\n// user posts\r\nexport const apiGetPostsFromUser = (userId) => API.get(`/user/${userId}/posts`)\r\n\r\n// Password Reset\r\nexport const apiResetPasswordRequest = (userId) =>\r\n\tAPI.get(`/user/${userId}/reset-password-request`)\r\nexport const apiResetPassword = (userId, hash, body) =>\r\n\tAPI.post(`/user/${userId}/${hash}/reset-password`, body)\r\nexport const apiChangePassword = (userId) =>\r\n\tAPI.patch(`/user/${userId}/change-password`)\r\n\r\n// Verification\r\nexport const apiVerifyUser = (hash) => API.get(`/verify/${hash}`)\r\nexport const apiRequestVerification = (email) =>\r\n\tAPI.get(`/verify/request/${email}`)\r\n\r\n// Posts\r\nexport const apiGetDiscover = (filters = '?sort=rating&period=alltime') =>\r\n\tAPI.get(`/posts/discover${filters}`)\r\nexport const apiCreatePost = (body) => API.post(`/posts/create`, body)\r\nexport const apiEditPost = (body, id) => API.patch(`/posts/edit/${id}`, body)\r\nexport const apiGetPost = (id) => API.get(`/posts/post/${id}`)\r\nexport const apiSearch = (filters = '?sort=rating&period=alltime') =>\r\n\tAPI.get(`/posts/search${filters}`)\r\n\r\n// interact with posts\r\nexport const apiDeletePost = (id) => API.delete(`/posts/delete/${id}`)\r\nexport const apiLikePost = (id) => API.patch(`/posts/like/${id}`)\r\nexport const apiAddComment = (id, commentString) =>\r\n\tAPI.post(`/posts/comment/${id}`, commentString)\r\nexport const apiRemoveComment = (commentId) =>\r\n\tAPI.delete(`/posts/remove-comment/${commentId}`)\r\nexport const apiReportPost = (id) => API.patch(`/posts/report/${id}`)\r\n\r\n// get posts from tags\r\nexport const apiGetPostsWithTags = (filters) =>\r\n\tAPI.get(`/posts/tags/${filters}`)\r\n","import {\r\n\tapiAddComment,\r\n\tapiCreatePost,\r\n\tapiDeletePost,\r\n\tapiEditPost,\r\n\tapiGetDiscover,\r\n\tapiGetPost,\r\n\tapiGetPostsWithTags,\r\n\tapiLikePost,\r\n\tapiRemoveComment,\r\n\tapiReportPost,\r\n\tapiSearch,\r\n} from '../_api'\r\n\r\nexport const getPostsWithTags = async (filters) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetPostsWithTags(filters)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getDiscover = async (filters) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetDiscover(filters)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getSearch = async (filters) => {\r\n\ttry {\r\n\t\tconst { data } = await apiSearch(filters)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getPostByFriendlyId = async (id) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetPost(id)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const createPost = async (body) => {\r\n\ttry {\r\n\t\tconsole.log(body)\r\n\t\tconst { data } = await apiCreatePost(body)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const deletePost = async (id) => {\r\n\ttry {\r\n\t\tconst { data } = await apiDeletePost(id)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const editPost = async (body, id) => {\r\n\ttry {\r\n\t\tconst { data } = await apiEditPost(body, id)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const likePost = async (id) => {\r\n\ttry {\r\n\t\tconst { data } = await apiLikePost(id)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const reportPost = async (id) => {\r\n\ttry {\r\n\t\tconst { data } = await apiReportPost(id)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const commentOnPost = async (id, comment) => {\r\n\ttry {\r\n\t\tconst { data } = await apiAddComment(id, { comment })\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const removeComment = async (commentId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiRemoveComment(commentId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { AiOutlineSearch } from 'react-icons/ai'\r\nimport { Range as _range, createSliderWithTooltip } from 'rc-slider'\r\nimport 'rc-slider/assets/index.css'\r\n\r\nconst Range = createSliderWithTooltip(_range)\r\n\r\nconst Filters = ({ filters, setFilters, setFilterState }) => {\r\n\treturn (\r\n\t\t<section className=\"filters\">\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={(e) => {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\tsetFilters(filters)\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<label className=\"filters__sort\" htmlFor=\"by\">\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tname=\"by\"\r\n\t\t\t\t\t\taria-label=\"Sort by\"\r\n\t\t\t\t\t\tonChange={(e) => setFilters({ ...filters, sort: e.target.value })}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"rating\">rating</option>\r\n\t\t\t\t\t\t<option value=\"new\">new</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</label>\r\n\t\t\t\t<label className=\"filters__period\" htmlFor=\"sort\">\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tname=\"sort\"\r\n\t\t\t\t\t\taria-label=\"Sort with date filters\"\r\n\t\t\t\t\t\tonChange={(e) => setFilters({ ...filters, period: e.target.value })}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"alltime\">all time</option>\r\n\t\t\t\t\t\t<option value=\"year\">1 year</option>\r\n\t\t\t\t\t\t<option value=\"halfyear\">6 months</option>\r\n\t\t\t\t\t\t<option value=\"month\">1 month</option>\r\n\t\t\t\t\t\t<option value=\"week\">1 week</option>\r\n\t\t\t\t\t\t<option value=\"day\">today</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<p style={{ marginTop: '0.5rem' }}>Serves</p>\r\n\t\t\t\t\t<Range\r\n\t\t\t\t\t\tstyle={{ margin: '0.4rem 0 1rem 0' }}\r\n\t\t\t\t\t\tvalue={filters.serves}\r\n\t\t\t\t\t\tonChange={(value) => setFilterState({ ...filters, serves: value })}\r\n\t\t\t\t\t\tonAfterChange={(v) => setFilters({ ...filters, serves: v })}\r\n\t\t\t\t\t\tmax={12}\r\n\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\tdefaultValue={[1, 12]}\r\n\t\t\t\t\t\ttipFormatter={(value) => `${value}`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<p style={{ marginTop: '0.5rem' }}>Prep. Time</p>\r\n\t\t\t\t\t<Range\r\n\t\t\t\t\t\tstyle={{ margin: '0.4rem 0 1rem 0' }}\r\n\t\t\t\t\t\tvalue={filters.prepTime}\r\n\t\t\t\t\t\tonChange={(value) =>\r\n\t\t\t\t\t\t\tsetFilterState({ ...filters, prepTime: value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonAfterChange={(value) =>\r\n\t\t\t\t\t\t\tsetFilters({ ...filters, prepTime: value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmax={120}\r\n\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\tdefaultValue={[1, 120]}\r\n\t\t\t\t\t\ttipFormatter={(value) => `${value}min`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<p style={{ marginTop: '0.5rem' }}>Cook Time</p>\r\n\t\t\t\t\t<Range\r\n\t\t\t\t\t\tstyle={{ margin: '0.4rem 0 1rem 0' }}\r\n\t\t\t\t\t\tvalue={filters.cookTime}\r\n\t\t\t\t\t\tonChange={(value) =>\r\n\t\t\t\t\t\t\tsetFilterState({ ...filters, cookTime: value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonAfterChange={(value) =>\r\n\t\t\t\t\t\t\tsetFilters({ ...filters, cookTime: value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmax={240}\r\n\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\tdefaultValue={[1, 240]}\r\n\t\t\t\t\t\ttipFormatter={(value) => `${value}min`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label htmlFor=\"search\" className=\"discover__header__search\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"search\"\r\n\t\t\t\t\t\tid=\"search\"\r\n\t\t\t\t\t\tplaceholder=\"Search...\"\r\n\t\t\t\t\t\taria-label=\"Search query\"\r\n\t\t\t\t\t\tvalue={filters.query}\r\n\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\tsetFilterState({ ...filters, query: e.target.value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label htmlFor=\"search\" aria-label=\"Search...\">\r\n\t\t\t\t\t\t<AiOutlineSearch />\r\n\t\t\t\t\t\t<input type=\"submit\" aria-label=\"Search...\" value=\"\" />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</label>\r\n\t\t\t</form>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default Filters\r\n","import DOMPurify from 'dompurify'\r\n\r\nexport const bufferToBase64 = (buffer) => {\r\n\tvar binary = ''\r\n\tvar bytes = new Uint8Array(buffer)\r\n\tvar len = bytes.byteLength\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tbinary += String.fromCharCode(bytes[i])\r\n\t}\r\n\treturn window.btoa(binary)\r\n}\r\n\r\n/**\r\n *\r\n * @param {Object} filters\r\n * @returns {String}\r\n */\r\nexport const formatFilters = (filters) =>\r\n\tfilters.tags?.length >= 1\r\n\t\t? `?include=${filters.tags?.join(',')}&sort=${filters.sort}&period=${\r\n\t\t\t\tfilters.period\r\n\t\t  }&serves=${filters.serves[0]}-${filters.serves[1]}&prepTime=${\r\n\t\t\t\tfilters.prepTime[0]\r\n\t\t  }-${filters.prepTime[1]}&cookTime=${filters.cookTime[0]}-${\r\n\t\t\t\tfilters.cookTime[1]\r\n\t\t  }&page=${filters.page}&perPage=${filters.perPage}${\r\n\t\t\t\tfilters?.query !== '' ? `&terms=${filters?.query}` : ''\r\n\t\t  }`\r\n\t\t: `?sort=${filters.sort}&period=${filters.period}&serves=${\r\n\t\t\t\tfilters.serves[0]\r\n\t\t  }-${filters.serves[1]}&prepTime=${filters.prepTime[0]}-${\r\n\t\t\t\tfilters.prepTime[1]\r\n\t\t  }&cookTime=${filters.cookTime[0]}-${filters.cookTime[1]}&page=${\r\n\t\t\t\tfilters.page\r\n\t\t  }&perPage=${filters.perPage}${\r\n\t\t\t\tfilters?.query !== '' ? `&terms=${filters?.query}` : ''\r\n\t\t  }`\r\n\r\nconst imagePattern = /(![\\[][\\w\\d-_]{0,})[\\]]/g\r\n\r\n/**\r\n * Loop through ![img]'s and get corresponding base64,\r\n * \tinjecting this into brackets to render in markdown\r\n * @param {String} content\r\n */\r\nexport const placeImageInContent = (content, images) => {\r\n\tconst result = content.matchAll(imagePattern)\r\n\tlet contentString = content\r\n\r\n\tconst imgNames = images.map((img) => img.name)\r\n\r\n\tlet value\r\n\t// loop through all ![...] occurences\r\n\twhile (!(value = result.next()).done) {\r\n\t\tconst imgName = value.value[0].substring(2, value.value[0].length - 1)\r\n\t\tif (!imgNames.includes(imgName)) {\r\n\t\t\tcontentString = contentString.replace(value.value[0], '')\r\n\t\t\tcontinue\r\n\t\t}\r\n\r\n\t\t// find the image\r\n\t\tconst img = images.find((image, idx) => image.name === imgName)\r\n\r\n\t\t// replace the string occurence with ![...](image base64 string)\r\n\t\tcontentString = contentString.replace(\r\n\t\t\tvalue.value[0],\r\n\t\t\t`\\n![${imgName}](${img.base64})`\r\n\t\t)\r\n\t}\r\n\r\n\t// sanitize the content string to avoid any malicious tags e.g. <script>\r\n\tcontentString = DOMPurify.sanitize(contentString)\r\n\r\n\treturn contentString\r\n}\r\n\r\nexport const formatLargeNumber = (num) => {\r\n\tif (num > 1_000_000) return `${parseFloat(Number(num / 1000000).toFixed(1))}M`\r\n\telse if (num > 100_000) return `${parseFloat(Number(num / 1000).toFixed(1))}K`\r\n\telse if (num > 10_000) return `${parseFloat(Number(num / 1000).toFixed(1))}K`\r\n\telse if (num > 1_000) return `${parseFloat(Number(num / 1000).toFixed(1))}K`\r\n\telse return `${num}`\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { CgBowl } from 'react-icons/cg'\r\nimport { BsHeartFill } from 'react-icons/bs'\r\nimport { BiTimeFive } from 'react-icons/bi'\r\nimport { formatLargeNumber } from '../../util/util'\r\n\r\nconst Item = ({ object: recipe, delay, isOnProfile = false }) => {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"recipe\"\r\n\t\t\tdata-aos=\"zoom-in\"\r\n\t\t\tdata-aos-delay={delay * 100}\r\n\t\t\tdata-aos-once=\"true\"\r\n\t\t\tdata-aos-anchor-placement=\"bottom\"\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"recipe__bg\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tbackgroundImage: `url(\"${\r\n\t\t\t\t\t\trecipe?.images[0]?.base64 ? recipe?.images[0]?.base64 : ''\r\n\t\t\t\t\t}\")`,\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"recipe__bg__overlay\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<CgBowl />\r\n\t\t\t\t\t\t\t{recipe?.serves}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<BiTimeFive />\r\n\t\t\t\t\t\t\t{`${recipe?.cookTime}m`}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<BiTimeFive />\r\n\t\t\t\t\t\t\t{`${recipe?.prepTime}m`}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{recipe.user && (\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\t<Link to={`/recipe/${recipe.userFriendlyId}`}>\r\n\t\t\t\t\t\t\t\t{recipe.title}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<BsHeartFill /> {formatLargeNumber(recipe?.likes?.length)}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{!isOnProfile && (\r\n\t\t\t\t\t\t<div className=\"avatar\">\r\n\t\t\t\t\t\t\t<Link to={`profiles/${recipe?.user?._id}`}>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\t\trecipe.user.imageUrl\r\n\t\t\t\t\t\t\t\t\t\t\t? recipe.user.imageUrl\r\n\t\t\t\t\t\t\t\t\t\t\t: '/images/default-avatar.png'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\talt={`${recipe.user.username}'s avatar'`}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</header>\r\n\t\t\t)}\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"recipe__preview\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tbackgroundImage: `url(${\r\n\t\t\t\t\t\trecipe?.images[0]?.base64 ? recipe?.images[0]?.base64 : ''\r\n\t\t\t\t\t})`,\r\n\t\t\t\t}}\r\n\t\t\t></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Item\r\n","import React from 'react'\r\nimport { useHistory } from 'react-router'\r\n\r\nconst Pages = ({ setFilters, filters }) => {\r\n\tconst history = useHistory()\r\n\r\n\tlet page_arr = []\r\n\tfor (\r\n\t\tlet i = filters.page - 2 < 1 ? 1 : filters.page - 2;\r\n\t\ti < filters.page + 3 && i <= filters.pageCount;\r\n\t\ti++\r\n\t) {\r\n\t\tpage_arr.push(i)\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{page_arr.map((page, idx) =>\r\n\t\t\t\tpage === filters.page ? (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{ cursor: 'default' }}\r\n\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\taria-label={`Showing results for current page`}\r\n\t\t\t\t\t\tclassName=\"btn btn--no-bg btn--page btn--page-selected\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{page}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\taria-label={`Show results for page ${page}`}\r\n\t\t\t\t\t\tclassName=\"btn btn--no-bg btn--page\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetFilters({ ...filters, page: page })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{page}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Pages\r\n","import React, { useState } from 'react'\r\n\r\nconst Tags = ({ filters, setFilters, onClickTag }) => {\r\n\tconst [tag, setTag] = useState('')\r\n\r\n\treturn (\r\n\t\t<div className=\"discover__header__tags\">\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={(e) => {\r\n\t\t\t\t\te.preventDefault()\r\n\r\n\t\t\t\t\tif (tag && !filters?.tags?.includes(tag)) {\r\n\t\t\t\t\t\tsetFilters({ ...filters, tags: [...filters?.tags, tag] })\r\n\t\t\t\t\t\tsetTag('')\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<input\r\n\t\t\t\t\tvalue={tag}\r\n\t\t\t\t\tonChange={(e) => setTag(e.target.value)}\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tclassName=\"custom_input custom_input--border\"\r\n\t\t\t\t\tplaceholder=\"Add tags...\"\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tvalue=\"+\"\r\n\t\t\t\t\tclassName=\"btn btn--solid btn--solid-blue\"\r\n\t\t\t\t/>\r\n\t\t\t</form>\r\n\t\t\t<div>\r\n\t\t\t\t{filters?.tags?.map((tag, idx) => (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn btn--no-bg btn--tag\"\r\n\t\t\t\t\t\tonClick={() => onClickTag(tag)}\r\n\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{tag}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Tags\r\n","import { motion } from 'framer-motion'\r\nimport React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getDiscover, getPostsWithTags } from '../../_actions/post'\r\nimport Filters from '../../components/Filters'\r\nimport { formatFilters } from '../../util/util'\r\nimport Item from '../../components/RecipeCard/Item'\r\nimport Pages from './Pages'\r\nimport { useHistory, useLocation } from 'react-router'\r\nimport Tags from '../../components/Tags'\r\n\r\nconst Discover = () => {\r\n\tconst dispatch = useDispatch()\r\n\tconst location = useLocation()\r\n\tconst history = useHistory()\r\n\r\n\tconst [filters, setFilters] = useState({\r\n\t\tsort: 'rating',\r\n\t\tperiod: 'alltime',\r\n\t\tserves: [1, 12],\r\n\t\tprepTime: [1, 120],\r\n\t\tcookTime: [1, 240],\r\n\t\ttags: [],\r\n\t\tpage: 1,\r\n\t\tperPage: 25,\r\n\t\tpageCount: 1,\r\n\t\tquery: '',\r\n\t})\r\n\r\n\tconst posts = useSelector((state) => state.post.all)\r\n\r\n\t// on location change\r\n\tuseEffect(() => {\r\n\t\t// get tags from URL\r\n\t\tlet tags = []\r\n\r\n\t\ttry {\r\n\t\t\ttags = location.search.replace('?tags=', '')\r\n\r\n\t\t\tif (tags?.length !== 0) {\r\n\t\t\t\ttags = tags.split(',')\r\n\t\t\t\tfilters.tags = tags\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\t// error - url params are not correct\r\n\t\t}\r\n\r\n\t\t// get with tags\r\n\t\tif (filters?.tags?.length >= 1) {\r\n\t\t\tgetPostsWithTags(formatFilters(filters))\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tsetFilters({ ...filters, pageCount: Number(res?.pages || 1) })\r\n\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: 'POST/SET_ALL',\r\n\t\t\t\t\t\tpayload: res.result,\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {})\r\n\t\t\t// get discover page\r\n\t\t} else {\r\n\t\t\tgetDiscover(formatFilters(filters, filters.query)).then((res) => {\r\n\t\t\t\tsetFilters({ ...filters, pageCount: Number(res.pages) })\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: 'POST/SET_ALL',\r\n\t\t\t\t\tpayload: res.result,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}, [location])\r\n\r\n\tconst handleSetFilters = (value) => {\r\n\t\tsetFilters(value)\r\n\r\n\t\tif (value?.tags?.length !== 0) {\r\n\t\t\t// tags\r\n\t\t\tgetPostsWithTags(formatFilters(value, value.query)).then((res) => {\r\n\t\t\t\tsetFilters({ ...value, pageCount: Number(res.pages) || 0 })\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: 'POST/SET_ALL',\r\n\t\t\t\t\tpayload: res.result,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\t// discover\r\n\r\n\t\t\tgetDiscover(formatFilters(value, value.query)).then((res) => {\r\n\t\t\t\tsetFilters({ ...value, pageCount: Number(res.pages) || 0 })\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: 'POST/SET_ALL',\r\n\t\t\t\t\tpayload: res.result,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<motion.section\r\n\t\t\tclassName=\"discover\"\r\n\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\texit={{ opacity: 0 }}\r\n\t\t>\r\n\t\t\t<header className=\"discover__header\">\r\n\t\t\t\t<h1 data-aos=\"zoom-out\">\r\n\t\t\t\t\t<span>discover</span> a taste\r\n\t\t\t\t</h1>\r\n\t\t\t\t<Filters\r\n\t\t\t\t\tfilters={filters}\r\n\t\t\t\t\tsetFilters={handleSetFilters}\r\n\t\t\t\t\tsetFilterState={setFilters}\r\n\t\t\t\t/>\r\n\t\t\t\t<Tags\r\n\t\t\t\t\tfilters={filters}\r\n\t\t\t\t\tsetFilters={(val) => {\r\n\t\t\t\t\t\tsetFilters(val)\r\n\r\n\t\t\t\t\t\thistory.push(`/discover?tags=${val?.tags?.join(',')}`)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClickTag={(_tag) => {\r\n\t\t\t\t\t\tconst tags = filters?.tags?.filter((tag) => tag !== _tag)\r\n\r\n\t\t\t\t\t\tsetFilters({ ...filters, tags })\r\n\r\n\t\t\t\t\t\tif (tags?.length === 0) {\r\n\t\t\t\t\t\t\thistory.push('/discover')\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\thistory.push(`/discover?tags=${tags.join(',')}`)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</header>\r\n\t\t\t<section className=\"discover__grid\">\r\n\t\t\t\t{posts &&\r\n\t\t\t\t\tposts.map((post, idx) => (\r\n\t\t\t\t\t\t<Item delay={idx} key={idx} object={post} />\r\n\t\t\t\t\t))}\r\n\t\t\t</section>\r\n\t\t\t<footer className=\"discover__pagination\">\r\n\t\t\t\t<div className=\"discover__pagination__pages\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Pages setFilters={handleSetFilters} filters={filters} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p>{filters.pageCount} pages total</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"discover__pagination__perPage\">\r\n\t\t\t\t\t<label className=\"filters__perPage\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tname=\"perPage\"\r\n\t\t\t\t\t\t\taria-label=\"Amount of items per page\"\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\thandleSetFilters({\r\n\t\t\t\t\t\t\t\t\t...filters,\r\n\t\t\t\t\t\t\t\t\tperPage: Number(e.target.value),\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"25\">25</option>\r\n\t\t\t\t\t\t\t<option value=\"50\">50</option>\r\n\t\t\t\t\t\t\t<option value=\"100\">100</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t<p>Items per page</p>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t</footer>\r\n\t\t</motion.section>\r\n\t)\r\n}\r\n\r\nexport default Discover\r\n","import React from 'react'\r\nimport GoogleLogin from 'react-google-login'\r\n\r\nconst ThirdPartyAuth = ({ onSuccessFacebook, onSuccessGoogle }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<GoogleLogin\r\n\t\t\t\tclientId=\"544966638845-agilmeq086cka6f2cpi30d4559g9u4a4.apps.googleusercontent.com\"\r\n\t\t\t\tonSuccess={onSuccessGoogle}\r\n\t\t\t\tclassName=\"btn btn--no-border btn--no-bg\"\r\n\t\t\t\taria-label=\"Login with a Google account\"\r\n\t\t\t></GoogleLogin>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ThirdPartyAuth\r\n","import { apiSignIn, apiSignUp, apiGoogleSignIn } from '../_api'\r\n\r\nexport const signIn = async (body) => {\r\n\ttry {\r\n\t\tconst { data } = await apiSignIn(body)\r\n\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const signUp = async (body) => {\r\n\ttry {\r\n\t\tconst { data } = await apiSignUp(body)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const googleSignin = async (body) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGoogleSignIn(body)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { AiOutlineEye, AiOutlineEyeInvisible } from 'react-icons/ai'\r\nimport { useState } from 'react'\r\nimport ThirdPartyAuth from './ThirdPartyAuth'\r\nimport { googleSignin } from '../../_actions/auth'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nconst Login = ({ handleSignIn }) => {\r\n\tconst dispatch = useDispatch()\r\n\tconst history = useHistory()\r\n\r\n\tconst [showPass, setShowPass] = useState(false)\r\n\tconst [formData, setFormData] = useState({ email: '', password: '' })\r\n\treturn (\r\n\t\t<section className=\"auth__login\" data-aos=\"fade-in\" data-aos-delay=\"150\">\r\n\t\t\t<div className=\"auth__container\">\r\n\t\t\t\t<form\r\n\t\t\t\t\taction=\"\"\r\n\t\t\t\t\tonSubmit={(e) => handleSignIn(e, formData)}\r\n\t\t\t\t\tclassName=\"auth__form\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\t\tvalue={formData.email}\r\n\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\tsetFormData({ ...formData, email: e.target.value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<label htmlFor=\"password\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\ttype={showPass ? 'text' : 'password'}\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\tvalue={formData.password}\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tsetFormData({ ...formData, password: e.target.value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div onClick={() => setShowPass(!showPass)}>\r\n\t\t\t\t\t\t\t{showPass ? <AiOutlineEyeInvisible /> : <AiOutlineEye />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t<input type=\"submit\" className=\"btn btn--pill\" value=\"Login\" />\r\n\t\t\t\t</form>\r\n\r\n\t\t\t\t<ThirdPartyAuth\r\n\t\t\t\t\tonSuccessGoogle={(e) => {\r\n\t\t\t\t\t\tconst { tokenId, profileObj } = e\r\n\r\n\t\t\t\t\t\tconsole.log(e)\r\n\r\n\t\t\t\t\t\tgoogleSignin({\r\n\t\t\t\t\t\t\ttokenId,\r\n\t\t\t\t\t\t\timageUrl: profileObj.imageUrl,\r\n\t\t\t\t\t\t\tgoogleId: profileObj.googleId,\r\n\t\t\t\t\t\t\temail: profileObj.email,\r\n\t\t\t\t\t\t\tusername: profileObj.name,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\t\ttype: 'AUTH/SIGN_IN',\r\n\t\t\t\t\t\t\t\t\tpayload: { ...res },\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\thistory.push('/discover')\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Link to=\"/forgot-password\" aria-label=\"Forgot password link\">\r\n\t\t\t\t\tForgot your password?\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to=\"/signup\" aria-label=\"Switch to signup form\">\r\n\t\t\t\t\tDon't have an account? Sign up\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default Login\r\n","import React from 'react'\r\nimport { useState } from 'react'\r\nimport {\r\n\tAiFillFacebook,\r\n\tAiFillGoogleCircle,\r\n\tAiOutlineEye,\r\n\tAiOutlineEyeInvisible,\r\n} from 'react-icons/ai'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { googleSignin } from '../../_actions/auth'\r\nimport ThirdPartyAuth from './ThirdPartyAuth'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nconst Signup = ({ handleSignUp }) => {\r\n\tconst dispatch = useDispatch()\r\n\tconst history = useHistory()\r\n\r\n\tconst [showPass, setShowPass] = useState(false)\r\n\tconst [formData, setFormData] = useState({\r\n\t\tusername: '',\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t\trepeatPassword: '',\r\n\t})\r\n\r\n\treturn (\r\n\t\t<section className=\"auth__signup\" data-aos=\"fade-in\" data-aos-delay=\"150\">\r\n\t\t\t<div className=\"auth__container\">\r\n\t\t\t\t<form\r\n\t\t\t\t\taction=\"\"\r\n\t\t\t\t\tonSubmit={(e) => handleSignUp(e, formData)}\r\n\t\t\t\t\tclassName=\"auth__form\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\tvalue={formData.username}\r\n\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\tsetFormData({ ...formData, username: e.target.value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\t\tvalue={formData.email}\r\n\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\tsetFormData({ ...formData, email: e.target.value })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<label htmlFor=\"password\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\ttype={showPass ? 'text' : 'password'}\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\tvalue={formData.password}\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tsetFormData({ ...formData, password: e.target.value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div onClick={() => setShowPass(!showPass)}>\r\n\t\t\t\t\t\t\t{showPass ? <AiOutlineEyeInvisible /> : <AiOutlineEye />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t<label htmlFor=\"repeatPassword\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\ttype={showPass ? 'text' : 'password'}\r\n\t\t\t\t\t\t\tname=\"repeatPassword\"\r\n\t\t\t\t\t\t\tid=\"repeatPassword\"\r\n\t\t\t\t\t\t\tplaceholder=\"Repeat Password\"\r\n\t\t\t\t\t\t\tvalue={formData.repeatPassword}\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tsetFormData({ ...formData, repeatPassword: e.target.value })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div onClick={() => setShowPass(!showPass)}>\r\n\t\t\t\t\t\t\t{showPass ? <AiOutlineEyeInvisible /> : <AiOutlineEye />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t<input type=\"submit\" className=\"btn btn--pill\" value=\"Sign up\" />\r\n\t\t\t\t</form>\r\n\r\n\t\t\t\t<p>Or...</p>\r\n\r\n\t\t\t\t<ThirdPartyAuth\r\n\t\t\t\t\tonSuccessGoogle={(e) => {\r\n\t\t\t\t\t\tconst { tokenId, profileObj } = e\r\n\r\n\t\t\t\t\t\tconsole.log(e)\r\n\r\n\t\t\t\t\t\tgoogleSignin({\r\n\t\t\t\t\t\t\ttokenId,\r\n\t\t\t\t\t\t\timageUrl: profileObj.imageUrl,\r\n\t\t\t\t\t\t\tgoogleId: profileObj.googleId,\r\n\t\t\t\t\t\t\temail: profileObj.email,\r\n\t\t\t\t\t\t\tusername: profileObj.name,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\t\ttype: 'AUTH/SIGN_IN',\r\n\t\t\t\t\t\t\t\t\tpayload: { ...res },\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\thistory.push('/discover')\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Link to=\"/login\" aria-label=\"Switch to login form\">\r\n\t\t\t\t\tAlready have an account? Login\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default Signup\r\n","/*\r\n  Logger element to show any error messages which the client needs to see\r\n*/\r\nimport React from 'react'\r\nimport { IoAlertCircleOutline } from 'react-icons/io5'\r\nimport { HiLightBulb } from 'react-icons/hi'\r\n\r\nconst TopMostLogger = ({ title, message, show }) => {\r\n\tconst className = show\r\n\t\t? (title.toLowerCase() === 'alert' &&\r\n\t\t\t\t'logger logger--showing logger--alert') ||\r\n\t\t  (title.toLowerCase() === 'error' &&\r\n\t\t\t\t'logger logger--showing logger--error')\r\n\t\t: 'logger'\r\n\r\n\treturn (\r\n\t\t<div className={className}>\r\n\t\t\t<header aria-label={title} className=\"logger__title\">\r\n\t\t\t\t{title.toLowerCase() === 'alert' && <HiLightBulb />}\r\n\t\t\t\t{title.toLowerCase() === 'error' && <IoAlertCircleOutline />}\r\n\t\t\t\t{title}\r\n\t\t\t</header>\r\n\t\t\t<summary className=\"logger__message\">{message}</summary>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default TopMostLogger\r\n","import { motion } from 'framer-motion'\r\nimport React, { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport Login from './Login'\r\nimport Signup from './Signup'\r\nimport TopMostLogger from '../../components/TopMostLogger'\r\nimport { signIn, signUp } from '../../_actions/auth'\r\n\r\nconst Auth = () => {\r\n\tconst history = useHistory()\r\n\tconst location = useLocation()\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst [title, setTitle] = useState('')\r\n\tconst [message, setMessage] = useState('')\r\n\tconst [showing, setShowing] = useState(false)\r\n\r\n\tconst showDialog = (title, message, duration = 2000) => {\r\n\t\tif (showing) return\r\n\r\n\t\tsetTitle(title)\r\n\t\tsetMessage(message)\r\n\t\tsetShowing(true)\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetShowing(false)\r\n\t\t}, duration)\r\n\t}\r\n\r\n\tconst handleSignUp = async (e, body) => {\r\n\t\te.preventDefault()\r\n\r\n\t\tif (\r\n\t\t\t!body?.email ||\r\n\t\t\t!body?.username ||\r\n\t\t\t!body?.password ||\r\n\t\t\t!body?.repeatPassword\r\n\t\t) {\r\n\t\t\tshowDialog('Error', 'Please fill in required details.')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst res = await signUp(body)\r\n\r\n\t\tif (res.verificationSent) {\r\n\t\t\tshowDialog('Alert', `Verification email sent to ${res.user.email}`, 3500)\r\n\t\t}\r\n\r\n\t\t// Show an error if a there was one, otherwise dispatch\r\n\t\tif (!res.error) dispatch({ payload: res, type: 'AUTH/SIGN_UP' })\r\n\t\telse showDialog('Error', res.error)\r\n\t}\r\n\r\n\tconst handleSignIn = async (e, body) => {\r\n\t\te.preventDefault()\r\n\r\n\t\tif (!body?.email || !body?.password) {\r\n\t\t\tshowDialog('Error', 'Please fill in the required details.')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst res = await signIn(body)\r\n\r\n\t\tif (!res.error) {\r\n\t\t\tdispatch({ payload: res, type: 'AUTH/SIGN_IN' })\r\n\t\t\thistory.push('/discover')\r\n\t\t} else showDialog('Error', res.error)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<motion.section className=\"auth\">\r\n\t\t\t<div className=\"auth__wrapper\">\r\n\t\t\t\t<TopMostLogger title={title} message={message} show={showing} />\r\n\r\n\t\t\t\t{location.pathname === '/login' && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<h1 data-aos=\"zoom-out\">Login</h1>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t<Login handleSignIn={handleSignIn} />\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{location.pathname === '/signup' && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<h1 data-aos=\"zoom-out\">Sign up</h1>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t<Signup handleSignUp={handleSignUp} />\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</motion.section>\r\n\t)\r\n}\r\n\r\nexport default Auth\r\n","import {\r\n\tapiBlockUser,\r\n\tapiFollowUser,\r\n\tapiGetFollowers,\r\n\tapiGetFollowing,\r\n\tapiGetPostsFromUser,\r\n\tapiGetUser,\r\n\tapiUnblockUser,\r\n\tapiUnfollowUser,\r\n} from '../_api'\r\n\r\nexport const getUser = async (userId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetUser(userId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const followUser = async (targetId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiFollowUser(targetId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\nexport const unfollowUser = async (targetId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiUnfollowUser(targetId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const blockUser = async (targetId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiBlockUser(targetId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const unblockUser = async (targetId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiUnblockUser(targetId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getFollowers = async (userId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetFollowers(userId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getFollowing = async (userId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetFollowing(userId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getUserPosts = async (userId) => {\r\n\ttry {\r\n\t\tconst { data } = await apiGetPostsFromUser(userId)\r\n\t\treturn data\r\n\t} catch (err) {\r\n\t\treturn {\r\n\t\t\terror: err?.response?.data?.message || err?.response?.data?.error,\r\n\t\t}\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { IoMdClose } from 'react-icons/io'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst Modal = ({ modal, closeModal }) => {\r\n\treturn (\r\n\t\t<div className={modal.showing ? 'modal modal--active' : 'modal'}>\r\n\t\t\t<header className=\"modal__header\">\r\n\t\t\t\t<h1>{modal.title}</h1>\r\n\t\t\t\t<button className=\"btn btn--no-bg\" aria-label=\"Close\">\r\n\t\t\t\t\t<IoMdClose onClick={() => closeModal()} />\r\n\t\t\t\t</button>\r\n\t\t\t</header>\r\n\t\t\t<div className=\"modal__body\">\r\n\t\t\t\t{modal.children &&\r\n\t\t\t\t\tmodal.children.map((child, idx) => (\r\n\t\t\t\t\t\t<div className=\"modal__body__user\" key={idx}>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\tchild.imageUrl ? child.imageUrl : '/images/default-avatar.png'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\talt={`Picture of ${child.username}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Link to={`/profiles/${child._id}`}>{child.username}</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Modal\r\n","import React from 'react'\r\n\r\nconst Spinner = () => {\r\n\treturn (\r\n\t\t<div className=\"spinner\">\r\n\t\t\t<svg\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tmargin: 'auto',\r\n\t\t\t\t\tbackground: 'rgba(255, 255, 255, 0) none repeat scroll 0% 0%',\r\n\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t}}\r\n\t\t\t\twidth=\"4rem\"\r\n\t\t\t\theight=\"4rem\"\r\n\t\t\t\tviewBox=\"0 0 100 100\"\r\n\t\t\t\tpreserveAspectRatio=\"xMidYMid\"\r\n\t\t\t>\r\n\t\t\t\t<circle\r\n\t\t\t\t\tcx=\"50\"\r\n\t\t\t\t\tcy=\"50\"\r\n\t\t\t\t\tr=\"32\"\r\n\t\t\t\t\tstrokeWidth=\"8\"\r\n\t\t\t\t\tstroke=\"#112aa9\"\r\n\t\t\t\t\tstrokeDasharray=\"50.26548245743669 50.26548245743669\"\r\n\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<animateTransform\r\n\t\t\t\t\t\tattributeName=\"transform\"\r\n\t\t\t\t\t\ttype=\"rotate\"\r\n\t\t\t\t\t\trepeatCount=\"indefinite\"\r\n\t\t\t\t\t\tdur=\"1s\"\r\n\t\t\t\t\t\tkeyTimes=\"0;1\"\r\n\t\t\t\t\t\tvalues=\"0 50 50;360 50 50\"\r\n\t\t\t\t\t></animateTransform>\r\n\t\t\t\t</circle>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Spinner\r\n","import React, { useEffect, useState } from 'react'\r\nimport { getUserPosts } from '../../_actions/user'\r\nimport Item from '../../components/RecipeCard/Item'\r\n\r\nconst ProfilePosts = ({ profile }) => {\r\n\tconst [posts, setPosts] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!profile?._id) return\r\n\r\n\t\tgetUserPosts(profile?._id)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tsetPosts([...res.result])\r\n\t\t\t})\r\n\t\t\t.catch((err) => {})\r\n\t}, [profile])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{posts.map((post, idx) => (\r\n\t\t\t\t<Item delay={idx} object={post} key={idx} isOnProfile={true} />\r\n\t\t\t))}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default ProfilePosts\r\n","import { motion } from 'framer-motion'\r\nimport React from 'react'\r\nimport { useEffect } from 'react'\r\nimport {\r\n\tAiOutlineLogout,\r\n\tAiOutlineMessage,\r\n\tAiOutlineUserAdd,\r\n\tAiOutlineUserDelete,\r\n} from 'react-icons/ai'\r\nimport { IoOptionsOutline } from 'react-icons/io5'\r\nimport { CgBlock, CgUnblock } from 'react-icons/cg'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport {\r\n\tblockUser,\r\n\tfollowUser,\r\n\tgetFollowers,\r\n\tgetFollowing,\r\n\tgetUser,\r\n\tunblockUser,\r\n\tunfollowUser,\r\n} from '../../_actions/user'\r\nimport Modal from './Modal'\r\nimport { useState } from 'react'\r\nimport { formatLargeNumber } from '../../util/util'\r\nimport Spinner from '../../components/Spinner'\r\nimport ProfilePosts from './ProfilePosts'\r\n\r\nconst Profile = ({ id }) => {\r\n\t// get the profile via id on mount (useEffect)\r\n\tconst dispatch = useDispatch()\r\n\tconst history = useHistory()\r\n\r\n\tconst [modal, setModal] = useState({\r\n\t\tshowing: false,\r\n\t\ttitle: '',\r\n\t\tchildren: [],\r\n\t})\r\n\r\n\tconst profile = useSelector((state) => state.user.single) || null\r\n\r\n\tconst me = useSelector((state) => state.auth.user) || null\r\n\r\n\tuseEffect(() => {\r\n\t\tgetUser(id).then((res) => {\r\n\t\t\t// Skip if error\r\n\t\t\tif (res.error) return\r\n\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: 'USER/SET_USER',\r\n\t\t\t\tpayload: res,\r\n\t\t\t})\r\n\r\n\t\t\tgetFollowers(id).then((response) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: 'USER/SET_USER_FOLLOWERS',\r\n\t\t\t\t\tpayload: response.result,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\tgetFollowing(id).then((response) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: 'USER/SET_USER_FOLLOWING',\r\n\t\t\t\t\tpayload: response.result,\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t}, [])\r\n\r\n\tconst _followUser = async (_id) => {\r\n\t\tconst { user, target } = await followUser(_id)\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: 'AUTH/EDIT_STORED_USER',\r\n\t\t\tpayload: {\r\n\t\t\t\tuser: user,\r\n\t\t\t\ttoken: JSON.parse(localStorage.getItem('profile')).token,\r\n\t\t\t},\r\n\t\t})\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: 'USER/EDIT_USER',\r\n\t\t\tpayload: target,\r\n\t\t})\r\n\t}\r\n\tconst _unfollowUser = async (_id) => {\r\n\t\tconst { user, target } = await unfollowUser(_id)\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: 'AUTH/EDIT_STORED_USER',\r\n\t\t\tpayload: {\r\n\t\t\t\tuser: user,\r\n\t\t\t\ttoken: JSON.parse(localStorage.getItem('profile')).token,\r\n\t\t\t},\r\n\t\t})\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: 'USER/EDIT_USER',\r\n\t\t\tpayload: target,\r\n\t\t})\r\n\t}\r\n\r\n\tconst _blockUser = async (_id) => {\r\n\t\tconst { user } = me.blockList.includes(profile._id)\r\n\t\t\t? await unblockUser(_id)\r\n\t\t\t: await blockUser(_id)\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: 'AUTH/EDIT_STORED_USER',\r\n\t\t\tpayload: {\r\n\t\t\t\tuser,\r\n\t\t\t\ttoken: JSON.parse(localStorage.getItem('profile')).token,\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\r\n\tconst showFollowers = () => {\r\n\t\tlet showing = false\r\n\r\n\t\tif (profile._followers?.length === 0 || profile.followers?.length === 0) {\r\n\t\t\tshowing = false\r\n\t\t} else {\r\n\t\t\tshowing = true\r\n\t\t}\r\n\r\n\t\tsetModal({\r\n\t\t\t...modal,\r\n\t\t\ttitle: 'Followers',\r\n\t\t\tshowing,\r\n\t\t\tchildren: profile._followers,\r\n\t\t})\r\n\t}\r\n\r\n\tconst showFollowing = () => {\r\n\t\tlet showing = false\r\n\r\n\t\tif (profile._following?.length === 0) {\r\n\t\t\tshowing = false\r\n\t\t} else {\r\n\t\t\tshowing = true\r\n\t\t}\r\n\r\n\t\tsetModal({\r\n\t\t\t...modal,\r\n\t\t\ttitle: 'Following',\r\n\t\t\tshowing,\r\n\t\t\tchildren: profile._following,\r\n\t\t})\r\n\t}\r\n\r\n\tconst closeModal = () => {\r\n\t\tsetModal({ ...modal, showing: false })\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal closeModal={closeModal} modal={modal} />\r\n\r\n\t\t\t<motion.section\r\n\t\t\t\tclassName=\"profile\"\r\n\t\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\t\texit={{ opacity: 0 }}\r\n\t\t\t>\r\n\t\t\t\t{profile && me ? (\r\n\t\t\t\t\t<div className=\"profile__card\">\r\n\t\t\t\t\t\t<header className=\"profile__card__header\">\r\n\t\t\t\t\t\t\t<div className=\"profile__card__header__avatar\">\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\t\tprofile.imageUrl\r\n\t\t\t\t\t\t\t\t\t\t\t? profile.imageUrl\r\n\t\t\t\t\t\t\t\t\t\t\t: '/images/default-avatar.png'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\talt={`Picture of ${profile.username}`}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"profile__card__header__details\">\r\n\t\t\t\t\t\t\t\t<h1>{profile.username}</h1>\r\n\t\t\t\t\t\t\t\t<span className=\"score\">{profile?.score} Score</span>\r\n\t\t\t\t\t\t\t\t<div className=\"profile__card__header__details__stats\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\taria-label={\r\n\t\t\t\t\t\t\t\t\t\t\tprofile?.followers?.length === 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t? '0 followers'\r\n\t\t\t\t\t\t\t\t\t\t\t\t: `View ${profile?.followers?.length} followers`\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => showFollowers()}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{formatLargeNumber(profile?.followers?.length)} Followers\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => showFollowing()}\r\n\t\t\t\t\t\t\t\t\t\taria-label={\r\n\t\t\t\t\t\t\t\t\t\t\tprofile.following.length === 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t? '0 following'\r\n\t\t\t\t\t\t\t\t\t\t\t\t: `View ${profile.following.length} following`\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{formatLargeNumber(profile.following.length)} Following\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</header>\r\n\r\n\t\t\t\t\t\t{me?._id !== id ? (\r\n\t\t\t\t\t\t\t<section className=\"profile__card__actions\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn--pill\"\r\n\t\t\t\t\t\t\t\t\taria-label={\r\n\t\t\t\t\t\t\t\t\t\tprofile.followers.includes(me._id)\r\n\t\t\t\t\t\t\t\t\t\t\t? 'Unfollow this user'\r\n\t\t\t\t\t\t\t\t\t\t\t: 'Follow this user'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\tprofile.followers.includes(me._id)\r\n\t\t\t\t\t\t\t\t\t\t\t? _unfollowUser(id)\r\n\t\t\t\t\t\t\t\t\t\t\t: _followUser(id)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{profile.followers.includes(me._id) ? (\r\n\t\t\t\t\t\t\t\t\t\t<AiOutlineUserDelete />\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<AiOutlineUserAdd />\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t{profile.followers.includes(me._id) ? 'Unfollow' : 'Follow'}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn--pill\"\r\n\t\t\t\t\t\t\t\t\taria-label=\"Message this user\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<AiOutlineMessage />\r\n\t\t\t\t\t\t\t\t\tMessage\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\taria-label={\r\n\t\t\t\t\t\t\t\t\t\tme.blockList.includes(profile._id)\r\n\t\t\t\t\t\t\t\t\t\t\t? 'Unblock this user'\r\n\t\t\t\t\t\t\t\t\t\t\t: 'Block this user'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonClick={() => _blockUser(id)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{me.blockList.includes(profile._id) ? (\r\n\t\t\t\t\t\t\t\t\t\t<CgUnblock />\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<CgBlock />\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t{me.blockList.includes(profile._id) ? 'Unblock' : 'Block'}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<section className=\"profile__card__actions\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\taria-label=\"Logout\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tdispatch({ type: 'AUTH/LOG_OUT' })\r\n\t\t\t\t\t\t\t\t\t\thistory.goBack()\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<AiOutlineLogout />\r\n\t\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn--pill\"\r\n\t\t\t\t\t\t\t\t\taria-label=\"Message this user\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<IoOptionsOutline />\r\n\t\t\t\t\t\t\t\t\tSettings\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<article className=\"profile__card__bio\" aria-label=\"Profile bio\">\r\n\t\t\t\t\t\t\t{profile.bio}\r\n\t\t\t\t\t\t</article>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Spinner />\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<section className=\"profile__activity\">\r\n\t\t\t\t\t<ProfilePosts profile={profile} />\r\n\t\t\t\t</section>\r\n\t\t\t</motion.section>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Profile\r\n","import React from 'react'\r\nimport marked from 'marked'\r\n\r\nconst Markdown = ({ content, className }) => {\r\n\tlet text = marked.parse(content || '')\r\n\r\n\t/* \r\n    Since the title is reserved for h1, only use h2s and lower.\r\n      however if people have lots of nested headings (unlikely),\r\n      the structure may seem inaccurate\r\n    Ultimately accessibility is a more pressing concern\r\n  */\r\n\tfor (let i = 5; i > 0; i--) {\r\n\t\tconst regex = `<h${i}`\r\n\r\n\t\ttext = text.replace(new RegExp(regex, 'g'), `<h${i + 1}`)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={className} dangerouslySetInnerHTML={{ __html: text }}></div>\r\n\t)\r\n}\r\n\r\nexport default Markdown\r\n","import React from 'react'\r\nimport { MdDeleteForever, MdEdit } from 'react-icons/md'\r\nimport { BsHeart, BsHeartFill } from 'react-icons/bs'\r\n\r\nconst Button = ({ onClick, type }) => {\r\n\tif (!['delete', 'edit', 'like', 'liked', 'report'].includes(type))\r\n\t\tthrow new Error(`Invalid type \"${type}\" in Button.jsx`)\r\n\r\n\tlet cName = 'btn btn--round '\r\n\tlet ariaLabel = ''\r\n\r\n\tif (type === 'delete') {\r\n\t\tcName += 'btn--red'\r\n\t\tariaLabel = 'Delete post'\r\n\t} else if (type === 'edit') {\r\n\t\tcName += 'btn--blue'\r\n\t\tariaLabel = 'Edit post'\r\n\t} else if (type === 'like' || type === 'liked') {\r\n\t\tif (type === 'liked') {\r\n\t\t\tcName += 'btn--green btn--heart btn--heart-liked'\r\n\t\t\tariaLabel = 'Unlike post'\r\n\t\t} else {\r\n\t\t\tcName += 'btn--green btn--heart'\r\n\t\t\tariaLabel = 'Like post'\r\n\t\t}\r\n\t} else if (type === 'report') {\r\n\t\tcName += 'btn--report btn--red'\r\n\t\tariaLabel = 'Report post'\r\n\t}\r\n\r\n\treturn (\r\n\t\t<button\r\n\t\t\tonClick={onClick}\r\n\t\t\tclassName={cName}\r\n\t\t\taria-label={ariaLabel}\r\n\t\t\talt={ariaLabel}\r\n\t\t>\r\n\t\t\t{type === 'delete' && <MdDeleteForever />}\r\n\t\t\t{type === 'edit' && <MdEdit />}\r\n\t\t\t{type === 'liked' && <BsHeartFill />}\r\n\t\t\t{type === 'like' && <BsHeart />}\r\n\t\t\t{type === 'report' && <></>}\r\n\t\t</button>\r\n\t)\r\n}\r\n\r\nexport default Button\r\n","import React from 'react'\r\nimport { MdDeleteForever } from 'react-icons/md'\r\nimport { useDispatch } from 'react-redux'\r\nimport { removeComment } from '../../_actions/post'\r\n\r\nconst Comment = ({ comment, userId }) => {\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst _removeComment = async () => {\r\n\t\tconst result = await removeComment(comment?._id)\r\n\r\n\t\tif (result.result) {\r\n\t\t\tdispatch({ type: 'POST/COMMENT_SINGLE/REMOVE', payload: result.result })\r\n\t\t} else if (result.error) {\r\n\t\t\tconsole.log(result.error)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"comments__comment\">\r\n\t\t\t{userId === comment?.user?._id && (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn--red btn--round\"\r\n\t\t\t\t\taria-label=\"Remove your comment\"\r\n\t\t\t\t\tonClick={_removeComment}\r\n\t\t\t\t>\r\n\t\t\t\t\t<MdDeleteForever />\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t\t<header>\r\n\t\t\t\t<img src={comment?.user?.imageUrl} />\r\n\t\t\t\t<p>{comment?.user?.username}</p>\r\n\t\t\t</header>\r\n\t\t\t<p\r\n\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t__html: comment?.message?.replace(/\\n/g, '<br>'),\r\n\t\t\t\t}}\r\n\t\t\t></p>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Comment\r\n","import React, { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { commentOnPost } from '../../_actions/post'\r\nimport Comment from './Comment'\r\n\r\nconst Comments = ({ comments, postId, user }) => {\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst [comment, setComment] = useState('')\r\n\r\n\tconst submitComment = async () => {\r\n\t\tconst result = await commentOnPost(postId, comment)\r\n\t\tif (result.result) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: 'POST/COMMENT_SINGLE',\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\t...result.result,\r\n\t\t\t\t\tuser: {\r\n\t\t\t\t\t\timageUrl: user.imageUrl,\r\n\t\t\t\t\t\tscore: user.score,\r\n\t\t\t\t\t\tusername: user.username,\r\n\t\t\t\t\t\t_id: user._id,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\tsetComment('')\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"comments\">\r\n\t\t\t{user?._id && (\r\n\t\t\t\t<div className=\"comments__field\">\r\n\t\t\t\t\t<form onSubmit={(e) => e.preventDefault()}>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tplaceholder=\"Add a comment...\"\r\n\t\t\t\t\t\t\tclassName=\"custom_input custom_input--comment-field\"\r\n\t\t\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\t\t\tvalue={comment}\r\n\t\t\t\t\t\t\tonChange={(e) => setComment(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tvalue=\"Post\"\r\n\t\t\t\t\t\t\tonClick={submitComment}\r\n\t\t\t\t\t\t\tclassName=\"btn btn--solid btn--solid-blue\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{comments.map((comment, index) => (\r\n\t\t\t\t<Comment comment={comment} key={index} userId={user?._id} />\r\n\t\t\t))}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Comments\r\n","import { motion } from 'framer-motion'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Markdown from '../../components/Markdown'\r\nimport Spinner from '../../components/Spinner'\r\nimport { deletePost, getPostByFriendlyId, likePost } from '../../_actions/post'\r\nimport { formatLargeNumber, placeImageInContent } from '../../util/util'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport Button from '../../components/Button'\r\nimport TopMostLogger from '../../components/TopMostLogger'\r\nimport Comments from '../../components/Comments/Comments'\r\nimport { BsHeartFill } from 'react-icons/bs'\r\n\r\nconst Recipe = ({ id }) => {\r\n\tconst dispatch = useDispatch()\r\n\tconst history = useHistory()\r\n\r\n\tconst post = useSelector((state) => state.post.single)\r\n\tconst user = useSelector((state) => state.auth.user)\r\n\r\n\tconst [showLog, setShowLog] = useState(false)\r\n\tconst [logTitle, setLogTitle] = useState('')\r\n\tconst [logMessage, setLogMessage] = useState('')\r\n\r\n\tuseEffect(() => {\r\n\t\tgetPostByFriendlyId(id)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tdispatch({ type: 'POST/SET_POST', payload: response?.result[0] })\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err))\r\n\t}, [])\r\n\r\n\tconsole.log(post?.user?._id === user?._id)\r\n\r\n\treturn (\r\n\t\t<motion.section\r\n\t\t\tclassName=\"fullrecipe\"\r\n\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\texit={{ opacity: 0 }}\r\n\t\t>\r\n\t\t\t{post ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<TopMostLogger show={showLog} title={logTitle} message={logMessage} />\r\n\r\n\t\t\t\t\t{post?.user?._id === user?._id && (\r\n\t\t\t\t\t\t<section className=\"fullrecipe__editarea\">\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype=\"delete\"\r\n\t\t\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\t\t\tconst result = await deletePost(post._id)\r\n\t\t\t\t\t\t\t\t\tconsole.log(result)\r\n\t\t\t\t\t\t\t\t\tif (result.error) {\r\n\t\t\t\t\t\t\t\t\t\t// could not delete post\r\n\t\t\t\t\t\t\t\t\t\tsetLogMessage(result.error)\r\n\t\t\t\t\t\t\t\t\t\tsetLogTitle('Error')\r\n\t\t\t\t\t\t\t\t\t\tsetShowLog(true)\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tsetLogMessage(result.message)\r\n\t\t\t\t\t\t\t\t\t\tsetLogTitle('Alert')\r\n\t\t\t\t\t\t\t\t\t\tsetShowLog(true)\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\tsetShowLog(false)\r\n\t\t\t\t\t\t\t\t\t\thistory.goBack()\r\n\t\t\t\t\t\t\t\t\t}, 2000)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype=\"edit\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t// set edit form\r\n\t\t\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\t\t\ttype: 'EDIT_FORM/SET',\r\n\t\t\t\t\t\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\t\t\t\t\t\tformData: { ...post, images: null },\r\n\t\t\t\t\t\t\t\t\t\t\tfiles: [...post.images],\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t// redirect to edit page\r\n\t\t\t\t\t\t\t\t\thistory.push('/edit')\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<header className=\"fullrecipe__header\">\r\n\t\t\t\t\t\t<div className=\"fullrecipe__header__info\">\r\n\t\t\t\t\t\t\t<h1>{post.title}</h1>\r\n\t\t\t\t\t\t\t{post.serves && (\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<span>{post.serves}</span> Serves\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{post.prepTime && (\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<span>{post.prepTime}min</span> Prep time\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{post.cookTime && (\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<span>{post.cookTime}min</span> Cook time\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\tto={`/profiles/${post?.user?._id}`}\r\n\t\t\t\t\t\t\tclassName=\"fullrecipe__header__user\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<p className=\"user-username\">{post?.user?.username}</p>\r\n\t\t\t\t\t\t\t<p className=\"user-score\">{post?.user?.score}</p>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={post?.user?.imageUrl}\r\n\t\t\t\t\t\t\t\talt={`${post?.user?.username}'s avatar`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</header>\r\n\r\n\t\t\t\t\t{/* \r\n\t\t\t\t\t\tInteract with post (like, comment, report)\r\n\t\t\t\t\t */}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t<section className=\"fullrecipe__interactions\">\r\n\t\t\t\t\t\t\t{/* Show likes of post if you are the owner */}\r\n\t\t\t\t\t\t\t{user?._id && post?.user?._id === user?._id && (\r\n\t\t\t\t\t\t\t\t<div className=\"fullrecipe__interactions__stats\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"likes\">\r\n\t\t\t\t\t\t\t\t\t\t<BsHeartFill />\r\n\t\t\t\t\t\t\t\t\t\t{formatLargeNumber(post?.likes?.length)} likes\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{/*\r\n\t\t\t\t\t\t\t\tOnly show like/report buttons if logged in, \r\n\t\t\t\t\t\t\t\tand if post is not your own\r\n\t\t\t\t\t\t\t */}\r\n\t\t\t\t\t\t\t{post?.user?._id !== user?._id && (\r\n\t\t\t\t\t\t\t\t<div className=\"fullrecipe__interactions__controls\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst result = await likePost(post._id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t// there was an error liking post; likely because of unverified email\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (result.error) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetLogTitle('Error')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetLogMessage(result.error)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowLog(true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowLog(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, 2000)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t// all good, add/remove the like to redux store\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (result.result !== 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'POST/LIKE_SINGLE',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayload: result.result,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'POST/LIKE_SINGLE/REMOVE',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayload: user._id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\ttype={post.likes.includes(user?._id) ? 'liked' : 'like'}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<p>{formatLargeNumber(post?.likes?.length)}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t{/* <div></div> */}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t<ul className=\"fullrecipe__tags\">\r\n\t\t\t\t\t\t{post.tags.map((tag, index) => (\r\n\t\t\t\t\t\t\t<li key={index}>\r\n\t\t\t\t\t\t\t\t<Link to={`/discover?tags=${tag}`}>#{tag}</Link>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<Markdown\r\n\t\t\t\t\t\tclassName=\"fullrecipe__info\"\r\n\t\t\t\t\t\tcontent={placeImageInContent(post.content, post.images)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Markdown\r\n\t\t\t\t\t\tclassName=\"fullrecipe__method\"\r\n\t\t\t\t\t\tcontent={placeImageInContent(post.method, post.images)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Comments\r\n\t\t\t\t\t\tcomments={post.comments}\r\n\t\t\t\t\t\tpostId={post._id}\r\n\t\t\t\t\t\tuser={user || null}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<Spinner />\r\n\t\t\t)}\r\n\t\t</motion.section>\r\n\t)\r\n}\r\n\r\nexport default Recipe\r\n","import React, { useEffect, useRef, useState } from 'react'\r\n\r\nconst FilePreview = ({ files, onFilesChange }) => {\r\n\tconst inputRef = useRef()\r\n\tconst [open, setOpen] = useState({ open: false, file: null })\r\n\r\n\tconst handleClick = (e, file) => {\r\n\t\te.preventDefault()\r\n\r\n\t\tconst _files = []\r\n\t\tfiles.map((f) => {\r\n\t\t\tif (f !== file) _files.push(f)\r\n\t\t})\r\n\r\n\t\tonFilesChange(_files)\r\n\t}\r\n\r\n\t// set focus of input when open is set as true - modal showing\r\n\tuseEffect(() => {\r\n\t\tif (open.open) {\r\n\t\t\tinputRef.current.focus()\r\n\t\t\tinputRef.current.select(inputRef.current.value.length)\r\n\t\t}\r\n\t}, [open])\r\n\r\n\treturn (\r\n\t\t<section className=\"create__filepreview\">\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"create__filepreview__modal create__filepreview__modal--showing\"\r\n\t\t\t\tstyle={{ display: open.open && open.file ? 'flex' : 'none' }}\r\n\t\t\t>\r\n\t\t\t\t<label htmlFor=\"refName\">\r\n\t\t\t\t\tGive a name to this image <span>*</span>\r\n\t\t\t\t</label>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tid=\"refName\"\r\n\t\t\t\t\t\tref={inputRef}\r\n\t\t\t\t\t\tname=\"refName\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Reference name\"\r\n\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\tonKeyPress={(e) => {\r\n\t\t\t\t\t\t\tif (e.key !== 'Enter' && e.key !== 'NumpadReturn') return\r\n\t\t\t\t\t\t\tconst _files = files.map((f) => {\r\n\t\t\t\t\t\t\t\tif (f === open.file) f = { ...f, name: e.target.value }\r\n\t\t\t\t\t\t\t\treturn f\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\tonFilesChange(_files)\r\n\r\n\t\t\t\t\t\t\tsetOpen({ open: false, file: null })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tif (!open.open && !open.file) return\r\n\r\n\t\t\t\t\t\t\tconst _files = files.map((f) => {\r\n\t\t\t\t\t\t\t\tif (f === open.file) f = { ...f, name: inputRef.current.value }\r\n\t\t\t\t\t\t\t\treturn f\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\tonFilesChange(_files)\r\n\r\n\t\t\t\t\t\t\tsetOpen({ open: false, file: null })\r\n\t\t\t\t\t\t\tinputRef.current.value = ''\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tSave\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t* A reference name makes it easier to position an image within your\r\n\t\t\t\t\trecipe content\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t{files.map((file, index) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\taria-label=\"Rename this image\"\r\n\t\t\t\t\tclassName=\"create__filepreview__file\"\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\tonContextMenu={(e) => handleClick(e, file)}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t// alter the 'name' field of this file object. used to reference in markdown content\r\n\t\t\t\t\t\tinputRef.current.value = file.name\r\n\t\t\t\t\t\tsetOpen({ open: true, file: file })\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<header>\r\n\t\t\t\t\t\t{file.name.substring(0, 15)}\r\n\t\t\t\t\t\t{file.name.length > 15 && '...'}\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t<img src={file.base64} alt={file.name} />\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default FilePreview\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Markdown from '../../components/Markdown'\r\nimport { placeImageInContent } from '../../util/util'\r\n\r\nconst Preview = ({ state }) => {\r\n\tconsole.log(state)\r\n\treturn (\r\n\t\t<section className=\"fullrecipe\">\r\n\t\t\t<header className=\"fullrecipe__header\">\r\n\t\t\t\t<div className=\"fullrecipe__header__info\">\r\n\t\t\t\t\t<h1>{state?.formData?.title}</h1>\r\n\t\t\t\t\t{state?.formData?.serves && (\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<span>{state?.formData?.serves}</span> Serves\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{state?.formData?.prepTime && (\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<span>{state?.formData?.prepTime}min</span> Prep time\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{state?.formData?.cookTime && (\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<span>{state?.formData?.cookTime}min</span> Cook time\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</header>\r\n\t\t\t<ul className=\"fullrecipe__tags\">\r\n\t\t\t\t{state?.formData?.tags?.map((tag, index) => (\r\n\t\t\t\t\t<li key={index}>\r\n\t\t\t\t\t\t<Link to=\"\">#{tag}</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\t\t\t<Markdown\r\n\t\t\t\tclassName=\"fullrecipe__info\"\r\n\t\t\t\tcontent={placeImageInContent(state?.formData?.content, state?.files)}\r\n\t\t\t/>\r\n\t\t\t<Markdown\r\n\t\t\t\tclassName=\"fullrecipe__method\"\r\n\t\t\t\tcontent={placeImageInContent(state?.formData?.method, state?.files)}\r\n\t\t\t/>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default Preview\r\n","import React from 'react'\r\n\r\nconst ListIngredients = ({ ingredients, onClickIngredient }) => {\r\n\treturn (\r\n\t\t<div className={`list list--ingredients`}>\r\n\t\t\t{ingredients.map((item, index) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"list__item btn btn--no-bg\"\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\taria-label=\"Remove this item.\"\r\n\t\t\t\t\tonClick={() => onClickIngredient(item)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{item}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ListIngredients\r\n","import React from 'react'\r\n\r\nconst ListTags = ({ tags, onClickTag }) => {\r\n\treturn (\r\n\t\t<div className={`list list--tags`}>\r\n\t\t\t{tags.map((item, index) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"list__item btn btn--no-bg\"\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\taria-label=\"Remove this item.\"\r\n\t\t\t\t\tonClick={() => onClickTag(item)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{item}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ListTags\r\n","import React, { Component } from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { FiUpload } from 'react-icons/fi'\r\nimport FilePreview from './FilePreview'\r\nimport Preview from './Preview'\r\nimport ListIngredients from './ListIngredients'\r\nimport ListTags from './ListTags'\r\nimport { connect } from 'react-redux'\r\nimport { createRef } from 'react'\r\nimport { createPost } from '../../_actions/post'\r\nimport { bufferToBase64 } from '../../util/util'\r\nimport { withRouter } from 'react-router'\r\n\r\nclass Create extends Component {\r\n\tconstructor() {\r\n\t\tsuper()\r\n\r\n\t\tthis.state = {\r\n\t\t\tformData: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tserves: '',\r\n\t\t\t\tprepTime: '',\r\n\t\t\t\tcookTime: '',\r\n\t\t\t\tingredients: [],\r\n\t\t\t\ttags: [],\r\n\t\t\t\tcontent: '',\r\n\t\t\t\tmethod: '',\r\n\t\t\t},\r\n\t\t\tfiles: [],\r\n\t\t\tposted: false,\r\n\t\t}\r\n\r\n\t\tthis.ingredientsRef = createRef()\r\n\t\tthis.tagsRef = createRef()\r\n\r\n\t\tthis.handleFiles = async (e) => {\r\n\t\t\tconst _files = e.target.files\r\n\r\n\t\t\tlet filesToAdd = []\r\n\r\n\t\t\tfor (let i = 0; i < _files?.length; i++) {\r\n\t\t\t\tlet file = _files[i]\r\n\r\n\t\t\t\tconst name = `image-${this.state.files.length + 1 + i}`\r\n\r\n\t\t\t\t// Don't allow upload if more than 10 MB\r\n\t\t\t\tif (file.size >= 10 * 1000 * 1000) return\r\n\r\n\t\t\t\t// Only allow images\r\n\t\t\t\tif (!file.type.includes('image')) return\r\n\r\n\t\t\t\t// Get buffer from File.arrayBuffer method\r\n\t\t\t\tlet bfr = await file.arrayBuffer()\r\n\r\n\t\t\t\tfilesToAdd.push({\r\n\t\t\t\t\tname,\r\n\t\t\t\t\ttype: file.type,\r\n\t\t\t\t\tsize: file.size,\r\n\t\t\t\t\tlastModified: file.lastModified,\r\n\t\t\t\t\tbase64: `data:${file.type};base64,${bufferToBase64(bfr)}`,\r\n\t\t\t\t\toriginalFile: file,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tfiles: [...this.state.files, ...filesToAdd],\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tthis.addIngredient = () => {\r\n\t\t\tif (this.state.formData.ingredients.length >= 30) return\r\n\r\n\t\t\tif (!this.ingredientsRef) return\r\n\r\n\t\t\tconst { value } = this.ingredientsRef.current\r\n\t\t\tif (\r\n\t\t\t\tvalue.length > 20 ||\r\n\t\t\t\tthis.state.formData.ingredients.includes(value) ||\r\n\t\t\t\t!value\r\n\t\t\t)\r\n\t\t\t\treturn\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tformData: {\r\n\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\tingredients: [...this.state.formData.ingredients, value],\r\n\t\t\t\t},\r\n\t\t\t})\r\n\r\n\t\t\tthis.ingredientsRef.current.value = ''\r\n\t\t}\r\n\r\n\t\tthis.addTag = () => {\r\n\t\t\tif (this.state.formData.tags.length >= 6) return\r\n\r\n\t\t\tif (!this.tagsRef) return\r\n\r\n\t\t\tconst { value } = this.tagsRef.current\r\n\r\n\t\t\tif (\r\n\t\t\t\tvalue.length > 20 ||\r\n\t\t\t\tthis.state.formData.tags.includes(value) ||\r\n\t\t\t\t!value\r\n\t\t\t)\r\n\t\t\t\treturn\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tformData: {\r\n\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\ttags: [...this.state.formData.tags, value],\r\n\t\t\t\t},\r\n\t\t\t})\r\n\r\n\t\t\tthis.tagsRef.current.value = ''\r\n\t\t}\r\n\r\n\t\tthis.post = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await createPost({\r\n\t\t\t\t\tformData: this.state?.formData,\r\n\t\t\t\t\tfiles: this.state?.files,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (!result?.post?.userFriendlyId) return\r\n\r\n\t\t\t\tthis.setState({ ...this.state, posted: true })\r\n\r\n\t\t\t\t// remove event listener which sets local storage\r\n\t\t\t\twindow.removeEventListener('beforeunload', this.setStorage)\r\n\r\n\t\t\t\t// remove from storage\r\n\t\t\t\tlocalStorage.removeItem('post_form')\r\n\r\n\t\t\t\t// set redux postForm as default\r\n\t\t\t\tthis.props.setStore({ formData: null, files: [] })\r\n\r\n\t\t\t\t// redirect to post page\r\n\t\t\t\tthis.props.history.push(`/recipe/${result?.post?.userFriendlyId}`)\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setStorage = () => {\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t'post_form',\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tformData: this.state?.formData,\r\n\t\t\t\t\tfiles: this.state?.files,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\twindow.addEventListener('beforeunload', this.setStorage)\r\n\t\tthis.props.formData && this.setState(this.props)\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.state?.posted) return\r\n\r\n\t\twindow.removeEventListener('beforeunload', this.setStorage)\r\n\t\tthis.props.setStore(this.state)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<motion.section\r\n\t\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\t\texit={{ opacity: 0 }}\r\n\t\t\t\tclassName=\"create\"\r\n\t\t\t>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<h1>create a recipe</h1>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li>- Use up to 6 tags to gain a wider audience.</li>\r\n\t\t\t\t\t\t<li>- Add up to 30 ingredients.</li>\r\n\t\t\t\t\t\t<li>- Remove a tag or ingredient by clicking on it.</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t- Upload images and name them to control where they appear in the\r\n\t\t\t\t\t\t\trecipe.\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t- Format recipe information and method with markdown syntax.\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<button className=\"btn btn--pill\">View Formatting Help</button>\r\n\t\t\t\t</header>\r\n\r\n\t\t\t\t<div className=\"create__container\">\r\n\t\t\t\t\t<form\r\n\t\t\t\t\t\taction=\"\"\r\n\t\t\t\t\t\tonSubmit={(e) => {\r\n\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\tthis.post()\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName=\"create__form\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<label htmlFor=\"title\" className=\"label label--title\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\tid=\"title\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Title\"\r\n\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.title}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: { ...this.state.formData, title: e.target.value },\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"serves\" className=\"label label--serves\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\tid=\"serves\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Serves\"\r\n\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.serves}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tserves: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"prepTime\" className=\"label label--preptime\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tid=\"prepTime\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Prep. Time\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.prepTime}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tprepTime: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"cookTime\" className=\"label label--cooktime\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tid=\"cookTime\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Cook Time\"\r\n\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.cookTime}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tcookTime: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"ingredients\" className=\"label label--ingredients\">\r\n\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"ingredients\"\r\n\t\t\t\t\t\t\t\t\tid=\"ingredients\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Add Ingredients...\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\tref={this.ingredientsRef}\r\n\t\t\t\t\t\t\t\t\tonKeyPress={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst enterPressed =\r\n\t\t\t\t\t\t\t\t\t\t\te.key === 'NumpadEnter' || e.key === 'Enter'\r\n\t\t\t\t\t\t\t\t\t\tif (!enterPressed) return\r\n\r\n\t\t\t\t\t\t\t\t\t\tthis.addIngredient()\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\taria-label=\"Add this ingredient\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => this.addIngredient()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#ffffff\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,18 L12,6 M6,12 L18,12\"\r\n\t\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</header>\r\n\r\n\t\t\t\t\t\t\t<ListIngredients\r\n\t\t\t\t\t\t\t\tingredients={this.state.formData.ingredients}\r\n\t\t\t\t\t\t\t\tonClickIngredient={(item) => {\r\n\t\t\t\t\t\t\t\t\tconst newIngredients = this.state.formData.ingredients.filter(\r\n\t\t\t\t\t\t\t\t\t\t(_item) => _item !== item\r\n\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tingredients: newIngredients,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"tags\" className=\"label label--tags\">\r\n\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"tags\"\r\n\t\t\t\t\t\t\t\t\tid=\"tags\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Add Tags...\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\tref={this.tagsRef}\r\n\t\t\t\t\t\t\t\t\tonKeyPress={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst enterPressed =\r\n\t\t\t\t\t\t\t\t\t\t\te.key === 'NumpadEnter' || e.key === 'Enter'\r\n\t\t\t\t\t\t\t\t\t\tif (!enterPressed) return\r\n\r\n\t\t\t\t\t\t\t\t\t\tthis.addTag()\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\taria-label=\"Add this tag\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => this.addTag()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#ffffff\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,18 L12,6 M6,12 L18,12\"\r\n\t\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t<ListTags\r\n\t\t\t\t\t\t\t\ttags={this.state.formData.tags}\r\n\t\t\t\t\t\t\t\tonClickTag={(item) => {\r\n\t\t\t\t\t\t\t\t\tconst newTags = this.state.formData.tags.filter(\r\n\t\t\t\t\t\t\t\t\t\t(_item) => _item !== item\r\n\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: { ...this.state.formData, tags: newTags },\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"content\" className=\"label label--content\">\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tcols=\"30\"\r\n\t\t\t\t\t\t\t\trows=\"10\"\r\n\t\t\t\t\t\t\t\tname=\"content\"\r\n\t\t\t\t\t\t\t\tid=\"content\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Recipe information... allergens, gluten-free, vegan-friendly?\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.content}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tcontent: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"method\" className=\"label label--method\">\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tcols=\"30\"\r\n\t\t\t\t\t\t\t\trows=\"10\"\r\n\t\t\t\t\t\t\t\tname=\"method\"\r\n\t\t\t\t\t\t\t\tid=\"method\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Recipe method... describe the steps needed to complete this recipe\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.method}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tmethod: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"upload\" className=\"label label--upload\">\r\n\t\t\t\t\t\t\t<p className=\"btn btn--pill btn--solid-blue\" role=\"button\">\r\n\t\t\t\t\t\t\t\t<FiUpload style={{ margin: '0 10px 0 0' }} /> Upload\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\t\tname=\"upload\"\r\n\t\t\t\t\t\t\t\tid=\"upload\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\tencType=\"multipart/form-data\"\r\n\t\t\t\t\t\t\t\tstyle={{ display: 'none' }}\r\n\t\t\t\t\t\t\t\tonChange={this.handleFiles}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<input type=\"submit\" className=\"btn btn--pill\" value=\"Post\" />\r\n\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t<FilePreview\r\n\t\t\t\t\t\tfiles={this.state.files}\r\n\t\t\t\t\t\tonFilesChange={(files) => {\r\n\t\t\t\t\t\t\tthis.setState({ ...this.state, files })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Preview state={this.state} />\r\n\t\t\t</motion.section>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n// On mount get state of redux and set props\r\n//  if redux has no postForm set, check localStorage\r\nconst mapStateToProps = (state) => {\r\n\tif (\r\n\t\tstate?.postForm?.formData === null ||\r\n\t\tstate?.postForm?.files?.length === 0\r\n\t) {\r\n\t\tlet _form = JSON.parse(localStorage.getItem('post_form'))\r\n\r\n\t\tstate = {\r\n\t\t\tpostForm: _form,\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tformData: state?.postForm?.formData || null,\r\n\t\tfiles: state?.postForm?.files || [],\r\n\t}\r\n}\r\n\r\n// On unmount set the state of redux with component state\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tsetStore: (newState) =>\r\n\t\t\tdispatch({ type: 'POST_FORM/SET', payload: { ...newState } }),\r\n\t}\r\n}\r\n\r\n// Connect helps by implementing redux store in a class component\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Create))\r\n","import React, { Component } from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { FiUpload } from 'react-icons/fi'\r\nimport FilePreview from './FilePreview'\r\nimport Preview from './Preview'\r\nimport ListIngredients from './ListIngredients'\r\nimport ListTags from './ListTags'\r\nimport { connect } from 'react-redux'\r\nimport { createRef } from 'react'\r\nimport { editPost } from '../../_actions/post'\r\nimport { bufferToBase64 } from '../../util/util'\r\nimport { withRouter } from 'react-router'\r\n\r\nclass Create extends Component {\r\n\tconstructor() {\r\n\t\tsuper()\r\n\r\n\t\t// As opposed to Create.jsx we need to\r\n\t\t//  know the _id of the existing post\r\n\t\tthis.state = {\r\n\t\t\tformData: {\r\n\t\t\t\t_id: '',\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tserves: '',\r\n\t\t\t\tprepTime: '',\r\n\t\t\t\tcookTime: '',\r\n\t\t\t\tingredients: [],\r\n\t\t\t\ttags: [],\r\n\t\t\t\tcontent: '',\r\n\t\t\t\tmethod: '',\r\n\t\t\t},\r\n\t\t\tfiles: [],\r\n\t\t\tposted: false,\r\n\t\t}\r\n\r\n\t\tthis.ingredientsRef = createRef()\r\n\t\tthis.tagsRef = createRef()\r\n\r\n\t\tthis.handleFiles = async (e) => {\r\n\t\t\tconst _files = e.target.files\r\n\r\n\t\t\tlet filesToAdd = []\r\n\r\n\t\t\tfor (let i = 0; i < _files?.length; i++) {\r\n\t\t\t\tlet file = _files[i]\r\n\r\n\t\t\t\tconst name = `image-${this.state.files.length + 1 + i}`\r\n\r\n\t\t\t\t// Don't allow upload if more than 10 MB\r\n\t\t\t\tif (file.size >= 10 * 1000 * 1000) return\r\n\r\n\t\t\t\t// Only allow images\r\n\t\t\t\tif (!file.type.includes('image')) return\r\n\r\n\t\t\t\t// Get buffer from File.arrayBuffer method\r\n\t\t\t\tlet bfr = await file.arrayBuffer()\r\n\r\n\t\t\t\tfilesToAdd.push({\r\n\t\t\t\t\tname,\r\n\t\t\t\t\ttype: file.type,\r\n\t\t\t\t\tsize: file.size,\r\n\t\t\t\t\tlastModified: file.lastModified,\r\n\t\t\t\t\tbase64: `data:${file.type};base64,${bufferToBase64(bfr)}`,\r\n\t\t\t\t\toriginalFile: file,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tfiles: [...this.state.files, ...filesToAdd],\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tthis.addIngredient = () => {\r\n\t\t\tif (this.state.formData.ingredients.length >= 30) return\r\n\r\n\t\t\tif (!this.ingredientsRef) return\r\n\r\n\t\t\tconst { value } = this.ingredientsRef.current\r\n\t\t\tif (\r\n\t\t\t\tvalue.length > 20 ||\r\n\t\t\t\tthis.state.formData.ingredients.includes(value) ||\r\n\t\t\t\t!value\r\n\t\t\t)\r\n\t\t\t\treturn\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tformData: {\r\n\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\tingredients: [...this.state.formData.ingredients, value],\r\n\t\t\t\t},\r\n\t\t\t})\r\n\r\n\t\t\tthis.ingredientsRef.current.value = ''\r\n\t\t}\r\n\r\n\t\tthis.addTag = () => {\r\n\t\t\tif (this.state.formData.tags.length >= 6) return\r\n\r\n\t\t\tif (!this.tagsRef) return\r\n\r\n\t\t\tconst { value } = this.tagsRef.current\r\n\r\n\t\t\tif (\r\n\t\t\t\tvalue.length > 20 ||\r\n\t\t\t\tthis.state.formData.tags.includes(value) ||\r\n\t\t\t\t!value\r\n\t\t\t)\r\n\t\t\t\treturn\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tformData: {\r\n\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\ttags: [...this.state.formData.tags, value],\r\n\t\t\t\t},\r\n\t\t\t})\r\n\r\n\t\t\tthis.tagsRef.current.value = ''\r\n\t\t}\r\n\r\n\t\tthis.submit = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await editPost(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\ttitle: this.state?.formData?.title,\r\n\t\t\t\t\t\t\tserves: String(this.state?.formData?.serves),\r\n\t\t\t\t\t\t\tcookTime: String(this.state?.formData?.cookTime),\r\n\t\t\t\t\t\t\tprepTime: String(this.state?.formData?.prepTime),\r\n\t\t\t\t\t\t\tingredients: this.state?.formData?.ingredients,\r\n\t\t\t\t\t\t\ttags: this.state?.formData?.tags,\r\n\t\t\t\t\t\t\tcontent: this.state?.formData?.content,\r\n\t\t\t\t\t\t\tmethod: this.state?.formData?.method,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfiles: this.state?.files,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tthis.state?.formData?._id\r\n\t\t\t\t)\r\n\r\n\t\t\t\tconsole.log(result)\r\n\r\n\t\t\t\tif (!result?.post?.userFriendlyId) return\r\n\r\n\t\t\t\tthis.setState({ ...this.state, posted: true })\r\n\r\n\t\t\t\t// remove event listener which sets local storage\r\n\t\t\t\twindow.removeEventListener('beforeunload', this.setStorage)\r\n\r\n\t\t\t\t// remove from storage\r\n\t\t\t\tlocalStorage.removeItem('edit_form')\r\n\r\n\t\t\t\t// set redux editForm as default\r\n\t\t\t\tthis.props.setStore({ formData: null, files: [] })\r\n\r\n\t\t\t\t// redirect to post page\r\n\t\t\t\tthis.props.history.push(`/recipe/${result?.post?.userFriendlyId}`)\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setStorage = () => {\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t'edit_form',\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tformData: this.state?.formData,\r\n\t\t\t\t\tfiles: this.state?.files,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\twindow.addEventListener('beforeunload', this.setStorage)\r\n\t\tthis.props.formData && this.setState(this.props)\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.state?.posted) return\r\n\r\n\t\twindow.removeEventListener('beforeunload', this.setStorage)\r\n\t\tthis.props.setStore(this.state)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<motion.section\r\n\t\t\t\ttransition={{ duration: 0.25 }}\r\n\t\t\t\tinitial={{ opacity: 0 }}\r\n\t\t\t\tanimate={{ opacity: 1 }}\r\n\t\t\t\texit={{ opacity: 0 }}\r\n\t\t\t\tclassName=\"create\"\r\n\t\t\t>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<h1>edit a recipe</h1>\r\n\t\t\t\t\t<button className=\"btn btn--pill\">View Formatting Help</button>\r\n\t\t\t\t</header>\r\n\r\n\t\t\t\t<div className=\"create__container\">\r\n\t\t\t\t\t<form\r\n\t\t\t\t\t\taction=\"\"\r\n\t\t\t\t\t\tonSubmit={(e) => {\r\n\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\tthis.submit()\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName=\"create__form\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<label htmlFor=\"title\" className=\"label label--title\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\tid=\"title\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Title\"\r\n\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.title}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: { ...this.state.formData, title: e.target.value },\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"serves\" className=\"label label--serves\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\tid=\"serves\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Serves\"\r\n\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.serves}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tserves: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"prepTime\" className=\"label label--preptime\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tid=\"prepTime\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Prep. Time\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.prepTime}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tprepTime: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"cookTime\" className=\"label label--cooktime\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tid=\"cookTime\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Cook Time\"\r\n\t\t\t\t\t\t\t\tonKeyDownCapture={(e) =>\r\n\t\t\t\t\t\t\t\t\te.key === 'Enter' && e.preventDefault()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.cookTime}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tcookTime: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"ingredients\" className=\"label label--ingredients\">\r\n\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"ingredients\"\r\n\t\t\t\t\t\t\t\t\tid=\"ingredients\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Add Ingredients...\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\tref={this.ingredientsRef}\r\n\t\t\t\t\t\t\t\t\tonKeyPress={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst enterPressed =\r\n\t\t\t\t\t\t\t\t\t\t\te.key === 'NumpadEnter' || e.key === 'Enter'\r\n\t\t\t\t\t\t\t\t\t\tif (!enterPressed) return\r\n\r\n\t\t\t\t\t\t\t\t\t\tthis.addIngredient()\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\taria-label=\"Add this ingredient\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => this.addIngredient()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#ffffff\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,18 L12,6 M6,12 L18,12\"\r\n\t\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</header>\r\n\r\n\t\t\t\t\t\t\t<ListIngredients\r\n\t\t\t\t\t\t\t\tingredients={this.state.formData.ingredients}\r\n\t\t\t\t\t\t\t\tonClickIngredient={(item) => {\r\n\t\t\t\t\t\t\t\t\tconst newIngredients = this.state.formData.ingredients.filter(\r\n\t\t\t\t\t\t\t\t\t\t(_item) => _item !== item\r\n\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tingredients: newIngredients,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"tags\" className=\"label label--tags\">\r\n\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"tags\"\r\n\t\t\t\t\t\t\t\t\tid=\"tags\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Add Tags...\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\t\tref={this.tagsRef}\r\n\t\t\t\t\t\t\t\t\tonKeyPress={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst enterPressed =\r\n\t\t\t\t\t\t\t\t\t\t\te.key === 'NumpadEnter' || e.key === 'Enter'\r\n\t\t\t\t\t\t\t\t\t\tif (!enterPressed) return\r\n\r\n\t\t\t\t\t\t\t\t\t\tthis.addTag()\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn--no-bg\"\r\n\t\t\t\t\t\t\t\t\taria-label=\"Add this tag\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => this.addTag()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"1em\"\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#ffffff\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,18 L12,6 M6,12 L18,12\"\r\n\t\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t<ListTags\r\n\t\t\t\t\t\t\t\ttags={this.state.formData.tags}\r\n\t\t\t\t\t\t\t\tonClickTag={(item) => {\r\n\t\t\t\t\t\t\t\t\tconst newTags = this.state.formData.tags.filter(\r\n\t\t\t\t\t\t\t\t\t\t(_item) => _item !== item\r\n\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: { ...this.state.formData, tags: newTags },\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"content\" className=\"label label--content\">\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tcols=\"30\"\r\n\t\t\t\t\t\t\t\trows=\"10\"\r\n\t\t\t\t\t\t\t\tname=\"content\"\r\n\t\t\t\t\t\t\t\tid=\"content\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Recipe information... allergens, gluten-free, vegan-friendly?\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.content}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tcontent: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"method\" className=\"label label--method\">\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tcols=\"30\"\r\n\t\t\t\t\t\t\t\trows=\"10\"\r\n\t\t\t\t\t\t\t\tname=\"method\"\r\n\t\t\t\t\t\t\t\tid=\"method\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Recipe method... describe the steps needed to complete this recipe\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.formData.method}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.state.formData,\r\n\t\t\t\t\t\t\t\t\t\t\tmethod: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"upload\" className=\"label label--upload\">\r\n\t\t\t\t\t\t\t<p className=\"btn btn--pill btn--solid-blue\" role=\"button\">\r\n\t\t\t\t\t\t\t\t<FiUpload style={{ margin: '0 10px 0 0' }} /> Upload\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\t\tname=\"upload\"\r\n\t\t\t\t\t\t\t\tid=\"upload\"\r\n\t\t\t\t\t\t\t\tclassName=\"custom_input custom_input--underline\"\r\n\t\t\t\t\t\t\t\tencType=\"multipart/form-data\"\r\n\t\t\t\t\t\t\t\tstyle={{ display: 'none' }}\r\n\t\t\t\t\t\t\t\tonChange={this.handleFiles}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tclassName=\"btn btn--pill\"\r\n\t\t\t\t\t\t\tvalue=\"Submit Edit\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t<FilePreview\r\n\t\t\t\t\t\tfiles={this.state.files}\r\n\t\t\t\t\t\tonFilesChange={(files) => {\r\n\t\t\t\t\t\t\tthis.setState({ ...this.state, files })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Preview state={this.state} />\r\n\t\t\t</motion.section>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n// On mount get state of redux and set props\r\n//  if redux has no editForm set, check localStorage\r\nconst mapStateToProps = (state) => {\r\n\tif (\r\n\t\tstate?.editForm?.formData === null ||\r\n\t\tstate?.editForm?.files?.length === 0\r\n\t) {\r\n\t\tlet _form = JSON.parse(localStorage.getItem('edit_form'))\r\n\r\n\t\tstate = {\r\n\t\t\teditForm: _form,\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tformData: state?.editForm?.formData || null,\r\n\t\tfiles: state?.editForm?.files || [],\r\n\t}\r\n}\r\n\r\n// On unmount set the state of redux with component state\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tsetStore: (newState) =>\r\n\t\t\tdispatch({ type: 'EDIT_FORM/SET', payload: { ...newState } }),\r\n\t}\r\n}\r\n\r\n// Connect helps by implementing redux store in a class component\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Create))\r\n","import Footer from './components/Footer'\r\nimport Navbar from './components/Navbar'\r\nimport Home from './pages/Home/Home'\r\nimport Discover from './pages/Discover/Discover'\r\nimport Auth from './pages/Auth/Auth'\r\nimport Profile from './pages/Profile/Profile'\r\nimport Recipe from './pages/Recipe/Recipe'\r\nimport Create from './pages/Create/Create'\r\nimport Edit from './pages/Create/Edit'\r\nimport { Route, Switch, useLocation } from 'react-router-dom'\r\nimport { AnimatePresence } from 'framer-motion'\r\nimport { useEffect } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nfunction App() {\r\n\tconst dispatch = useDispatch()\r\n\tconst location = useLocation()\r\n\r\n\tuseEffect(() => {\r\n\t\t// Initialize the AUTH user state from browser's localstorage\r\n\t\tdispatch({\r\n\t\t\ttype: 'AUTH/INIT',\r\n\t\t\tpayload: JSON.parse(localStorage.getItem('profile')),\r\n\t\t})\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Navbar />\r\n\t\t\t<main className=\"container\">\r\n\t\t\t\t<AnimatePresence exitBeforeEnter>\r\n\t\t\t\t\t<Switch location={location} key={location.pathname}>\r\n\t\t\t\t\t\t<Route path=\"/\" exact>\r\n\t\t\t\t\t\t\t<Home />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/discover\" exact>\r\n\t\t\t\t\t\t\t<Discover />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/post\" exact>\r\n\t\t\t\t\t\t\t<Create />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/edit\" exact>\r\n\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route path=\"/login\">\r\n\t\t\t\t\t\t\t<Auth />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route path=\"/signup\">\r\n\t\t\t\t\t\t\t<Auth />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath=\"/profiles/:id\"\r\n\t\t\t\t\t\t\trender={(p) => <Profile id={p.match.params.id} />}\r\n\t\t\t\t\t\t></Route>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath=\"/recipe/:id\"\r\n\t\t\t\t\t\t\trender={(p) => <Recipe id={p.match.params.id} />}\r\n\t\t\t\t\t\t></Route>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</AnimatePresence>\r\n\t\t\t</main>\r\n\t\t\t<Footer />\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default App\r\n","import { combineReducers } from 'redux'\r\n\r\nimport auth from './auth'\r\nimport user from './user'\r\nimport post from './post'\r\nimport postForm from './postForm'\r\nimport editForm from './editForm'\r\n\r\nexport default combineReducers({ auth, user, postForm, post, editForm })\r\n","/*\r\n\tDetails of current user\r\n*/\r\nexport default (state = { user: null }, action) => {\r\n\tif (typeof state === 'undefined') return\r\n\r\n\tswitch (action.type) {\r\n\t\tcase 'AUTH/INIT':\r\n\t\t\t// On initialize (user from localStorage - if stored)\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: action?.payload?.user,\r\n\t\t\t\ttoken: action?.payload?.token,\r\n\t\t\t}\r\n\t\tcase 'AUTH/EDIT_STORED_USER':\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t'profile',\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tuser: action?.payload?.user,\r\n\t\t\t\t\ttoken: JSON.parse(localStorage.getItem('profile')).token,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: action?.payload?.user,\r\n\t\t\t}\r\n\t\tcase 'AUTH/SIGN_IN':\r\n\t\t\t// Sign in (set localStorage)\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t'profile',\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tuser: action?.payload?.user,\r\n\t\t\t\t\ttoken: action?.payload?.token,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: action?.payload?.user,\r\n\t\t\t\ttoken: action?.payload?.token,\r\n\t\t\t}\r\n\t\tcase 'AUTH/SIGN_UP':\r\n\t\t\t// Sign user up\r\n\t\t\treturn { ...state }\r\n\t\tcase 'AUTH/LOG_OUT':\r\n\t\t\t// Log user out (just nullify state and remove localstorage item)\r\n\t\t\tlocalStorage.removeItem('profile')\r\n\t\t\treturn { ...state, user: null, token: null }\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","/*\r\n\tALL = list of users\r\n\tSINGLE = current user / profile page\r\n*/\r\nexport default (state = { all: [], single: null }, action) => {\r\n\tif (typeof state === 'undefined') return\r\n\r\n\tswitch (action.type) {\r\n\t\tcase 'USER/SET_USER':\r\n\t\t\treturn { ...state, single: action.payload }\r\n\t\tcase 'USER/SET_USER_FOLLOWERS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsingle: { ...state.single, _followers: action.payload },\r\n\t\t\t}\r\n\t\tcase 'USER/SET_USER_FOLLOWING':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsingle: { ...state.single, _following: action.payload },\r\n\t\t\t}\r\n\t\tcase 'USER/EDIT_USER':\r\n\t\t\treturn { ...state, single: { ...state.single, ...action.payload } }\r\n\t\tcase 'USER/SET_ALL':\r\n\t\t\treturn { ...state, all: action.payload }\r\n\t\tcase 'USER/PUSH_TO_ALL':\r\n\t\t\treturn { ...state, all: state.all.push(action.payload) }\r\n\t\tcase 'USER/PULL_FROM_ALL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tall: state.all.filter((item) => item._id !== action.payload._id),\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","/*\r\n\tCreate post form will be saved in redux \r\n\tstore so that when navigating away the form state can be loaded\r\n*/\r\n\r\nexport default (state = { formData: null, files: [] }, action) => {\r\n\tif (typeof state === 'undefined') return\r\n\r\n\tswitch (action.type) {\r\n\t\tcase 'POST_FORM/SET':\r\n\t\t\t// also set item in localstorage\r\n\t\t\tlocalStorage.setItem('post_form', JSON.stringify(action.payload))\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tformData: action.payload.formData,\r\n\t\t\t\tfiles: action.payload.files,\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","/*\r\n\tALL posts = list from discover or search\r\n\tSINGLE post = post page\r\n*/\r\n\r\nexport default (state = { all: [], single: null }, action) => {\r\n\tif (typeof state === 'undefined') return\r\n\r\n\tswitch (action.type) {\r\n\t\tcase 'POST/SET_POST':\r\n\t\t\treturn { ...state, single: action.payload }\r\n\t\tcase 'POST/EDIT_POST':\r\n\t\t\treturn { ...state, single: { ...state.single, ...action.payload } }\r\n\t\tcase 'POST/SET_ALL':\r\n\t\t\treturn { ...state, all: action.payload }\r\n\t\tcase 'POST/EDIT_ALL':\r\n\t\t\treturn { ...state }\r\n\t\tcase 'POST/LIKE_SINGLE':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsingle: {\r\n\t\t\t\t\t...state.single,\r\n\t\t\t\t\tlikes: [...state.single.likes, action.payload],\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase 'POST/LIKE_SINGLE/REMOVE':\r\n\t\t\t// remove the given user _id (action payload) from likes\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsingle: {\r\n\t\t\t\t\t...state.single,\r\n\t\t\t\t\tlikes: state.single.likes.filter(\r\n\t\t\t\t\t\t(userId) => userId !== action.payload\r\n\t\t\t\t\t),\r\n\t\t\t\t},\r\n\t\t\t}\r\n\r\n\t\tcase 'POST/COMMENT_SINGLE':\r\n\t\t\t// add comment to single post\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsingle: {\r\n\t\t\t\t\t...state.single,\r\n\t\t\t\t\tcomments: [...state.single.comments, action.payload],\r\n\t\t\t\t},\r\n\t\t\t}\r\n\r\n\t\tcase 'POST/COMMENT_SINGLE/REMOVE':\r\n\t\t\t// remove comment from post\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsingle: {\r\n\t\t\t\t\t...state.single,\r\n\t\t\t\t\tcomments: state.single.comments.filter(\r\n\t\t\t\t\t\t(comment) => comment._id !== action.payload\r\n\t\t\t\t\t),\r\n\t\t\t\t},\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","/*\r\n\tEdit post form will be saved in redux and localStorage, just like postForm\r\n*/\r\n\r\nexport default (state = { formData: null, files: [] }, action) => {\r\n\tif (typeof state === 'undefined') return\r\n\r\n\tswitch (action.type) {\r\n\t\tcase 'EDIT_FORM/SET':\r\n\t\t\tlocalStorage.setItem('edit_form', JSON.stringify(action.payload))\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tformData: action.payload.formData,\r\n\t\t\t\tfiles: action.payload.files,\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { Provider } from 'react-redux'\r\nimport { HashRouter as Router } from 'react-router-dom'\r\nimport { createStore } from 'redux'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport App from './App'\r\nimport reducers from './_reducers/index'\r\n\r\nconst store = createStore(reducers, composeWithDevTools())\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<Router>\r\n\t\t\t<App />\r\n\t\t</Router>\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n)\r\n"],"sourceRoot":""}